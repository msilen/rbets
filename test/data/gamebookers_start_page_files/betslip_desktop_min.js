function SlipConstants(){}SlipConstants.GLOBAL_BET_SLIP="betSlip";SlipConstants.GLOBAL_LIVE_SLIP="liveSlip";SlipConstants.SLIP_FLASH_MOVIE_NAME="slip_flash_movie";SlipConstants.INITIAL_HEADER_PANEL="initialHeaderPanel";SlipConstants.INITIAL_SELECTION_PANEL="initialSelectionPanel";SlipConstants.INITIAL_TOTAL_PANEL="initialTotalPanel";SlipConstants.ALERT_PANEL="alertPanel";SlipConstants.FLASH_ALERT_PANEL="flashAlertPanel";SlipConstants.FIRST_STEP_HEADER_PANEL="headerPanel";SlipConstants.SELECTION_PANEL="selectionPanel";SlipConstants.COMBO_PANEL="comboPanel";SlipConstants.HOT_COMBO_PANEL="hotComboPanel";SlipConstants.HOT_COMBO_CONFIRMATION_PANEL="hotComboConfirmationPanel";SlipConstants.HOT_COMBO_REPORT_PANEL="hotComboReportPanel";SlipConstants.MULTI_WAY_PANEL="multiWayPanel";SlipConstants.MULTI_WAY_CONFIRMATION_PANEL="multiWayConfirmaionPanel";SlipConstants.MULTI_WAY_REPORT_PANEL="multiWayReportPanel";SlipConstants.TEASER_PANEL="teaserPanel";SlipConstants.TEASER_CONFIRMATION_PANEL="teaserConfirmationPanel";SlipConstants.TOTAL_SELECTION_PANEL="totalSelectionPanel";SlipConstants.CONFIRMATION_BUTTON_PANEL="confirmationButtonPanel";SlipConstants.HEADER_CONFIRMATION_PANEL="headerConfirmationPanel";SlipConstants.SELECTION_CONFIRMATION_PANEL="selectionConfirmationPanel";SlipConstants.COMBO_CONFIRMATION_PANEL="comboConfirmationPanel";SlipConstants.TOTAL_CONFIRMATION_PANEL="totalConfirmationPanel";SlipConstants.SUBMIT_BUTTON_PANEL="submitButtonPanel";SlipConstants.DISCLAIMER_PANEL="disclaimerPanel";SlipConstants.WINDOW_TYPE_IN_CLIENT="in_client";SlipConstants.WINDOW_TYPE_NORMAL="stand_alone";SlipConstants.ALERT_NOT_LOGGED="notLoggedIn";SlipConstants.ALERT_NOT_ENOUGH_BALANCE="notEnoughBalance";SlipConstants.SELECTION_REPORT_PANEL="selectionReportPanel";SlipConstants.HEADER_REPORT_PANEL="headernReportPanel";SlipConstants.COMBO_REPORT_PANEL="comboReportPanel";SlipConstants.REPLY_MESSAGE_PANEL="replyMessagePanel";SlipConstants.TRIXIE_PANEL="trixiePanel";SlipConstants.TRIXIE_CONFIRMATION_PANEL="trixieConfirmationPanel";SlipConstants.TRIXIE_REPORT_PANEL="trixieReportPanel";SlipConstants.HINT_PANEL="hintPanel";SlipConstants.LIVE_PROGRESS_BAR_PANEL="liveProgressBarPanel";SlipConstants.ODDS_OPTIONS_PANEL="oddsOptionsPanel";SlipConstants.ODD_STYLE_FRACTION="fraction";SlipConstants.ODD_STYLE_DECIMAL="decimal";SlipConstants.ODD_STYLE_AMERICAN="american";SlipConstants.EACHWAY_PLACE=0;SlipConstants.EACHWAY_WINNER=1;SlipConstants.MIN_TRIXIE_SELECTIONS=3;SlipConstants.MAX_TRIXIE_SELECTIONS=8;SlipConstants.MAX_TRIXIE_2_SYSTEMS=7;SlipConstants.MAX_NUMBER_SYSTEM_BETS=9999;SlipConstants.MAX_CHECKED_SELECTIONS_FOR_MULTI_WAY=15;SlipConstants.IS_SP=true;SlipConstants.IS_NOT_SP=false;SlipConstants.SP_OUTCOME_ODD=1;SlipConstants.IS_X_CAST_ANY_ORDER=true;SlipConstants.IS_NOT_X_CAST_ANY_ORDER=false;SlipConstants.EACH_WAY_POSSIBLE=true;SlipConstants.EACH_WAY_NOT_POSSIBLE=false;SlipConstants.EACH_WAY_ID_NOT_AVAILABLE=null;SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE=null;SlipConstants.TEASER_POSSIBLE=true;SlipConstants.TEASER_NOT_POSSIBLE=false;SlipConstants.TEASER_DATA_NOT_AVAILABLE=null;SlipConstants.IS_HOT_COMBO=true;SlipConstants.IS_NOT_HOT_COMBO=false;SlipConstants.NO_CHANGE_ID=null;SlipConstants.NO_CHANGE_ID_FOR_DB="-1";SlipConstants.CONFLICTED_SELECTION_PAIR_DELIMITER="-";SlipConstants.CATALOG_IDS_DELIMITER=",";SlipConstants.MIN_FLASH_VERSION=new Array("8","0","0");SlipConstants.ALERT_MESSAGE_DELAY=15000;SlipConstants.BET_SLIP_PERSISTENCE_KEY="betslipData";SlipConstants.LIVE_SLIP_PERSISTENCE_KEY="liveslipData";SlipConstants.LIVE_MODE_ON=1;SlipConstants.LIVE_MODE_OFF=0;SlipConstants.PERSIST_IS_PENDING=1;SlipConstants.PERSIST_NOT_PENDING=0;SlipConstants.FREE_BET_MODE_ON=1;SlipConstants.FREE_BET_MODE_OFF=0;SlipConstants.BET_SESSION_HELPER_COOKIE_NAME="slip";SlipConstants.LIVE_SESSION_HELPER_COOKIE_NAME="live_slip";SlipConstants.MAX_SLIP_SELECTIONS=30;SlipConstants.MAX_COMBO_SELECTIONS=20;SlipConstants.ODD_UPDATE_SINGLE_TYPE="single";SlipConstants.ODD_UPDATE_EACHWAY_TYPE="eachway";SlipConstants.ODD_UPDATE_HOT_COMBO_TYPE="hot-combo";SlipConstants.FRANCE_COUNTRY_CODE_ID="FR";SlipConstants.BLOCKED_COUNTRY_CODE=106;SlipConstants.DKSKIN="PBDKSkin";var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quoteString(a){if(escapeable.test(a)){return'"'+a.replace(escapeable,function(b){var d=meta[b];if(typeof d==="string"){return d}d=b.charCodeAt();return"\\u00"+Math.floor(d/16).toString(16)+(d%16).toString(16)})+'"'}return'"'+a+'"'}function compactJSON(h,f){var e=typeof(h);if(e=="undefined"||e==undefined){return"undefined"}else{if(e=="number"||e=="boolean"){return h+""}else{if(h===null){return"null"}}}if(e=="string"){return quoteString(h)}if(e=="object"&&typeof h.toJSON=="function"){return compactJSON(h)}if(e!="function"&&typeof(h.length)=="number"){var c=[];for(var d=0;d<h.length;d++){c.push(compactJSON(h[d],f))}if(f){return"["+c.join(",")+"]"}else{return"["+c.join(", ")+"]"}}if(e=="function"){betSlip.getLogger().log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>Unable to convert object of type 'function' to json.")}var c=[];for(var a in h){var b;e=typeof(a);if(e=="number"){b='"'+a+'"'}else{if(e=="string"){b=quoteString(a)}else{continue}}var g;if(typeof(h[a])=="function"){g=null}else{g=compactJSON(h[a],f)}if(typeof(g)!="string"){continue}if(f){c.push(b+":"+g)}else{c.push(b+": "+g)}}return"{"+c.join(", ")+"}"}function evalJSON(json){return eval("("+json+")")}function KeyedStorage(){}KeyedStorage.prototype.clear=function(){return this};KeyedStorage.prototype.get=function(a){return null};KeyedStorage.prototype.set=function(a,b){return this};KeyedStorage.prototype.remove=function(a){return this};function SimpleStorage(){}SimpleStorage.prototype.get=function(a){return null};SimpleStorage.prototype.set=function(a,b){return this};SimpleStorage.prototype.remove=function(a){return this};SimpleStorage.prototype.clear=function(){return this};function BrowserKeyedStorageProxy(){}BrowserKeyedStorageProxy.prototype=new KeyedStorage();function BackendKeyedStorageProxy(){this._adapter=null;if(globalRhinoData=="undefined"||typeof(globalRhinoData)=="undefined"||globalRhinoData==null||globalRhinoData==""||globalRhinoData=="{}"){this._data=null}else{this._data=evalJSON(globalRhinoData)}}BackendKeyedStorageProxy.prototype=new KeyedStorage();BackendKeyedStorageProxy.prototype.setAdapter=function(a){this._adapter=a};BackendKeyedStorageProxy.prototype.set=function(a,b){if(a=="pSlipStorageKey"){return}this._data=b;globalRhinoData=compactJSON(b);return this};BackendKeyedStorageProxy.prototype.get=function(a){return this._data};function FlashPersistentStorageProxy(){this._persistentKey=null;this._flashMovieByRef=null;this._configs=null;this._sessionHelperCookieName=null}FlashPersistentStorageProxy.prototype=new KeyedStorage();FlashPersistentStorageProxy.prototype.setPersistentKey=function(a){this._persistentKey=a};FlashPersistentStorageProxy.prototype.get=function(a){if($.cookie(this._sessionHelperCookieName)!=this._configs.APP_BUILD_NUMBER){return}var c=this.getFlashMovieByRef().GetVariable(a);if(c==null||c=="undefined"||typeof(c)=="undefined"||c==""){return null}var b=evalJSON(c);return b};FlashPersistentStorageProxy.prototype.set=function(a,b){if(a!="pSlipStorageKey"){if($.cookie(this._sessionHelperCookieName)!=this._configs.APP_BUILD_NUMBER){$.cookie(this._sessionHelperCookieName,this._configs.APP_BUILD_NUMBER)}}var c=compactJSON(b);this.getFlashMovieByRef().SetVariable(a,c);return this};FlashPersistentStorageProxy.prototype.getFlashMovieByRef=function(){return this._flashMovieByRef};FlashPersistentStorageProxy.prototype.setFlashMovieByRef=function(a){this._flashMovieByRef=a;return this};FlashPersistentStorageProxy.prototype.setConfigs=function(a){this._configs=a};FlashPersistentStorageProxy.prototype.setSessionHelperCookieName=function(a){this._sessionHelperCookieName=a};function BackendSessionPersistentStorageProxy(){this._persistentKey=null;this._adapter=null}BackendSessionPersistentStorageProxy.prototype=new KeyedStorage();BackendSessionPersistentStorageProxy.prototype.setPersistentKey=function(a){this._persistentKey=a;return this};BackendSessionPersistentStorageProxy.prototype.setAdapter=function(a){this._adapter=a;return this};BackendSessionPersistentStorageProxy.prototype.getAdapter=function(){return this._adapter};function CookieStorage(){}CookieStorage.prototype=new SimpleStorage();function BrowserCookieStorageProxy(){}BrowserCookieStorageProxy.prototype=new CookieStorage();function BackendCookieStorageProxy(){this._adapter=null}BackendCookieStorageProxy.prototype=new CookieStorage();BackendCookieStorageProxy.prototype.setAdapter=function(a){this._adapter=a;return this};BackendCookieStorageProxy.prototype.getAdapter=function(a){return this._adapter};function Logger(){}Logger.prototype.log=function(a){};function NullLoggerProxy(){}NullLoggerProxy.prototype=new Logger();function BackendLoggerProxy(){this._adapter=null}BackendLoggerProxy.prototype=new Logger();BackendLoggerProxy.prototype.setAdapter=function(a){this._adapter=a;return this};BackendLoggerProxy.prototype.log=function(a){this._adapter.log(a)};function GenericDisplay(){}GenericDisplay.prototype.setDomContainerSelector=function(a){this._domContainerSelector=a};GenericDisplay.prototype.getDomContainerSelector=function(){return this._domContainerSelector};GenericDisplay.prototype.setAnchorId=function(a){this._anchorId=a};GenericDisplay.prototype.getAnchorId=function(){return this._anchorId};GenericDisplay.prototype.setDomAnchorSelector=function(a){this._domAnchorSelector=a};GenericDisplay.prototype.getDomAnchorSelector=function(){return this._domAnchorSelector};GenericDisplay.prototype.setDomAnchorId=function(a){this._domAnchorId=a};GenericDisplay.prototype.getDomAnchorId=function(){return this._domAnchorId};GenericDisplay.prototype.setTemplateFunction=function(a){this._template=a};GenericDisplay.prototype.getTemplateFunction=function(){return this._template};GenericDisplay.prototype.render=function(){};GenericDisplay.prototype.renderDependents=function(){};GenericDisplay.prototype.refresh=function(){var a=this.getOwnerRef().getDataModel();var b=this.getTemplateFunction();var c=b(a);return c};GenericDisplay.prototype.refreshDependents=function(){};GenericDisplay.prototype._getInsertAfterSelectorByTabOrder=function(a){return null};GenericDisplay.prototype.show=function(){this.setVisible(true);return this};GenericDisplay.prototype.hide=function(){this.setVisible(false);return this};GenericDisplay.prototype.setVisible=function(a){this._visible=a;return this};GenericDisplay.prototype.isVisible=function(){return this._visible};GenericDisplay.prototype.setOwnerRef=function(a){this._ownerRef=a;return this};GenericDisplay.prototype.getOwnerRef=function(){return this._ownerRef};GenericDisplay.prototype.getSerializationAttributes=function(){return["_visible"]};function BasicPanel(){}BasicPanel.prototype.setDisplay=function(a){this._display=a;return this};BasicPanel.prototype.getDisplay=function(){return this._display};BasicPanel.prototype.setViewAssignments=function(a){this._viewAssignments=a;return this};BasicPanel.prototype.getViewAssignments=function(){return this._viewAssignments};BasicPanel.prototype.setTabOrder=function(a){this._tabOrder=a;return this};BasicPanel.prototype.getTabOrder=function(){return this._tabOrder};BasicPanel.prototype.setSlipRef=function(a){this._slipRef=a;return this};BasicPanel.prototype.getSlipRef=function(){return this._slipRef};BasicPanel.prototype.getDataModel=function(){return""};BasicPanel.prototype.getSerializationAttributes=function(){return[]};function Panel(){}Panel.prototype=new BasicPanel();Panel.prototype.getPanelName=function(){return this._panelName};Panel.prototype.setPanelName=function(a){this._panelName=a};Panel.prototype.newFromStorage=function(b,a){this._slipRef=b;this._panelName=a};Panel.prototype.saveToStorage=function(){};Panel.prototype.localDataChanged=function(a){};Panel.prototype.externalDataChanged=function(a){this.fetchExternalData(a);this.localDataChanged(a)};Panel.prototype.fetchExternalData=function(a){};function Slip(){this._mobileMode=false;this._slipFreeBetMode=false;this._inputArguments=null;this._cookieStorage=null;this._persistentStorage=null;this._persistPending=SlipConstants.PERSIST_NOT_PENDING;this._logger=null}Slip.prototype=new BasicPanel();Slip.prototype.getPersistentStorage=function(){return this._persistentStorage};Slip.prototype.setPersistentStorage=function(a){this._persistentStorage=a;return this};Slip.prototype.getMobileMode=function(){return this._mobileMode};Slip.prototype.setMobileMode=function(a){this._mobileMode=a;return this};Slip.prototype.getFreeBetMode=function(){return this._freeBetMode};Slip.prototype.setFreeBetMode=function(a){this._freeBetMode=a};Slip.prototype.getExitFreeBetModeOnNextClick=function(){return this._exitFreeBetModeOnNextClick};Slip.prototype.setExitFreeBetModeOnNextClick=function(a){this._exitFreeBetModeOnNextClick=a};Slip.prototype.setSlipFreeBetMode=function(a){this._slipFreeBetMode=a};Slip.prototype.getSlipFreeBetMode=function(a){return this._slipFreeBetMode};Slip.prototype.getInputArguments=function(){return this._inputArguments};Slip.prototype.setInputArguments=function(a){this._inputArguments=a;return this};Slip.prototype.setCookieStorage=function(a){this._cookieStorage=a;return this};Slip.prototype.getCookieStorage=function(a){return this._cookieStorage};Slip.prototype.setPersistentStorage=function(a){this._persistentStorage=a;return this};Slip.prototype.getPersistentStorage=function(a){return this._persistentStorage};Slip.prototype.setPersistPending=function(a){this._persistPending=a};Slip.prototype.getPersistPending=function(){return this._persistPending};Slip.prototype.setPersistLaterJobTimer=function(a){this._persistLaterJobTimer=a};Slip.prototype.getPersistLaterJobTimer=function(){return this._persistLaterJobTimer};Slip.prototype.setLogger=function(a){this._logger=a;return this};Slip.prototype.getLogger=function(a){return this._logger};Slip.prototype.exitFreeBetMode=function(){this.setFreeBetMode(SlipConstants.FREE_BET_MODE_OFF);this.setSlipFreeBetMode(SlipConstants.FREE_BET_MODE_OFF);try{this.getPanelReference(SlipConstants.FIRST_STEP_HEADER_PANEL).removeAllSelections()}catch(a){return false}finally{this.getDisplay().refresh()}};Slip.prototype.internalRegisterPanel=function(c,b){if(this._allPanels==null){this._allPanels=new Object()}this._allPanels[c]=b;var a=b.getDisplay().getDomContainerSelector();if(this._allPanelsByDomContainer==null){this._allPanelsByDomContainer=new Object()}if(this._allPanelsByDomContainer[a]==null){this._allPanelsByDomContainer[a]=new Object()}this._allPanelsByDomContainer[a][c]=b};Slip.prototype.getPanelReference=function(a){return this._allPanels[a]};Slip.prototype.getAllPanels=function(){return this._allPanels};Slip.prototype.isPersistLaterWorkaroundNeeded=function(){if(this.getMobileMode()!=1&&this.getLiveMode()==SlipConstants.LIVE_MODE_ON&&jQuery.browser.msie){var a=parseInt(jQuery.browser.version);if(a==6||a==7){return true}else{return false}}else{return false}};Slip.prototype.startPersistLaterJob=function(){if(this.isPersistLaterWorkaroundNeeded()){this._submitPersistLaterJob()}};Slip.prototype._submitPersistLaterJob=function(){var a;if(this.getLiveMode()==SlipConstants.LIVE_MODE_ON){a=setTimeout(SlipConstants.GLOBAL_LIVE_SLIP+"._persistLaterJob()",5000)}else{if(this.getLiveMode()==SlipConstants.LIVE_MODE_OFF){a=setTimeout(SlipConstants.GLOBAL_BET_SLIP+"._persistLaterJob()",5000)}}this.setPersistLaterJobTimer(a)};Slip.prototype.stopPersistLaterJob=function(){if(this.getPersistLaterJobTimer()!=null){clearTimeout(this.getPersistLaterJobTimer());this.setPersistLaterJobTimer(null)}};Slip.prototype._persistLaterJob=function(){if(this.getPersistPending()==SlipConstants.PERSIST_IS_PENDING){this.persist();this.setPersistPending(SlipConstants.PERSIST_NOT_PENDING)}this._submitPersistLaterJob()};Slip.prototype.persist=function(a){if(a==true){this.setPersistPending(SlipConstants.PERSIST_IS_PENDING);return}var b=new Object();b.slip=this._readPersistenceAttributes(this);b.slipDisplay=this._readPersistenceAttributes(this.getDisplay());b.panel=new Object();b.panelDisplay=new Object();for(var c in this._allPanels){b.panel[c]=this._readPersistenceAttributes(this._allPanels[c]);b.panelDisplay[c]=this._readPersistenceAttributes(this._allPanels[c].getDisplay())}this.getPersistentStorage().set("pSlipStorageKey",this.getPersistenceKey());this.getPersistentStorage().set("pSlipData",b)};Slip.prototype.unpersist=function(){this.getPersistentStorage().set("pSlipStorageKey",this.getPersistenceKey());var b=this.getPersistentStorage().get("outSlipData");if(b==null){return}this.internalUnpersistCorrectTypes(b);this._restorePersistenceAttributes(this,b.slip);this._restorePersistenceAttributes(this.getDisplay(),b.slipDisplay);for(var c in this._allPanels){this._restorePersistenceAttributes(this._allPanels[c],b.panel[c]);this._restorePersistenceAttributes(this._allPanels[c].getDisplay(),b.panelDisplay[c])}var a=this._allPanels[SlipConstants.SELECTION_PANEL];if(typeof(a)!="undefined"){a.markFirstFreeBetSelection()}this.unpersistCustomActions()};Slip.prototype.markCheckedSelections=function(){var a=this._allPanels[SlipConstants.SELECTION_PANEL];for(var b in a.getSelections()){a.markSelection(a.getSelections()[b].getOutcomeId())}};Slip.prototype._readPersistenceAttributes=function(c){var e=c.getSerializationAttributes();var d=new Object();for(var b in e){d[e[b]]=c[e[b]]}return d};Slip.prototype._restorePersistenceAttributes=function(c,e){var d=c.getSerializationAttributes();for(var b in d){c[d[b]]=e[d[b]]}};Slip.prototype.internalUnpersistCorrectTypes=function(a){return a};Slip.prototype.unpersistCustomActions=function(){};Slip.prototype.activateView=function(a){this._activeView=a};Slip.prototype.getActiveView=function(){return this._activeView};Slip.prototype.getLiveMode=function(){return this._liveMode};Slip.prototype.setLiveMode=function(a){this._liveMode=a};Slip.prototype.getTabOrder=function(){return 0};Slip.prototype.getSlipRef=function(){return this};Slip.prototype.setTranslations=function(a){this._translations=a};Slip.prototype.getTranslations=function(){return this._translations};Slip.prototype.setConfigs=function(a){this._configs=a};Slip.prototype.getConfigs=function(){return this._configs};Slip.prototype.setUrls=function(a){this._urls=a};Slip.prototype.getUrls=function(){return this._urls};Slip.prototype.setGlobalBettingConstants=function(a){this._globalBettingConstants=a};Slip.prototype.getGlobalBettingConstants=function(){return this._globalBettingConstants};Slip.prototype.hasFlashPersistence=function(){return(this.isFlashAvailable()&&this.isFlashVersionSupported())};Slip.prototype.getPersistenceKey=function(){return this._persistenceKey};Slip.prototype.setPersistenceKey=function(a){this._persistenceKey=a};Slip.prototype.getSessionHelperCookieName=function(){return this._sessionHelperCookieName};Slip.prototype.setSessionHelperCookieName=function(a){this._sessionHelperCookieName=a};Slip.prototype.getSerializationAttributes=function(){return BasicPanel.prototype.getSerializationAttributes().concat(["_liveMode","_activeView","_maxStakeShown","_isVisitorLoggedIn","_slipFreeBetMode"])};Slip.prototype.setFlashAvailable=function(a){this._flashAvailable=a};Slip.prototype.isFlashAvailable=function(){return this._flashAvailable};Slip.prototype.setFlashVersionSupported=function(a){this._flashVersionSupported=a};Slip.prototype.isFlashVersionSupported=function(){return this._flashVersionSupported};Slip.prototype.setEnoughFlashCache=function(a){this._enoughFlashCache=a};Slip.prototype.hasEnoughFlashCache=function(){return this._enoughFlashCache};Slip.prototype.setMaxStakeShown=function(a){this._maxStakeShown=a};Slip.prototype.isMaxStakeShown=function(){return this._maxStakeShown};Slip.prototype.setWindowType=function(a){this._windowType=a};Slip.prototype.getWindowType=function(){return this._windowType};Slip.prototype.setRequestSkinId=function(a){this._requestSkinId=a};Slip.prototype.getRequestSkinId=function(){return this._requestSkinId};Slip.prototype.getMinStakes=function(){return this._minStakes};Slip.prototype.setMinStakes=function(a){this._minStakes=a};Slip.prototype.onLoginHandler=function(){};Slip.prototype.setNotifyUserActivityHandler=function(a){this._notifyUserActivityHandler=a};Slip.prototype.getNotifyUserActivityHandler=function(){return this._notifyUserActivityHandler};Slip.prototype.notifyUserActivity=function(){if(this._notifyUserActivityHandler){this._notifyUserActivityHandler()}};Slip.prototype.setEDS=function(a){this._eds=a};Slip.prototype.getEDS=function(){return this._eds};var SlipView={INITIAL:"INITIAL",SELECTION:"SELECTION",CONFIRMATION:"CONFIRMATION",REPORT:"REPORT"};function PlaceBetResult(){this._failed=false}PlaceBetResult.prototype.setFailed=function(a){this._failed=a};PlaceBetResult.prototype.isFailed=function(){return this._failed};function ExternalDataChangedContext(){this._type=ExternalDataChangedContextType.GENERIC;this._data=new Object()}ExternalDataChangedContext.prototype.setType=function(a){this._type=a};ExternalDataChangedContext.prototype.getType=function(){return this._type};ExternalDataChangedContext.prototype.setData=function(a){this._data=a};ExternalDataChangedContext.prototype.getData=function(){return this._data};var ExternalDataChangedContextType={GENERIC:"GENERIC",LIVE_ODDS_NOTIFICATION:"LIVE_ODDS_NOTIFICATION",NUM_SELECTIONS_CHANGED:"NUM_SELECTIONS_CHANGED"};function SlipFactory(){}SlipFactory.prototype.createHintPanel=function(c,f,a,e){var b=new HintPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new HintPanelDisplay(f.getDisplay().getDomContainerSelector()+" #hintPanelContainer");d.setAnchorId("hintPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createSelectionPanel=function(c,f,a,e){var b=new SelectionPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new SelectionPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");d.setAnchorId("selectionPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createEmptyHeaderPanel=function(c,f,a,e){var b=new SimpleHeaderPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.INITIAL));var d=new EmptyHeaderPanelDisplay(f.getDisplay().getDomContainerSelector()+" #headerPanelContainer");d.setAnchorId("headerPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createEmptySelectionPanel=function(c,f,a,e){var b=new SimpleSelectionPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.INITIAL));var d=new EmptySelectionPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");d.setAnchorId("selectionPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createEmptyTotalPanel=function(c,f,a,e){var b=new SimpleTotalPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.INITIAL));var d=new EmptyTotalPanelDisplay(f.getDisplay().getDomContainerSelector()+" #totalPanelContainer");d.setAnchorId("totalPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createAlertPanel=function(c,f,a,e){var b=new AlertPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.INITIAL,SlipView.SELECTION,SlipView.CONFIRMATION,SlipView.REPORT));var d=new AlertPanelDisplay(f.getDisplay().getDomContainerSelector()+" #alertPanelContainer");d.setAnchorId("alertPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createFlashAlertPanel=function(c,f,a,e){var b=new FlashAlertPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new FlashAlertPanelDisplay(f.getDisplay().getDomContainerSelector()+" #alertPanelContainer");d.setAnchorId("alertPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createHeaderSelectionPanel=function(c,f,a,e){var b=new HeaderSelectionPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new HeaderSelectionPanelDisplay(f.getDisplay().getDomContainerSelector()+" #headerPanelContainer");d.setAnchorId("headerPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createHeaderConfirmationPanel=function(c,f,a,e){var b=new HeaderConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new HeaderConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #headerPanelContainer");d.setAnchorId("headerPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createHeaderReportPanel=function(c,f,a,e){var b=new HeaderReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new HeaderReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #headerPanelContainer");d.setAnchorId("headerPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createDisclaimerPanel=function(c,f,a,e){var b=new DisclaimerPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new DisclaimerPanelDisplay(f.getDisplay().getDomContainerSelector()+" #disclaimerContainer");d.setAnchorId("disclaimerContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createTotalSelectionPanel=function(c,f,a,e){var b=new TotalSelectionPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new TotalSelectionPanelDisplay(f.getDisplay().getDomContainerSelector()+" #totalPanelContainer");d.setAnchorId("totalPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createTotalConfirmationPanel=function(c,f,a,e){var b=new TotalConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION,SlipView.REPORT));var d=new TotalConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #totalPanelContainer");d.setAnchorId("totalPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createConfirmationButtonPanel=function(c,f,a,e){var b=new ConfirmationButtonPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new ConfirmationButtonPanelDisplay(f.getDisplay().getDomContainerSelector()+" #buttonContainer");d.setAnchorId("buttonContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createSelectionConfirmationPanel=function(c,f,a,e){var b=new SelectionConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new SelectionConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");d.setAnchorId("selectionPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createSelectionReportPanel=function(c,f,a,e){var b=new SelectionReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new SelectionReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");d.setAnchorId("selectionPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createComboConfirmationPanel=function(c,f,a,e){var b=new ComboConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new ComboConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createSubmitButtonPanel=function(c,f,a,e){var b=new SubmitButtonPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new SubmitButtonPanelDisplay(f.getDisplay().getDomContainerSelector()+" #buttonContainer");d.setAnchorId("buttonContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createReplyMessagePanel=function(c,f,a,e){var b=new ReplyMessagePanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new ReplyMessagePanelDisplay(f.getDisplay().getDomContainerSelector()+" #replyMessageContainer");d.setAnchorId("replyMessageContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createTeaserPanel=function(b,f,d,c,i,e,h,j){var a=new TeaserPanel();a.setPanelName(b);a.setSlipRef(f);a.setTabOrder(d);a.setViewAssignments(new Array(SlipView.SELECTION));a.setOdds(i);a.setPoints(e);a.setTeaserMaxStakes(h);a.setSportNames(j);var g=new TeaserPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");g.setAnchorId("selectionPanelContainer");g.setOwnerRef(a);g.setVisible(c);a.setDisplay(g);a.getSlipRef().internalRegisterPanel(b,a);return a};SlipFactory.prototype.createTeaserConfirmationPanel=function(b,f,d,c,i,e,g){var a=new TeaserConfirmationPanel();a.setPanelName(b);a.setSlipRef(f);a.setTabOrder(d);a.setSportNames(g);a.setViewAssignments(new Array(SlipView.CONFIRMATION,SlipView.REPORT));var h=new TeaserConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #selectionPanelContainer");h.setAnchorId("selectionPanelContainer");h.setOwnerRef(a);h.setVisible(c);a.setDisplay(h);a.getSlipRef().internalRegisterPanel(b,a);return a};SlipFactory.prototype.createComboReportPanel=function(c,f,a,e){var b=new ComboReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new ComboReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createLiveProgressBarPanel=function(c,f,a,e){var b=new LiveProgressBarPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new LiveProgressBarPanelDisplay(f.getDisplay().getDomContainerSelector()+" #liveProgressBarContainer");d.setAnchorId("liveProgressBarContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function BetSlip(){this.setLiveMode(0);this.setPersistenceKey(SlipConstants.BET_SLIP_PERSISTENCE_KEY);this.setSessionHelperCookieName(SlipConstants.BET_SESSION_HELPER_COOKIE_NAME);this._isVisitorLoggedIn=visitor.isLoggedIn();this.setFreeBetMode(SlipConstants.FREE_BET_MODE_OFF)}BetSlip.prototype=new Slip();BetSlip.prototype.getDataModel=function(){var a=new Object();a.translations=this.getTranslations();a.urls=this._urls;a.liveMode=this.getLiveMode();a.freeBetMode=this.getFreeBetMode();if(this.getActiveView()==SlipView.CONFIRMATION){a.formName="formConf";a.formAction=this._urls.placebet;a.formTarget="target='confFrame'";a.style=""}else{if(this.getActiveView()==SlipView.SELECTION){a.isSelectionView=true}a.formName="formSlip";a.formAction="javascript:;";a.formTarget="";a.style="style='margin:0; padding:0'"}return a};BetSlip.prototype._sortStakeBoxContainers=function(e,d){var c=e.getMaxStakeBoxTabIndex();var f=d.getMaxStakeBoxTabIndex();if(c>f){return 1}else{if(c==f){return 0}else{return -1}}};BetSlip.prototype._getNextStakeBoxFromRegisters=function(d,a){var e=a.sort(this._sortStakeBoxContainers);var b=d+1;for(var c in e){if(e[c].getMaxStakeBoxTabIndex()>=b){return e[c].getNextStakeBoxName(d)}}return null};BetSlip.prototype._findNextStakeBoxName=function(b){var a=new Array();for(var c in this._allPanels){if(this._allPanels[c].getDisplay().isVisible()&&typeof(this._allPanels[c].getStakeBoxRegister)=="function"){a.push(this._allPanels[c].getStakeBoxRegister())}}return this._getNextStakeBoxFromRegisters(b,a)};BetSlip.prototype.stakeTabOrder=function(b,d){var a=((d.keyCode)?d.keyCode:d.which);if(a!=13){return true}var c=document.formSlip[this._findNextStakeBoxName(b)];if(c!=null){c.focus()}};BetSlip.prototype.getNumberOfCombinations=function(d,c,a){d-=a;c-=a;if(d<1||c<1||d>20||c>20){return -1}if(d==1||c==0||d==c){return 1}if(c>(d-c)){c=d-c}return this.getConfigs()["COMBINATIONS_ARRAY"][d-1][c-1]};BetSlip.prototype.calculatePoints=function(d,a,b,c){return d*c*this.calculatePointsOdd(a,b)};BetSlip.prototype.calculatePointsOdd=function(a,b){var c=0;if(!b){if(a<12){c=(((a-1)*(1-(1/a)))/10)}else{c=1}}return c};BetSlip.prototype.formatPoints=function(a){if(a!="SP"){var d=2;result=new String();result.value="";var c=new String(a);var e=0;while((c.charAt(e)!=".")&&(e!=(c.length))){result.value+=c.charAt(e);e++}if(e>0&&e<(c.length+0)){for(var b=e+2;b>e;b--){if(c.charAt(b)=="0"){d--}else{break}}if(d!=0){result.value+=c.charAt(e)}for(var b=1;b<=d;b++){result.value+=c.charAt(e+b)}}return result.value}else{return a}};BetSlip.prototype.getCurrencySymbol=function(a){var b=new Object();b.USD="$";b.EUR="&euro;";b.GBP="&pound;";return b[a]};BetSlip.prototype.getMinStake=function(a){try{return this.getMinStakes()[a]+0}catch(b){return 0.1}};BetSlip.prototype.internalUnpersistCorrectTypes=function(f){for(var z in f.panel[SlipConstants.SELECTION_PANEL]._selections){var A=new SlipEvent();for(var w in f.panel[SlipConstants.SELECTION_PANEL]._selections[z]._eventRef){A[w]=f.panel[SlipConstants.SELECTION_PANEL]._selections[z]._eventRef[w]}f.panel[SlipConstants.SELECTION_PANEL]._selections[z]._eventRef=A}for(var z in f.panel[SlipConstants.SELECTION_PANEL]._selections){var v=new Selection();var i=new Number();for(var m in f.panel[SlipConstants.SELECTION_PANEL]._selections[z]){v[m]=f.panel[SlipConstants.SELECTION_PANEL]._selections[z][m]}f.panel[SlipConstants.SELECTION_PANEL]._selections[z]=v}for(var z in f.panel[SlipConstants.SELECTION_PANEL]._checkedSelections){var v=new Selection();var i=new Number();for(var m in f.panel[SlipConstants.SELECTION_PANEL]._checkedSelections[z]){v[m]=f.panel[SlipConstants.SELECTION_PANEL]._checkedSelections[z][m]}f.panel[SlipConstants.SELECTION_PANEL]._checkedSelections[z]=v}if(this.getSlipRef().getLiveMode()==0){var c=new TeaserBlockData();var q=f.panel[SlipConstants.TEASER_PANEL];for(var b in q._teaserBlockData){c[b]=q._teaserBlockData[b]}delete q._teaserBlockData;q._teaserBlockData=c}for(var u in f.panel[SlipConstants.COMBO_PANEL]._comboTypes){if(typeof(f.panel[SlipConstants.COMBO_PANEL]._comboTypes[u])!="undefined"){var s=new ComboType();for(var h in f.panel[SlipConstants.COMBO_PANEL]._comboTypes[u]){s[h]=f.panel[SlipConstants.COMBO_PANEL]._comboTypes[u][h]}f.panel[SlipConstants.COMBO_PANEL]._comboTypes[u]=s}}for(var u in f.panel[SlipConstants.TRIXIE_PANEL]._trixieCombos){var n=new TrixieComboType();if(f.panel[SlipConstants.TRIXIE_PANEL]._trixieCombos[u]){for(var d in f.panel[SlipConstants.TRIXIE_PANEL]._trixieCombos[u]){n[d]=f.panel[SlipConstants.TRIXIE_PANEL]._trixieCombos[u][d]}}f.panel[SlipConstants.TRIXIE_PANEL]._trixieCombos[u]=n}if(this.getSlipRef().getLiveMode()==0){if(f.panel[SlipConstants.HOT_COMBO_PANEL]._hotComboData!=null){var l=new HotCombo();for(var o in f.panel[SlipConstants.HOT_COMBO_PANEL]._hotComboData){l[o]=f.panel[SlipConstants.HOT_COMBO_PANEL]._hotComboData[o]}f.panel[SlipConstants.HOT_COMBO_PANEL]._hotComboData=l}}var e=new Array(SlipConstants.SELECTION_PANEL,SlipConstants.COMBO_PANEL,SlipConstants.MULTI_WAY_PANEL,SlipConstants.TRIXIE_PANEL);for(var r in e){var t=new SelectionsValidationResult();for(var y in f.panel[e[r]]._selectionsValidationsResult){t[y]=f.panel[e[r]]._selectionsValidationsResult[y]}f.panel[e[r]]._selectionsValidationsResult=t}for(var a in f.panel[SlipConstants.MULTI_WAY_PANEL]._multiWayCombinations){var x=f.panel[SlipConstants.MULTI_WAY_PANEL]._multiWayCombinations[a];var g=new MultiWayCombinationType();for(var j in x){g[j]=x[j]}f.panel[SlipConstants.MULTI_WAY_PANEL]._multiWayCombinations[a]=g}return f};BetSlip.prototype._replace=function(a,c,d){str=new String();str.value="";for(var b=0;b<a.length;b++){if(a.charAt(b)==c){str.value+=d}else{str.value+=a.charAt(b)}}return str.value};BetSlip.prototype.escapeStake=function(a){var b=this._replace(a,",",".");b=this._replace(b,"'","");b=this._replace(b,'"',"");return(b.length>0)?to_mn(b):""};BetSlip.prototype.makeStake=function(a){var c=this.escapeStake(a);var b=1*c;if(b.toString()!="NaN"&&b){return b}return 0};BetSlip.prototype.activateView=function(a){var b=this.getActiveView();switch(a){case SlipView.INITIAL:break;case SlipView.SELECTION:this.getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();break;case SlipView.CONFIRMATION:this.getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.COMBO_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.TRIXIE_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.MULTI_WAY_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).externalDataChanged();if(this.getSlipRef().getLiveMode()==0){this.getPanelReference(SlipConstants.TEASER_CONFIRMATION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.HOT_COMBO_CONFIRMATION_PANEL).externalDataChanged()}break;case SlipView.REPORT:this.getPanelReference(SlipConstants.SELECTION_REPORT_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.COMBO_REPORT_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.MULTI_WAY_REPORT_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.TRIXIE_REPORT_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.REPLY_MESSAGE_PANEL).externalDataChanged();if(this.getSlipRef().getLiveMode()==0){this.getPanelReference(SlipConstants.HOT_COMBO_REPORT_PANEL).externalDataChanged()}break}Slip.prototype.activateView.call(this,a);if(this.getSlipRef().getLiveMode()==1&&visitor.getLiveSlipOddsAutoUpdate()==1&&this.getActiveView()==SlipView.SELECTION&&(b==SlipView.CONFIRMATION||b==SlipView.REPORT)){this.getPanelReference(SlipConstants.SELECTION_PANEL).postProcessOutcomeChangedNotifications();this.getPanelReference(SlipConstants.SELECTION_PANEL).postProcessEventChangedNotification();this.getPanelReference(SlipConstants.SELECTION_PANEL).postProcessTranslationChangedNotification()}};BetSlip.prototype.unpersistCustomActions=function(){var a;if(this.getPanelReference(SlipConstants.SELECTION_PANEL).getSelectionsCount()==0){a=SlipView.INITIAL}else{a=SlipView.SELECTION}if(this.getActiveView()!=a){this.activateView(a)}if(this.getLiveMode()==1&&visitor.getLiveSlipOddsAutoUpdate()==1){this.getPanelReference(SlipConstants.SELECTION_PANEL).subscribeSelectionsForOddChangeNotifications()}};BetSlip.prototype.onLoginHandler=function(){this.getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).externalDataChanged()};BetSlip.prototype.freeBetModeSwitchHandler=function(){try{this.getSlipRef().getPanelReference(SlipConstants.FIRST_STEP_HEADER_PANEL).removeAllSelections()}catch(a){return false}};BetSlip.prototype.checkVisitorLoggedIn=function(){if(this._isVisitorLoggedIn!=visitor.isLoggedIn()){this._isVisitorLoggedIn=visitor.isLoggedIn();this.onLoginHandler()}};BetSlip.prototype.checkFreeBetModeSwitched=function(){if(this.getSlipRef().getSlipFreeBetMode()!=this.getSlipRef().getFreeBetMode()){this.getSlipRef().setSlipFreeBetMode(this.getSlipRef().getFreeBetMode());this.freeBetModeSwitchHandler()}};function StakeBoxRegister(){this._maxStakeBoxTabIndex=0}StakeBoxRegister.prototype.setMaxStakeBoxTabIndex=function(a){this._maxStakeBoxTabIndex=a};StakeBoxRegister.prototype.getMaxStakeBoxTabIndex=function(){return this._maxStakeBoxTabIndex};StakeBoxRegister.prototype._increaseMaxStakeBoxTabIndex=function(){this._maxStakeBoxTabIndex++};StakeBoxRegister.prototype.registerStakeBox=function(a){this._increaseMaxStakeBoxTabIndex();this._stakeBoxRegister[this.getMaxStakeBoxTabIndex()]=a;return a};StakeBoxRegister.prototype.resetStakeBoxRegister=function(){this._stakeBoxRegister=new Object()};StakeBoxRegister.prototype.getNextStakeBoxName=function(b){for(var a=b+1;a<=this.getMaxStakeBoxTabIndex();a++){if(typeof(this._stakeBoxRegister[a])!="undefined"){return this._stakeBoxRegister[a]}}return null};function SimpleHeaderPanel(){}SimpleHeaderPanel.prototype=new Panel();SimpleHeaderPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();return a};function LiveProgressBarPanel(){}LiveProgressBarPanel.prototype=new Panel();LiveProgressBarPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();return a};LiveProgressBarPanel.prototype.fetchExternalData=function(){this.getDisplay().setVisible(this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).mustShowLiveProgressBar()==1)};LiveProgressBarPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};function SimpleSelectionPanel(){}SimpleSelectionPanel.prototype=new Panel();SimpleSelectionPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();return a};function SimpleTotalPanel(){}SimpleTotalPanel.prototype=new Panel();SimpleTotalPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.freeBetMode=this.getSlipRef().getFreeBetMode();return a};function HeaderSelectionPanel(){}HeaderSelectionPanel.prototype=new Panel();HeaderSelectionPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();if(this.getSlipRef().getLiveMode()==0){a.removeAllSelections=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.FIRST_STEP_HEADER_PANEL).removeAllSelections";a.notifyUserActivity=SlipConstants.GLOBAL_BET_SLIP+".notifyUserActivity"}else{a.removeAllSelections=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.FIRST_STEP_HEADER_PANEL).removeAllSelections";a.notifyUserActivity=SlipConstants.GLOBAL_LIVE_SLIP+".notifyUserActivity"}return a};HeaderSelectionPanel.prototype.removeAllSelections=function(){this.localDataChanged()};HeaderSelectionPanel.prototype.localDataChanged=function(){this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).bankersLinkClicked(false);this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).removeAllSelections()};function HeaderConfirmationPanel(){}HeaderConfirmationPanel.prototype=new Panel();HeaderConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();if(this.getSlipRef().getLiveMode()==0){a.returnToFirstView=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.HEADER_CONFIRMATION_PANEL).returnToFirstView"}else{a.returnToFirstView=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.HEADER_CONFIRMATION_PANEL).returnToFirstView"}if(this.getSlipRef().getLiveMode()==0){a.response=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).response"}else{a.response=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).response"}return a};HeaderConfirmationPanel.prototype.returnToFirstView=function(){this.getSlipRef().activateView(SlipView.SELECTION);this.getSlipRef().getDisplay().refresh()};function DisclaimerPanel(){this._selectionsCount=0;this._maxBetTranslation}DisclaimerPanel.prototype=new Panel();DisclaimerPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.maxBetTranslation=this._maxBetTranslation;a.selectionsCount=this._selectionsCount;return a};DisclaimerPanel.prototype.fetchExternalData=function(){this._selectionsCount=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelectionsCount()};DisclaimerPanel.prototype.localDataChanged=function(){var b=new Array();var a=this.getSlipRef().getTranslations();b.USD=a.SLIP_DISCLAIMER_MAX_WIN_USD;b.EUR=a.SLIP_DISCLAIMER_MAX_WIN_EUR;b.GBP=a.SLIP_DISCLAIMER_MAX_WIN_GBP;b.HUF=a.SLIP_DISCLAIMER_MAX_WIN_HUF;b.PLN=a.SLIP_DISCLAIMER_MAX_WIN_PLN;b.RON=a.SLIP_DISCLAIMER_MAX_WIN_RON;b.CAD=a.SLIP_DISCLAIMER_MAX_WIN_CAD;b.JPY=a.SLIP_DISCLAIMER_MAX_WIN_JPY;b.DKK=a.SLIP_DISCLAIMER_MAX_WIN_DKK;this._maxBetTranslation=b[visitor.getCurrency()];this.getDisplay().refresh()};function ConfirmationButtonPanel(){this._errorMessage="";this._bets="";this._betOutcomes=""}ConfirmationButtonPanel.prototype=new Panel();ConfirmationButtonPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.freeBetMode=this.getSlipRef().getFreeBetMode();if(this.getSlipRef().getLiveMode()==0){a.goToConfirmation=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).goToConfirmation";a.notifyUserActivity=SlipConstants.GLOBAL_BET_SLIP+".notifyUserActivity"}else{a.goToConfirmation=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).goToConfirmation";a.notifyUserActivity=SlipConstants.GLOBAL_LIVE_SLIP+".notifyUserActivity"}return a};ConfirmationButtonPanel.prototype.localDataChanged=function(){this._errorMessage="";this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()};ConfirmationButtonPanel.prototype.getErrorMessage=function(){return this._errorMessage};ConfirmationButtonPanel.prototype.getBets=function(){return this._bets};ConfirmationButtonPanel.prototype.getBetOutcomes=function(){return this._betOutcomes};ConfirmationButtonPanel.prototype.goToConfirmation=function(){this.getSlipRef().getLogger().log("ConfirmationButtonPanel.prototype.goToConfirmation start");var m="";var a=0;var W=0;var G=false;var j=new Object();var A=new Array();var n=new Array();var l=false;var Q=false;var aa=0;var c=-1;var k=this.getSlipRef().getGlobalBettingConstants();var z=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var T=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);var R=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);var f=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);var P=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL);var M=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);var N=z.getTotalCost()+T.getTotalStake()+f.getTotalCost()+M.getTotalCost();var t=z.getTotalTax()+T.getTotalTax()+f.getTotalTax()+M.getTotalTax();if(this.getSlipRef().getLiveMode()==0){N+=R.getTotalCost()+P.getTeaserBlockData().getTotalCost();t+=P.getTeaserBlockData().getTotalTax()}if(isNaN(N)){N=0}if(isNaN(t)){t=0}var V=T.getComboTypes();var O=z.isBankersShown();var g=z.getSelections();var b=z.getCheckedSelectionsCounter();if(!visitor.isLoggedIn()){this._errorMessage=SlipConstants.ALERT_NOT_LOGGED;this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged();return}if(this.getSlipRef().getFreeBetMode()!=SlipConstants.FREE_BET_MODE_ON){this._errorMessage="";if(to_mn(N)*1+to_mn(t)*1>to_mn(visitor.getBalance())*1){this._errorMessage=SlipConstants.ALERT_NOT_ENOUGH_BALANCE;this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged();return}}this._errorMessage="";if(visitor.getLockLevel()==2){if(this.getSlipRef().getMobileMode()!=1){alert(this.getSlipRef().getTranslations()["MSG15_SLIP_22"])}else{this._errorMessage=this.getSlipRef().getTranslations()["MSG15_SLIP_22"];this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}return}var X;if(this.getSlipRef().getLiveMode()==1){X=visitor.getBaseFxRate()}else{X=this.getSlipRef().getMinStake(visitor.getCurrency())}X=ceil(X);for(var Z in g){if(typeof(g[Z])=="function"){continue}if(g[Z].isLockedSelection()){continue}var j=new Object();c++;var B;var F;var I;var H;if(g[Z].isSelectionChecked()){B=true}else{B=false}if(g[Z].isBankerChecked()&&O){F=true}else{F=false}if(g[Z].isXCastAnyOrder()){I=g[Z].getOutcomeId();H=new Array(I.length);for(var S=0;S<I.length;S++){H[S]=SlipConstants.NO_CHANGE_ID_FOR_DB+""}}else{I=new Array(""+g[Z].getOutcomeId());if(g[Z].getOutcomeChangeId()==SlipConstants.NO_CHANGE_ID){H=new Array(""+SlipConstants.NO_CHANGE_ID_FOR_DB)}else{H=new Array(""+g[Z].getOutcomeChangeId())}}j.outcomeId=I;j.outcomeChangeId=H;j.suggestedSelection=g[Z].isSuggestedSelection();j.liveCTASelection=g[Z].isCTASelection();if(this.getSlipRef().getLiveMode()==0&&R.isHotComboAvailable()){j.styledRealOdd=g[Z].getOutcomeRealOdd()}else{j.styledRealOdd=g[Z].getStyledRealOdd()}j.selected=B;j.banker=F;if(g[Z].getEachWayId()){j.eachwayId=g[Z].getEachWayId();if(g[Z].getEachWayOutcomeChangeId()==SlipConstants.NO_CHANGE_ID){j.eachwayOutcomeChangeId=SlipConstants.NO_CHANGE_ID_FOR_DB}else{j.eachwayOutcomeChangeId=g[Z].getEachWayOutcomeChangeId()}}else{j.eachwayId="n";j.eachwayOutcomeChangeId=SlipConstants.NO_CHANGE_ID_FOR_DB}if(g[Z].getEachWayOdd()){j.eachwayOdd=g[Z].getEachWayOdd()}else{j.eachwayOdd=0}j.xcastAnyOrder=g[Z].isXCastAnyOrder();j.teaserOptionSelected=g[Z].isTeaserChecked();if(g[Z].isTeaserChecked()==true&&this.getSlipRef().getLiveMode()==0&&P.getDisplay().isVisible()){var w=g[Z].getEventRef().getSportId();var x=P.getSelectedPointsIdForSport(w);var C=g[Z].getTeaserData()[x];j.teaserOutcomeId=((C)?C.teaserOutcomeId:"");j.teaserOutcomeOdd=((C)?C.teaserOutcomeOdd:"");j.teaserOutcomeChangeId=((C)?""+C.teaserOutcomeChangeId:"");if(j.teaserOutcomeChangeId==SlipConstants.NO_CHANGE_ID||j.teaserOutcomeChangeId=="null"){j.teaserOutcomeChangeId=SlipConstants.NO_CHANGE_ID_FOR_DB}}else{j.teaserOutcomeId=0;j.teaserOutcomeOdd=0;j.teaserOutcomeChangeId=SlipConstants.NO_CHANGE_ID_FOR_DB}A[c]=j;var h=g[Z].getDisplayStake();if(h==null||h==""){continue}var Y=g[Z].getStake();if(Y!=0||(Y==0&&this.getSlipRef().escapeStake(h)==0)){if(Y>g[Z].getMaxStake()){if(a==0){m=Y+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+g[Z].getEventRef().getName()+"("+g[Z].getMaxStake()+") "}a++;z.editStake(Z,0)}if(Y<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;z.editStake(Z,0)}else{if(Y<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()+this.getSlipRef().getTranslations()["MSG20_SLIP_22"]}a++;z.editStake(Z,0)}}if(a==0){l=true;if(g[Z].isEachWayChecked()){W=2;G=true}else{W=1;G=false}var U=null;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var y=Y*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);U=(Math.round(y*100)/100)}var s=new Object();s.isTeaser=false;s.outcomesCount=1;s.stake=Y+0;s.outcomeIndex=c;s.numSingleBets=W;s.single=true;s.rowId=Z;s.eachwaySelected=G;s.betTax=U;n[n.length++]=s;aa++}}else{if(a==0){m=h+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;z.editStake(Z,0)}}if(A.length>0){this._betOutcomes=compactJSON(A)}if(this.getSlipRef().getLiveMode()==0){var v=P.getTeaserBlockData().getDisplayStake();if(a==0&&v!=null&&v!=""){var K=P.getTeaserBlockData().getStake();if(K!=0||(K==0&&this.getSlipRef().escapeStake(v)==0)){var q=P.getTeaserBlockData().getMaxStake();if(K>q){m=K+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+" ("+q+") ";a++;P.getTeaserBlockData().setStake(0)}if(K<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;P.getTeaserBlockData().setStake(0)}else{if(K<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()}a++;P.getTeaserBlockData().setStake(0)}}if(a==0){l=true;var U=null;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var y=K*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);U=(Math.round(y*100)/100)}var s=new Object();s.isTeaser=1;s.outcomesCount=z.getCheckedTeasersCount();s.stake=K+0;s.outcomeIndex=0;s.numSingleBets=1;s.single=0;s.teaserGroupId=P.getTeaserBlockData().getSelectedTeaserGroupId();s.rowId=-1;s.betTax=U;n[n.length++]=s}}else{if(a==0){m=v+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;P.getTeaserBlockData().setStake(0)}}}if(this.getSlipRef().getLiveMode()==0){if(R.isHotComboAvailable()){var E=R.getHotComboData().getHotComboDisplayStake();if(a==0&&typeof(E)!="undefined"&&E!=""){var o=R.getHotComboData().getHotComboStake();if(o!=0||(o==0&&this.getSlipRef().escapeStake(E)==0)){var r=R.getHotComboData().getHotComboMaxStake();if(o>r){m=o+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+" ("+r+") ";a++;R.editStake(0)}if(o<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;R.editStake(0)}else{if(o<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()}a++;R.editStake(0)}}if(a==0){l=true;var e=R.getHotComboData();var s=new Object();s.outcomesCount=b;s.comboClass=2;s.stake=o;s.outcomeIndex=0;s.numSingleBets=1;s.single=false;s.rowId=0;s.eachwaySelected=false;s.hotComboId=e.getHotComboId();s.hotComboPercentage=e.getHotComboPercentage();s.betSystemType=null;s.isTeaser=false;n[n.length++]=s}}else{if(a==0){m=E+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;R.editStake(0)}}}}var J=f.getMultiWayCombinations();for(var u in J){var D=J[u];var Y=D.getStake();if(a==0&&typeof(D.getDisplayStake())!="undefined"&&D.getDisplayStake()!=""){if(Y!=0||(Y==0&&this.getSlipRef().escapeStake(D.getDisplayStake())==0)){if(Y>D.getMaxStake()){m=Y+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+" ("+D.getMaxStake()+") ";a++;f.editStake(0,u)}if(Y<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;f.editStake(0,u)}else{if(Y<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()}a++;f.editStake(0,u)}}if(a==0){l=true;var U=null;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var y=Y*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);U=(Math.round(y*100)/100)}var s=new Object();s.outcomesCount=b;s.comboClass=D.getCombinationSize();s.stake=Y;s.outcomeIndex=0;s.numSingleBets=D.getNumberOfBets();s.single=false;s.rowId=u;s.eachwaySelected=false;s.hotComboId=null;s.hotComboPercentage=null;s.betSystemType=k.BET_SYSTEM_TYPE_MULTIWAY_COMBO;s.isTeaser=false;s.betTax=U;n[n.length++]=s}}else{if(a==0){m=D.getDisplayStake()+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;f.editStake(0,u)}}}for(var S=0;S<V.length;S++){if(typeof(V[S])!="undefined"){var Y;if(V[S].getDisplayStake()==null||V[S].getDisplayStake()==""){continue}Y=V[S].getStake();if(Y!=0||(Y==0&&this.getSlipRef().escapeStake(V[S].getDisplayStake())==0)){if(Y>V[S].getMaxStake()){if(a==0){m=Y+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+" ("+V[S].getMaxStake()+") "}a++;T.editStake(S,0)}if(Y<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;T.editStake(S,0)}else{if(Y<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()}a++;T.editStake(S,0)}}if(a==0){l=true;if(V[S].isEachWayChecked()==true){G=true}else{G=false}var s=new Object();s.isTeaser=false;var U=null;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var y=Y*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);U=(Math.round(y*100)/100)}s.outcomesCount=b;s.comboClass=V[S].getComboClass();s.stake=Y;s.outcomeIndex=0;s.numSingleBets=V[S].getNumBets();s.single=false;s.rowId=S;s.eachwaySelected=G;s.hotComboId=null;s.hotComboPercentage=null;s.betTax=U;if(V[S].getComboClass()==b){s.betSystemType=null}else{s.betSystemType=k.BET_SYSTEM_TYPE_SYSTEM_COMBO}n[n.length++]=s}}else{if(a==0){m=V[S].getDisplayStake()+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;T.editStake(S,0)}}}var L=M.getTrixies();for(var d in L){var h=L[d].getDisplayStake();if(h==null||h==""){continue}var Y=L[d].getStake();if(Y!=0||(Y==0&&this.getSlipRef().escapeStake(h)==0)){if(Y>L[d].getMaxStake()){if(a==0){m=Y+this.getSlipRef().getTranslations()["MSG10_SLIP_22"]+" ("+L[d].getMaxStake()+") "}a++;M.editStake(d,0)}if(Y<=0){if(a==0){m=this.getSlipRef().getTranslations()["MSG13_SLIP_22"]}a++;M.editStake(d,0)}else{if(Y<X){if(a==0){m=this.getSlipRef().getTranslations()["MSG16_SLIP_22"]+X+" "+visitor.getCurrency()}a++;M.editStake(d,0)}}if(a==0){l=true;var U=null;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var y=Y*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);U=(Math.round(y*100)/100)}var s=new Object();s.isTeaser=false;s.outcomesCount=b;s.comboClass=L[d].getComboClass();s.stake=Y+0;s.outcomeIndex=0;s.numSingleBets=L[d].getNumBets();s.single=false;s.rowId=d;s.eachwaySelected=false;s.hotComboId=null;s.hotComboPercentage=null;s.betSystemType=L[d].getBetSystemType();s.betTax=U;n[n.length++]=s}}else{if(a==0){m=h+this.getSlipRef().getTranslations()["MSG9_SLIP_22"]}a++;M.editStake(d,0)}}if(a==1){if(this.getSlipRef().getMobileMode()!=1){alert(m)}else{this._errorMessage=m;this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}this.getSlipRef().getDisplay().refresh();return}else{if(a>1){if(this.getSlipRef().getMobileMode()!=1){alert(this.getSlipRef().getTranslations()["MSG_ENTER_VALID_STAKES_SLIP"])}else{this._errorMessage=this.getSlipRef().getTranslations()["MSG_ENTER_VALID_STAKES_SLIP"];this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}this.getSlipRef().getDisplay().refresh();return}}if(!l){if(this.getSlipRef().getMobileMode()!=1){alert(this.getSlipRef().getTranslations()["MSG12_SLIP_22"])}else{this._errorMessage=this.getSlipRef().getTranslations()["MSG12_SLIP_22"];this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged();this.getSlipRef().getDisplay().refresh()}return}this._bets=compactJSON(n);this.getSlipRef().activateView(SlipView.CONFIRMATION);this.getSlipRef().getPanelReference(SlipConstants.DISCLAIMER_PANEL).externalDataChanged();this.getSlipRef().getDisplay().refresh();this.getSlipRef().getLogger().log("ConfirmationButtonPanel.prototype.goToConfirmation end")};ConfirmationButtonPanel.prototype.goToConfirmationForMobileResponse=function(){this.getSlipRef().getLogger().log("ConfirmationButtonPanel.prototype.goToConfirmationForMobileResponse start");this.getSlipRef().activateView(SlipView.CONFIRMATION);this.getSlipRef().getPanelReference(SlipConstants.DISCLAIMER_PANEL).externalDataChanged();this.getSlipRef().getDisplay().refresh();this.getSlipRef().getLogger().log("ConfirmationButtonPanel.prototype.goToConfirmationForMobileResponse end")};function SubmitButtonPanel(){this._betOutcomes="";this._bets="";this._slipFailed=false;this._betSlipId=0;this._selectionsFailed=new Array();this._combosFailed=new Array();this._trixiesFailed=new Array();this._errorMessage="";this._allFailed=false;this._explanationTitle=false;this._needExplanation=false;this._numberOfLiveChecks=0;this._showLiveProgressBar=0;this._numberOfTimesClicked=0;this.liveResponcesCounter=0;this._liveBetInProgressForMobile=0}SubmitButtonPanel.prototype=new Panel();SubmitButtonPanel.prototype.getSlipFailed=function(){return this._slipFailed};SubmitButtonPanel.prototype.getSlipId=function(){return this._betSlipId};SubmitButtonPanel.prototype.getErrorMessage=function(){return this._errorMessage};SubmitButtonPanel.prototype.getAllFailed=function(){return this._allFailed};SubmitButtonPanel.prototype.getExplanationTitle=function(){return this._explanationTitle};SubmitButtonPanel.prototype.getNeedExplanation=function(){return this._needExplanation};SubmitButtonPanel.prototype.getSelectionsFailed=function(){return this._selectionsFailed};SubmitButtonPanel.prototype.getCombosFailed=function(){return this._combosFailed};SubmitButtonPanel.prototype.getTrixiesFailed=function(){return this._trixiesFailed};SubmitButtonPanel.prototype.mustShowLiveProgressBar=function(){return this._showLiveProgressBar};SubmitButtonPanel.prototype.setLiveChecks=function(a){this._numberOfLiveChecks=a};SubmitButtonPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();if(this.getSlipRef().getLiveMode()==0){a.submit=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).submit"}else{a.submit=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).submit"}a.liveBetInProgressForMobile=this._liveBetInProgressForMobile;return a};SubmitButtonPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.fetchExternalData start");this._bets=this.getSlipRef().getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).getBets();this._betOutcomes=this.getSlipRef().getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).getBetOutcomes();this._selections=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelections();this._combos=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).getComboTypes();this._trixies=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).getTrixies();this._multiWayCombinations=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).getMultiWayCombinations();this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.fetchExternalData end:"+compactJSON(this._selections))};SubmitButtonPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};SubmitButtonPanel.prototype.submit=function(){if(this.getSlipRef().getLiveMode()==1){return this.submitLiveBet()}else{return this.submitBet()}};SubmitButtonPanel.prototype.submitBet=function(){this._numberOfTimesClicked++;if(this._numberOfTimesClicked>1){alert('"'+this.getSlipRef().getTranslations()["PLEASE_BE_PATIENT"]+'"');return false}var a=this;if(this.getSlipRef().getMobileMode()==1){return"bets="+a._bets+"&outcomes="+a._betOutcomes}else{$.ajax({type:"POST",url:a.getSlipRef().getUrls()["placebet"],data:"bets="+a._bets+"&outcomes="+a._betOutcomes,success:function(b){a.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).response(b)},error:function(b){a.responseError(b)}})}};SubmitButtonPanel.prototype.submitLiveBet=function(){this._numberOfLiveChecks++;if(this._numberOfLiveChecks>1){alert('"'+this.getSlipRef().getTranslations()["PLEASE_BE_PATIENT"]+'"');return false}this.liveResponcesCounter++;var a=this;if(this.getSlipRef().getMobileMode()==1){return"bets="+a._bets+"&outcomes="+a._betOutcomes+"&accept_odds_changes="+a.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getAcceptOddsChanges()}else{$.ajax({type:"POST",url:a.getSlipRef().getUrls()["placeLiveBet"],data:"bets="+a._bets+"&outcomes="+a._betOutcomes+"&accept_odds_changes="+a.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getAcceptOddsChanges(),success:function(b){a.response(b)},error:function(b){a.responseError(b)}})}};SubmitButtonPanel.prototype.response=function(a){if(this.getSlipRef().getLiveMode()==1){this.liveBetResponse(a)}else{this.betResponse(a)}};SubmitButtonPanel.prototype.betResponse=function(a){if(a.search(/session_expired/g)>=0){window.location=this.getSlipRef().getUrls()["session-expired"];return}if(a.search(/login_required/g)>=0){window.location=this.getSlipRef().getUrls()["home"];return}if(a.search(/fraudkickout/g)>=0){window.location=this.getSlipRef().getUrls()["fraudkickout"];return}a=a.replace(/\s/g," ");this.processResponseResult(a)};SubmitButtonPanel.prototype.liveBetResponse=function(d){this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.liveBetResponse: start");if(d.search(/session_expired/g)>=0){window.location=this.getSlipRef().getUrls()["session-expired"];return}if(d.search(/login_required/g)>=0){window.location=this.getSlipRef().getUrls()["home"];return}if(d.search(/fraudkickout/g)>=0){window.location=this.getSlipRef().getUrls()["fraudkickout"];return}d=d.replace(/\s/g," ");var b=evalJSON(d);var c=b.slipId;this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.liveBetResponse: initialResult: "+b.initialResult);if(b.initialResult==true){if(b.fatal==true){this.processResponseResult(d)}else{if(this.getSlipRef().getMobileMode()!=1){this._betSlipId=c;this._showLiveProgressBar=1;this.getSlipRef().getPanelReference(SlipConstants.LIVE_PROGRESS_BAR_PANEL).externalDataChanged();window.setTimeout((function(){return liveSlip.getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).checkLiveResult()}),((this.getSlipRef().getConfigs()["LIVE_BETTING_DELAY"]*1000)+1000))}else{this._liveBetInProgressForMobile=1}return}}else{this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.liveBetResponse: betSlipStatus: "+b.betSlipStatus);if(this.getSlipRef().getMobileMode()!=1&&c!=this._betSlipId){this._numberOfLiveChecks=0;return}if(b.betSlipStatus==1){if(this.getSlipRef().getMobileMode()!=1){var e=b.startOfBettingTime+(this.getSlipRef().getConfigs()["LIVE_BETTING_EXPIRATION"]*1000);var a;if((b.lastRetryTime+(this.getSlipRef().getConfigs()["LIVE_BET_SHORT_CHECK_INTERVAL"]*1000))<(e+(this.getSlipRef().getConfigs()["LIVE_BET_SHORT_CHECK_INTERVAL"]*1000))){a=this.getSlipRef().getConfigs()["LIVE_BET_SHORT_CHECK_INTERVAL"]}else{a=this.getSlipRef().getConfigs()["LIVE_BET_LONG_CHECK_INTERVAL"]}window.setTimeout((function(){return liveSlip.getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).checkLiveResult()}),(a*1000))}else{this._liveBetInProgressForMobile=1}return}if(this.getSlipRef().getMobileMode()!=1){this.liveResponcesCounter--;if(this.liveResponcesCounter>=1){}else{this._showLiveProgressBar=0;this.getSlipRef().getPanelReference(SlipConstants.LIVE_PROGRESS_BAR_PANEL).externalDataChanged();this.processResponseResult(d)}}else{this.processResponseResult(d)}}this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.liveBetResponse: end")};SubmitButtonPanel.prototype.checkLiveResult=function(){var a=this;$.ajax({type:"POST",url:liveSlip.getUrls()["liveBetResult"],data:{},success:function(b){a.response(b)},error:function(b){a.responseError(b)}})};SubmitButtonPanel.prototype.responseError=function(a,d,b){if(a.status==503){var c=new Object();c.please_wait=true;this.processResponseResult(c);return}};SubmitButtonPanel.prototype.initMessages=function(){var a=this.getSlipRef().getTranslations();this.errorMessages=new Array(a.MSG_OK,a.MSG_CHANGED_ODD,a.MSG_CLOSED_OUTCOME,a.MSG_BALANCE,a.MSG_SYSTEM_ERROR,a.MSG_SYSTEM_ERROR,a.MSG_SYSTEM_ERROR,a.MSG_MAX_STAKE_LOWERED,a.MSG_ACCOUNT_LOCKED,a.MSG_SYSTEM_BUSY,a.MSG_BETS_IN_PROGRESS,a.MSG_LOW_STAKE,a.APACHE_TIMEOUT_SLIP_MSG,a.MSG_COMBO_NOT_ALLOWED,a.MSG_WRONG_CHANGE_ID,a.MSG_EXCEEDED_WEEKLY_LIMIT,a.MSG_BLOCKED_FOR_FR,a.MSG_CLOSED_OUTCOME,a.FREEBET_AMNT_FAILED)};SubmitButtonPanel.prototype.processResponseResult=function(g){this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.processResponseResult start");this.initMessages();var I;var e=this._selections;var G=this._combos;var t=this._trixies;var C=false;var s=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var n=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL);var H=this.getSlipRef().getPanelReference(SlipConstants.COMBO_REPORT_PANEL);var Q=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);var d=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_REPORT_PANEL);this._errorMessage="";if(this.getSlipRef().getLiveMode()==0){var N=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL);var E=this.getSlipRef().getPanelReference(SlipConstants.TEASER_CONFIRMATION_PANEL)}var i=this.getSlipRef().getGlobalBettingConstants();var j;var b;var B="";if(this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_IN_CLIENT){B=this.getSlipRef().getUrls()["betsHistoryInClient"]}else{B=this.getSlipRef().getUrls()["betsHistory"]}this._selectionsFailed=new Object();for(var L in e){this._selectionsFailed[L]=new PlaceBetResult();this._selectionsFailed[L].setFailed(false)}for(var L in G){if(typeof(G[L])!="undefined"){this._combosFailed[L]=new PlaceBetResult();this._combosFailed[L].setFailed(false)}}for(var L in t){this._trixiesFailed[L]=new PlaceBetResult();this._trixiesFailed[L].setFailed(false)}if(typeof(g.please_wait)!="undefined"){I=new Object();I.needExplanation=false;this._errorMessage=this.errorMessages[12].replace("{0}","<a href='"+B+"' ><font size=-2>"+this.getSlipRef().getTranslations()["HISTORY_SECURE"]+"</font></a>");I.allFailed=true}else{I=evalJSON(g)}this._needExplanation=I.needExplanation;b=I.slipId;var v;var K=new Array();var J=new Array();var r=new Array();var f=new Array();var a=true;for(var O in I.betInstructions){if(v=="undefined"){v=I.betInstructions[O].betSequenceNumber}b=I.betInstructions[O].slipId;var M=I.betInstructions[O].errorCode;if(M!=0){error=true;C=true;if(I.betInstructions[O].single==false&&I.betInstructions[O].teaser==false){if(I.betInstructions[O].betSystemType==null||I.betInstructions[O].betSystemType==""||I.betInstructions[O].betSystemType==i.BET_SYSTEM_TYPE_SYSTEM_COMBO){this._combosFailed[I.betInstructions[O].betSequenceNumber].setFailed(true)}else{if(I.betInstructions[O].betSystemType==i.BET_SYSTEM_TYPE_MULTIWAY_COMBO){this._multiWayCombinations[I.betInstructions[O].betSequenceNumber].setFailed(true)}else{if(I.betInstructions[O].betSystemType>=i.BET_SYSTEM_TYPE_TRIXIE_MIN_COMBO_INDEX&&I.betInstructions[O].betSystemType<=i.BET_SYSTEM_TYPE_TRIXIE_MAX_COMBO_INDEX){this._trixiesFailed[I.betInstructions[O].betSequenceNumber].setFailed(true)}else{if(I.betInstructions[O].hotComboId!=0){Q.getHotComboData().setHotComboFailed(true)}}}}}else{if(I.betInstructions[O].teaser==true){E.setBetFailed(true)}}if(I.betInstructions[O].dbErrorCode==SlipConstants.BLOCKED_COUNTRY_CODE){var D=I.betInstructions[O].message.substring(0,2);var F=(D==SlipConstants.FRANCE_COUNTRY_CODE_ID)?this.getSlipRef().getTranslations()["MSG_BAD_COUNTRY_FR"]:this.getSlipRef().getTranslations()["MSG_BAD_COUNTRY"];this._errorMessage+="<br>"+F}else{if(I.betInstructions[O].dbErrorCode==18){var w=parseFloat(I.betInstructions[O].message)*1;if(w>0){this._errorMessage+="<br>"+this.getSlipRef().getTranslations()["FREEBET_AMNT_CHANGED"]}else{this._errorMessage+="<br>"+this.errorMessages[I.betInstructions[O].dbErrorCode]}}else{if(typeof(g.please_wait)=="undefined"){this._errorMessage+="<br>"+this.errorMessages[I.betInstructions[O].dbErrorCode]}}}}switch(M){case 0:if(I.betInstructions[O].single==true){if(v!=I.betInstructions[O].betSequenceNumber){s.addDBReturnedSelectionMaxStake(I.betInstructions[O].betSequenceNumber,Math.round(I.betInstructions[O].maxStake))}if((typeof(r[I.betInstructions[O].betSequenceNumber])=="undefined"||!r[I.betInstructions[O].betSequenceNumber])&&typeof(K[I.betInstructions[O].betSequenceNumber])!="undefined"){J[I.betInstructions[O].betSequenceNumber]=K[I.betInstructions[O].betSequenceNumber];delete K[I.betInstructions[O].betSequenceNumber]}r[I.betInstructions[O].betSequenceNumber]=true}else{if(I.betInstructions[O].teaser==true){N.getTeaserBlockData().setMaxStake(Math.round(I.betInstructions[O].maxStake))}else{var P=I.betInstructions[O].betSystemType;if(P==null||P==""||P==i.BET_SYSTEM_TYPE_SYSTEM_COMBO){if(I.betInstructions[O].hotComboId!=0){Q.addDBReturnedHotComboMaxStake(I.betInstructions[O].hotComboId,I.betInstructions[O].maxStake);Q.getHotComboData().setHotComboFailed(false)}else{if(v!=I.betInstructions[O].betSequenceNumber){var h=G[I.betInstructions[O].betSequenceNumber];h.setMaxStake(Math.round(I.betInstructions[O].maxStake))}}}else{if(I.betInstructions[O].betSystemType==i.BET_SYSTEM_TYPE_MULTIWAY_COMBO){var R=this._multiWayCombinations[I.betInstructions[O].betSequenceNumber];R.setMaxStake(Math.round(I.betInstructions[O].maxStake))}else{if(I.betInstructions[O].betSystemType>=i.BET_SYSTEM_TYPE_TRIXIE_MIN_COMBO_INDEX&&I.betInstructions[O].betSystemType<=i.BET_SYSTEM_TYPE_TRIXIE_MAX_COMBO_INDEX){var q=t[I.betInstructions[O].betSequenceNumber];q.setMaxStake(Math.round(I.betInstructions[O].maxStake))}}}var z=s.getCheckedSelections();for(var A in z){if((typeof(r[A])=="undefined"||!r[A])&&typeof(K[A])!="undefined"){J[A]=K[A];delete K[A]}r[A]=true}}}if(this.getSlipRef().getFreeBetMode()==SlipConstants.FREE_BET_MODE_ON){this.getSlipRef().setExitFreeBetModeOnNextClick(true);if(typeof(hideFreeBetButton)=="function"){hideFreeBetButton()}}if(I.betInstructions[O].message==""){break}var m=I.betInstructions[O].message.split(";");for(var u in m){var x=m[u].split("^");var l=x[0].split("-");if(typeof(e[l[0]])!="undefined"){if(l[1]!=""){K[l[0]]=new n.OddUpdateObj(l[0],l[1]*1,l[2],l[3]*1);r[l[0]]=true}if(l[4]!=""){J[l[0]]=new n.OddUpdateObj(l[0],l[4]*1,l[5],l[6]*1)}}if(x.length>1){var y=x[1].split("-");if(typeof(e[l[0]])!="undefined"){if(y[1]!=""){K[l[0]]=new n.EWOddUpdateObj(l[0],y[1]*1);f[l[0]]=true}}}}break;case 1:if(a&&visitor.getLiveSlipAcceptOddsChanges()==0&&this.getSlipRef().getLiveMode()==1){this.getSlipRef().getEDS().addFailedEvent();a=false}var m=I.betInstructions[O].message.split(";");for(var u in m){var x=m[u].split("^");var l=x[0].split("-");if(typeof(e[l[0]])!="undefined"){if(l[7]=="T"){this._selectionsFailed[l[0]].setFailed(true)}if(l[2]=="HC"){J[l[0]]=new n.OddUpdateObj(l[0],l[1]*1,"",l[1]*1);J.HC=new n.HotComboOddUpdateObj(l[3],l[4])}else{if(typeof(r[l[0]])!="undefined"&&r[l[0]]){J[l[0]]=new n.OddUpdateObj(l[0],l[4]*1,l[5],l[6]*1)}else{K[l[0]]=new n.OddUpdateObj(l[0],l[4]*1,l[5],l[6]*1)}}}else{if(l[0]=="HC"){J.HC=new n.HotComboOddUpdateObj(l[1],l[2])}}if(x.length>1){var y=x[1].split("-");if(typeof(e[l[0]])!="undefined"){if(typeof(f[l[0]])!="undefined"&&f[l[0]]){K[l[0]]=new n.EWOddUpdateObj(l[0],y[1]*1)}}}}break;case 2:if(typeof(e[I.betInstructions[O].message])!="undefined"){this._selectionsFailed[I.betInstructions[O].message].setFailed(true)}break;case 3:visitor.setBalance(I.betInstructions[O].message*1);if(typeof(e[I.betInstructions[O].betSequenceNumber])!="undefined"){this._selectionsFailed[I.betInstructions[O].betSequenceNumber].setFailed(true)}break;case 7:if(I.betInstructions[O].single==true){if(typeof(e[I.betInstructions[O].betSequenceNumber])!="undefined"){this._selectionsFailed[I.betInstructions[O].betSequenceNumber].setFailed(true);s.addDBReturnedSelectionMaxStake(I.betInstructions[O].betSequenceNumber,I.betInstructions[O].maxStake)}}else{if(I.betInstructions[O].teaser==true){N.getTeaserBlockData().setMaxStake(I.betInstructions[O].maxStake)}else{if(I.betInstructions[O].betSystemType==null||I.betInstructions[O].betSystemType==""||I.betInstructions[O].betSystemType==i.BET_SYSTEM_TYPE_SYSTEM_COMBO){G[I.betInstructions[O].betSequenceNumber].setMaxStake(Math.round(I.betInstructions[O].maxStake))}else{if(I.betInstructions[O].betSystemType==i.BET_SYSTEM_TYPE_MULTIWAY_COMBO){this._multiWayCombinations[I.betInstructions[O].betSequenceNumber].setMaxStake(Math.round(I.betInstructions[O].maxStake))}else{if(I.betInstructions[O].betSystemType>=i.BET_SYSTEM_TYPE_TRIXIE_MIN_COMBO_INDEX&&I.betInstructions[O].betSystemType<=i.BET_SYSTEM_TYPE_TRIXIE_MAX_COMBO_INDEX){t[I.betInstructions[O].betSequenceNumber].setMaxStake(Math.round(I.betInstructions[O].maxStake))}else{if(I.betInstructions[O].hotComboId!=0){Q.addDBReturnedHotComboMaxStake(I.betInstructions[O].hotComboId,I.betInstructions[O].maxStake)}}}}}}break;case 8:visitor.setLockLevel(I.betInstructions[O].message*1);if(typeof(e[I.betInstructions[O].betSequenceNumber])!="undefined"){this._selectionsFailed[I.betInstructions[O].betSequenceNumber].setFailed(true)}break;case 14:j=evalJSON(I.betInstructions[O].message);if(typeof(e[j.outcomeId])!="undefined"){this._selectionsFailed[j.outcomeId].setFailed(true)}break;case 17:var o=I.betInstructions[O].message;if(typeof(e[o])!="undefined"){this._selectionsFailed[o].setFailed(true);J[o]=new n.OddUpdateObj(o,0.9,"N/A",0)}break;case 18:var w=parseFloat(I.betInstructions[O].message)*1;if(w>0){visitor.setFreeBetAmount(w)}break}v=I.betInstructions[O].betSequenceNumber}if(I.fatal){this._explanationTitle=true}if(I.allFailed==true){C=true;for(var S in e){if(e[S].getStake()!=0){this._selectionsFailed[S].setFailed(true)}}for(var c in G){if(typeof(G[c])!="undefined"){if(G[c].getStake()!=""){this._combosFailed[c].setFailed(true)}}}for(var c in this._multiWayCombinations){if(this._multiWayCombinations[c].getStake()!=0){this._multiWayCombinations[c].setFailed(true)}}for(var c in t){if(t[c].getStake()!=""){this._trixiesFailed[c].setFailed(true)}}if(this.getSlipRef().getLiveMode()==0){if(Q.isHotComboAvailable()){Q.getHotComboData().setHotComboFailed(true)}}}reloadAccount();if(this.getSlipRef().getMobileMode()!=1){document.body.style.cursor="auto"}n.setOddsUpdate(K);n.updateOdds();s.localDataChanged();this._slipFailed=C;this._betSlipId=b;this._allFailed=I.allFailed;n.setSelectionsFailed(this._selectionsFailed);H.setCombosFailed(this._combosFailed);d.setTrixiesFailed(this._trixiesFailed);n.setOddsUpdate(J);n.setChangeIdData(j);n.setSlipFailed(C);this.getSlipRef().activateView(SlipView.REPORT);this.getSlipRef().getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).externalDataChanged();this.getSlipRef().getDisplay().refresh();n.updateOdds();this._numberOfLiveChecks=0;this._numberOfTimesClicked=0;if(this.getSlipRef().getLiveMode()==0){E.setBetFailed(false)}if(this.getSlipRef().getMobileMode()!=1){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes();if(this.getSlipRef().getLiveMode()==0){this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserBlockData().setStake(0);this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserBlockData().setDisplayStake("");this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).setTeaserStakeJustCleared(true);if(this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()){this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).getHotComboData().setHotComboStake(0);this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).getHotComboData().setHotComboDisplayStake("")}}}this.getSlipRef().persist();this.getSlipRef().getLogger().log("SubmitButtonPanel.prototype.processResponseResult end")};function TotalSelectionPanel(){this._possiblePoints=0;this._possiblePayout=0;this._totalCost=0;this._betsPlaced=0;this._totalTax=0;this._showSlipGradBtm=false;this._hasCombos=false;this._acceptOddsChanges=visitor.getLiveSlipAcceptOddsChanges();this._collapsedOddsOptionsBlock=false;this._collapsedOddsOptionsMobileChecked=null;this._oddsOptionsCookieName="OddsOptionsCookie"}TotalSelectionPanel.prototype=new Panel();TotalSelectionPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};TotalSelectionPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};TotalSelectionPanel.prototype.getTotalCost=function(){return this._totalCost};TotalSelectionPanel.prototype.getTotalTax=function(){return this._totalTax};TotalSelectionPanel.prototype.getBetsPlaced=function(){return this._betsPlaced};TotalSelectionPanel.prototype.getSelectionsCount=function(){return this._selectionsCount};TotalSelectionPanel.prototype.isCombosPlaced=function(){return this._hasCombos};TotalSelectionPanel.prototype.getAcceptOddsChanges=function(){return this._acceptOddsChanges};TotalSelectionPanel.prototype.getCollapsedOddsOptionsBlock=function(){return this._collapsedOddsOptionsBlock};TotalSelectionPanel.prototype.setCollapsedOddsOptionsBlock=function(a){this._collapsedOddsOptionsBlock=a};TotalSelectionPanel.prototype.getOddsOptionsCookieName=function(){return this._oddsOptionsCookieName};TotalSelectionPanel.prototype.getDataModel=function(){this.readOddsOptionsCookieStatus();var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();if(this.getSlipRef().getLiveMode()==0){a.getLoyaltPointsHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getLoyaltPointsHelp"}else{a.getLoyaltPointsHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getLoyaltPointsHelp"}if(this.getSlipRef().getLiveMode()==0){a.getBetTaxHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getBetTaxHelp"}else{a.getBetTaxHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).getBetTaxHelp";a.switchLiveSlipOddsAutoUpdate=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).switchLiveSlipOddsAutoUpdate";a.updateLiveSlipAcceptOddsChanges=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).updateLiveSlipAcceptOddsChanges";a.collapseExpandOddsOptions=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).collapseExpandOddsOptions";a.collapsedOddsOptionsBlock=this._collapsedOddsOptionsBlock}a.numerBets=this._betsPlaced;a.totalPayout=this._possiblePayout;a.totalCost=this._totalCost;a.totalTax=this._totalTax;a.possiblePoints=this.getSlipRef().formatPoints(this._possiblePoints);a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());a.showSlipGradBtm=this._showSlipGradBtm;a.requestSkinId=this.getSlipRef().getRequestSkinId();a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;return a};TotalSelectionPanel.prototype.switchLiveSlipOddsAutoUpdate=function(b){var a;if(b){a=1}else{a=0}visitor.setLiveSlipOddsAutoUpdate(a);if(visitor.isLoggedIn()){$.ajax({type:"POST",url:this.getSlipRef().getUrls()["lbautooddupdate"],data:"lboup="+a})}else{$.cookie(this.getSlipRef().getGlobalBettingConstants()["LIVE_SLIP_ODDS_AUTO_UPDATE_COOKIE_NAME"],a,{expires:365*10,secure:true})}this.getDisplay().refresh();if(a==1){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).subscribeSelectionsForOddChangeNotifications()}else{this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).unsubscribeSelectionsForOddChangeNotifications()}};TotalSelectionPanel.prototype.updateLiveSlipAcceptOddsChanges=function(e,b,d){var c;var a=visitor.getLiveSlipAcceptOddsChanges();if(e=="checkbox"){if(b){if(a==0){c=2}}else{c=0}}else{if(e=="radio"){if(a==0){c=0}else{if(b){c=d}}}}visitor.setLiveSlipAcceptOddsChanges(c);this._acceptOddsChanges=c;if(this.getSlipRef().getMobileMode()!=1){if(visitor.isLoggedIn()){$.ajax({type:"POST",url:this.getSlipRef().getUrls()["lbacceptoddschanges"],data:"lbaoc="+c})}else{$.cookie(this.getSlipRef().getGlobalBettingConstants()["LIVE_SLIP_ACCEPT_ODDS_CHANGES_COOKIE_NAME"],c,{expires:365*10,secure:true})}this.getDisplay().refresh()}else{return this._acceptOddsChanges}};TotalSelectionPanel.prototype.fetchExternalData=function(){this._totalCost=0;this._betsPlaced=0;var e=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var d=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);var a=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);if(d.getTotalStake()>0||a.getTotalCost()>0||b.getTotalCost()>0){this._hasCombos=true}else{this._hasCombos=false}this._totalCost=e.getTotalCost()+d.getTotalStake()+a.getTotalCost()+b.getTotalCost();this._betsPlaced=e.getTotalBets()+d.getTotalNumBets()+a.getTotalBets()+b.getTotalNumBets();this._possiblePoints=e.getPossiblePoints()+d.getTotalPoints()+a.getPossiblePoints()+b.getPossiblePoints();this._possiblePayout=e.getPossiblePayout()+d.getPossiblePayout()+a.getPossiblePayout()+b.getPossiblePayout();this._showSlipGradBtm=(e.getSelectionsCount()>1&&!d.getShowErrorMsg())||e.getSelectionsValidationsResult().isMultiWayPossible();this._totalTax=e.getTotalTax()+d.getTotalTax()+a.getTotalTax()+b.getTotalTax();if(this.getSlipRef().getLiveMode()==0){var f=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);var c=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserBlockData();if(f.getTotalCost()>0){this._hasCombos=true}this._totalCost+=c.getTotalCost()+f.getTotalCost();this._betsPlaced+=c.getTotalBets()+f.getTotalNumBets();this._possiblePoints+=c.getLoyaltyPoints()+f.getPossiblePoints();this._possiblePayout+=c.getPossiblePayout()+f.getPossiblePayout();this._totalTax+=c.getTotalTax()}if(isNaN(this._totalCost)){this._totalCost=0}if(isNaN(this._betsPlaced)){this._betsPlaced=0}};TotalSelectionPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};TotalSelectionPanel.prototype.getLoyaltPointsHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["LOYALTY_POINTS_TITLE"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["LOYALTY_POINTS_MSG"]+"</td></tr></table>")};TotalSelectionPanel.prototype.getBetTaxHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["BET_SLIP_TAX_TITLE"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["BET_SLIP_TAX_DETAILS"]+"</td></tr></table>")};TotalSelectionPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_betsPlaced","_possiblePayout","_totalCost","_possiblePoints","_showSlipGradBtm","_hasCombos","_totalTax"])};TotalSelectionPanel.prototype.collapseExpandOddsOptions=function(){var c="oddsOptionsHeaderImageExpanded";var a=$("#oddsOptions");if(this._collapsedOddsOptionsBlock){this._collapsedOddsOptionsBlock=b()}else{this._collapsedOddsOptionsBlock=d()}this.setOddsOptionsCookieStatus();function d(){$(".oddsOptionsHeaderImage").removeClass(c);a.slideUp("fast");return true}function b(){$(".oddsOptionsHeaderImage").addClass(c);a.slideDown("fast");return false}};TotalSelectionPanel.prototype.setOddsOptionsCookieStatus=function(){var b=new Date(2018,12,31);var a=b.toGMTString();document.cookie=this._oddsOptionsCookieName+"="+this._collapsedOddsOptionsBlock+"; expires="+a+"; path=/"};TotalSelectionPanel.prototype.readOddsOptionsCookieStatus=function(){if(this.getSlipRef().getMobileMode()!=1){this._collapsedOddsOptionsBlock=false;var d=this._oddsOptionsCookieName+"=";var a=document.cookie.split(";");for(var b=0;b<a.length;b++){var f=a[b];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(d)==0){var e=f.substring(d.length,f.length);this._collapsedOddsOptionsBlock=e=="true"}}}else{if(globalRhinoCollapseExpandOddsOptions==null||globalRhinoCollapseExpandOddsOptions=="undefined"){this._collapsedOddsOptionsBlock=false}else{this._collapsedOddsOptionsBlock=globalRhinoCollapseExpandOddsOptions}}};function TotalConfirmationPanel(){this._possiblePoints;this._possiblePayout=0;this._totalCost=0;this._betsPlaced=0;this._totalCombinationsCost=0;this._showSlipGradBtm=false;this._totalTax=0;this._isEDSVisible=false}TotalConfirmationPanel.prototype=new Panel();TotalConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.freeBetMode=this.getSlipRef().getFreeBetMode();if(this.getSlipRef().getLiveMode()==0){a.getLoyaltPointsHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).getLoyaltPointsHelp"}else{a.getLoyaltPointsHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).getLoyaltPointsHelp"}if(this.getSlipRef().getLiveMode()==0){a.getBetTaxHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).getBetTaxHelp"}else{a.getBetTaxHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).getBetTaxHelp"}a.returnToSlipWithUpdatedOddOption=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).returnToSlipWithUpdatedOddOption";a.hideEDSMessage=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).hideEDSMessage";a.isEDSVisible=this._isEDSVisible;a.numerBets=this._betsPlaced;a.totalPayout=this._possiblePayout;a.totalCost=this._totalCost;a.possiblePoints=this.getSlipRef().formatPoints(this._possiblePoints);a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());a.showSlipGradBtm=this._showSlipGradBtm;a.totalTax=this._totalTax;a.requestSkinId=this.getSlipRef().getRequestSkinId();a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;return a};TotalConfirmationPanel.prototype.fetchExternalData=function(){var i=this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL);var k=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var d=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);var l=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);var e=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL);var o=this.getSlipRef().getPanelReference(SlipConstants.COMBO_REPORT_PANEL);var q=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_REPORT_PANEL);var c=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_REPORT_PANEL);if(this.getSlipRef().getActiveView()!=SlipView.REPORT){this._totalCost=i.getTotalCost();this._betsPlaced=i.getBetsPlaced();this._possiblePoints=i.getPossiblePoints();this._possiblePayout=i.getPossiblePayout();this._totalTax=i.getTotalTax();this._totalCombinationsCost=d.getTotalStake()+l.getTotalCost()+b.getTotalCost();if(this.getSlipRef().getLiveMode()==0){var f=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);this._totalCombinationsCost+=f.getTotalCost()}this._isEDSVisible=false}else{this._totalCost=0;this._totalCost=e.getTotalCost()+o.getTotalCost()+c.getTotalCost()+q.getTotalCost();this._totalTax=0;this._totalTax=e.getTotalTax()+o.getTotalTax()+c.getTotalTax()+q.getTotalTax();this._betsPlaced=e.getBetsPlaced()+o.getBetsPlaced()+c.getBetsPlaced()+q.getBetsPlaced();this._possiblePoints=e.getPossiblePoints()+o.getPossiblePoints()+c.getPossiblePoints()+q.getPossiblePoints();this._possiblePayout=e.getPossiblePayout()+o.getPossiblePayout()+c.getPossiblePayout()+q.getPossiblePayout();if(this.getSlipRef().getLiveMode()==0){var f=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);var n=this.getSlipRef().getPanelReference(SlipConstants.TEASER_CONFIRMATION_PANEL);var m=0;var h=0;var j=0;var g=0;if(f.isHotComboAvailable()){var a=f.getHotComboData();if(a.isHotComboFailed()==false){m=a.getHotComboStake();if(m){h=1}j=a.getPoints();g=a.getPayout()}}this._totalCost=this._totalCost+n.getTotalCost()+m;this._betsPlaced=this._betsPlaced+n.getBetsPlaced()+h;this._possiblePoints=this._possiblePoints+n.getPossiblePoints()+j;this._possiblePayout=this._possiblePayout+n.getPossiblePayout()+g;this._totalTax=this._totalTax+n.getTotalTax()}}};TotalConfirmationPanel.prototype.localDataChanged=function(){if(this._totalCombinationsCost>0){this._showSlipGradBtm=true}else{this._showSlipGradBtm=false}this.getDisplay().refresh()};TotalConfirmationPanel.prototype.getLoyaltPointsHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["LOYALTY_POINTS_TITLE"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["LOYALTY_POINTS_MSG"]+"</td></tr></table>")};TotalConfirmationPanel.prototype.getBetTaxHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["BET_SLIP_TAX_TITLE"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["BET_SLIP_TAX_DETAILS"]+"</td></tr></table>")};TotalConfirmationPanel.prototype.returnToSlipWithUpdatedOddOption=function(){this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).updateLiveSlipAcceptOddsChanges("checkbox",true);this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).setCollapsedOddsOptionsBlock(false);this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).setOddsOptionsCookieStatus();this.getSlipRef().getPanelReference(SlipConstants.REPLY_MESSAGE_PANEL).returnToSlip()};TotalConfirmationPanel.prototype.hideEDSMessage=function(){this.updateEDSVisibility(false);this.localDataChanged()};TotalConfirmationPanel.prototype.updateEDSVisibility=function(a){this._isEDSVisible=a};function AlertPanel(){this._errorMessage="";this._externalErrorMessage=""}AlertPanel.prototype=new Panel();AlertPanel.prototype.fetchExternalData=function(){if(this._externalErrorMessage!=""){this._errorMessage=this._externalErrorMessage;this._externalErrorMessage=""}else{this._errorMessage=this.getSlipRef().getPanelReference(SlipConstants.CONFIRMATION_BUTTON_PANEL).getErrorMessage()}};AlertPanel.prototype.setExternalErrorMessage=function(a){this._externalErrorMessage=a};AlertPanel.prototype.localDataChanged=function(){if(this._errorMessage!=""){this.getDisplay().setVisible(true);setTimeout(this._hideAlertPanel,SlipConstants.ALERT_MESSAGE_DELAY)}else{this.getDisplay().setVisible(false)}this.getSlipRef().getDisplay().refresh()};AlertPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;a.notLoggedIn=SlipConstants.ALERT_NOT_LOGGED;a.notEnoughBalance=SlipConstants.ALERT_NOT_ENOUGH_BALANCE;a.errorMessage=this._errorMessage;a.requestSkinId=this.getSlipRef().getRequestSkinId();return a};AlertPanel.prototype._hideAlertPanel=function(){if(betSlip&&betSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().isVisible()){betSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().hide();betSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().refresh()}else{if(liveSlip&&liveSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().isVisible()){liveSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().hide();liveSlip.getPanelReference(SlipConstants.ALERT_PANEL).getDisplay().refresh()}}};AlertPanel.prototype._showAlertPanelIfRequired=function(){if(!visitor.isLoggedIn()){this._errorMessage=SlipConstants.ALERT_NOT_LOGGED;this.localDataChanged();return 1}try{var b=blackjackMinStake[visitor.getCurrency()]+0}catch(a){var b=0.1}if(to_mn(visitor.getBalance())*1<b){this._errorMessage=SlipConstants.ALERT_NOT_ENOUGH_BALANCE;this.localDataChanged();return 1}return 0};function FlashAlertPanel(){}FlashAlertPanel.prototype=new Panel();FlashAlertPanel.prototype.localDataChanged=function(){if(!this.getSlipRef().isFlashAvailable()||!this.getSlipRef().isFlashVersionSupported()||!this.getSlipRef().hasEnoughFlashCache()){this.getDisplay().setVisible(true)}else{this.getDisplay().setVisible(false)}this.getSlipRef().getDisplay().refresh()};FlashAlertPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;a.isFlashAvailable=this.getSlipRef().isFlashAvailable();a.isFlashVersionSupported=this.getSlipRef().isFlashVersionSupported();a.hasEnoughFlashCache=this.getSlipRef().hasEnoughFlashCache();a.requestSkinId=this.getSlipRef().getRequestSkinId();a.windowType=this.getSlipRef().getWindowType();return a};function ReplyMessagePanel(){this._slipFailed;this._slipId;this._errorMessage="";this._allFailed=false;this._needExplanation=false;this._explanationTitle=false;this._hotComboAvailable=false}ReplyMessagePanel.prototype=new Panel();ReplyMessagePanel.prototype.fetchExternalData=function(){this._slipFailed=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getSlipFailed();this._slipId=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getSlipId();this._errorMessage=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getErrorMessage();this._needExplanation=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getNeedExplanation();this._allFailed=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getAllFailed();this._explanationTitle=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getExplanationTitle();if(this.getSlipRef().getLiveMode()==0){this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()}else{this._hotComboAvailable=false}};ReplyMessagePanel.prototype.localDataChanged=function(){this.initMessages()};ReplyMessagePanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;a.slipFailed=this._slipFailed;a.slipId=this._slipId;a.needExplanation=this._needExplanation;a.showExplanation=this._explanationTitle;a.errorMessage=this._errorMessage;a.allFailed=this._allFailed;a.hotComboAvailable=this._hotComboAvailable;var b=(this.getSlipRef().getLiveMode()==0)?SlipConstants.GLOBAL_BET_SLIP:SlipConstants.GLOBAL_LIVE_SLIP;a.removeAllSelections=b+".getPanelReference(SlipConstants.REPLY_MESSAGE_PANEL).removeAllSelections";a.returnToSlip=b+".getPanelReference(SlipConstants.REPLY_MESSAGE_PANEL).returnToSlip";a.convertHotComboToNormalCombo=b+".getPanelReference(SlipConstants.HOT_COMBO_REPORT_PANEL).convertHotComboToNormalCombo()";a.notifyUserActivity=b+".notifyUserActivity";return a};ReplyMessagePanel.prototype.removeAllSelections=function(){if(this.getSlipRef().getExitFreeBetModeOnNextClick()){this.getSlipRef().setExitFreeBetModeOnNextClick(false);this.getSlipRef().exitFreeBetMode()}this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL).setChangeIdData(null);this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).removeAllSelections();this.localDataChanged()};ReplyMessagePanel.prototype.returnToSlip=function(){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL).updateChangeId();if(this.getSlipRef().getLiveMode()==1){this.getSlipRef().getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).updateEDSVisibility(false)}if(this.getSlipRef().getExitFreeBetModeOnNextClick()){this.getSlipRef().setExitFreeBetModeOnNextClick(false);this.getSlipRef().exitFreeBetMode();this.getSlipRef().activateView(SlipView.INITIAL)}else{this.getSlipRef().activateView(SlipView.SELECTION)}this.getSlipRef().getDisplay().refresh()};ReplyMessagePanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};function HeaderReportPanel(){}HeaderReportPanel.prototype=new Panel();HeaderReportPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();return a};function SlipEvent(){}SlipEvent.prototype.setId=function(a){this._id=a};SlipEvent.prototype.getId=function(){return this._id};SlipEvent.prototype.setChangeId=function(a){this._changeId=a};SlipEvent.prototype.getChangeId=function(){return this._changeId};SlipEvent.prototype.setName=function(a){this._name=a};SlipEvent.prototype.getName=function(){return this._name};SlipEvent.prototype.setType=function(a){this._type=a};SlipEvent.prototype.getType=function(){return this._type};SlipEvent.prototype.setCloseTime=function(a){this._closeTime=a};SlipEvent.prototype.getCloseTime=function(){return this._closeTime};SlipEvent.prototype.setCatalogIds=function(a){this._catalogIds=a};SlipEvent.prototype.getCatalogIds=function(){return this._catalogIds};SlipEvent.prototype.setMotherEventId=function(a){this._motherEventId=a};SlipEvent.prototype.getMotherEventId=function(){return this._motherEventId};SlipEvent.prototype.setComboFactor=function(a){this._comboFactor=a};SlipEvent.prototype.getComboFactor=function(){return this._comboFactor};SlipEvent.prototype.setBankersOk=function(a){this._bankersOk=a};SlipEvent.prototype.isBankersOk=function(){return this._bankersOk};SlipEvent.prototype.setLeagueDiscountFactor=function(a){this._leagueDiscountFactor=a};SlipEvent.prototype.getLeagueDiscountFactor=function(){return this._leagueDiscountFactor};SlipEvent.prototype.setSportId=function(a){this._sportId=a};SlipEvent.prototype.getSportId=function(){return this._sportId};SlipEvent.prototype.setTeaserLeagueDiscountFactor=function(a){this._teaserLeagueDiscountFactor=a};SlipEvent.prototype.getTeaserLeagueDiscountFactor=function(){return this._teaserLeagueDiscountFactor};SlipEvent.prototype.setSameTeamComboPossible=function(a){this._sameTeamComboPossible=a};SlipEvent.prototype.isSameTeamComboPossible=function(){return this._sameTeamComboPossible};SlipEvent.prototype.setSameFamilyComboPossible=function(a){this._sameFamilyComboPossible=a};SlipEvent.prototype.isSameFamilyComboPossible=function(){return this._sameFamilyComboPossible};SlipEvent.prototype.setTrnChangeId=function(a){this._trnChangeId=a};SlipEvent.prototype.getTrnChangeId=function(){return this._trnChangeId};function EventFactory(){}EventFactory.prototype.createLiveEvent=function(f,d,b,a,c){var e=new SlipEvent();e.setId(f);e.setType(d);e.setMotherEventId(b);e.setSportId(a);e.setTeaserLeagueDiscountFactor(c);return e};EventFactory.prototype.createEvent=function(c,d,b,m,l,h,g,n,k,i,o,j,f,e){var a=new SlipEvent();a.setId(c);a.setChangeId(d);a.setName(b);a.setType(m);a.setCloseTime(l);a.setCatalogIds(h);a.setComboFactor(g);a.setBankersOk(n);a.setMotherEventId(k);a.setLeagueDiscountFactor(i);a.setSportId(o);a.setTeaserLeagueDiscountFactor(j);a.setSameTeamComboPossible(f);a.setSameFamilyComboPossible(e);return a};EventFactory.prototype.createHotComboEvent=function(e,b,d,a){var c=new SlipEvent();c.setId(e);c.setChangeId(SlipConstants.NO_CHANGE_ID);c.setName(b);c.setCloseTime(d);c.setCatalogIds("");c.setComboFactor(0);c.setBankersOk(false);c.setLeagueDiscountFactor(1);c.setSportId(a);c.setTeaserLeagueDiscountFactor(1);c.setSameTeamComboPossible(true);c.setSameFamilyComboPossible(true);return c};function HintPanel(){this._selectionsCount=0;this._checkedSelectionsCount=0;this._showErrorMsg=false;this._errorMsg="";this._showHintPanel=false}HintPanel.prototype=new Panel();HintPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.checkedSelection=this._checkedSelection;a.checkedSelectionsText=this.getSlipRef().getTranslations()["COMBO_SELECTIONS_IN_BET_SLIP"].replace(/[$]Number/,this._checkedSelectionsCount);a.showErrorMsg=this._showErrorMsg;a.errorMsg=this._errorMsg;a.showHintPanel=this._showHintPanel;a.freeBetMode=this.getSlipRef().getFreeBetMode();return a};HintPanel.prototype.fetchExternalData=function(){var b=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._selectionsCount=b.getSelectionsCount();this._checkedSelectionsCount=b.getCheckedSelectionsCounter();var a=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);selectionsValidationsResult=b.getSelectionsValidationsResult();if(selectionsValidationsResult!=null&&!selectionsValidationsResult.isMultiWayPossible()){this._showErrorMsg=a.getShowErrorMsg();this._errorMsg=a.getErrorMsg()}else{this._showErrorMsg=false;this._errorMsg=""}};HintPanel.prototype.localDataChanged=function(){this._showHintPanel=(this._selectionsCount>0)?true:false;this._checkSlipHint(this._showHintPanel);this.getDisplay().refresh()};HintPanel.prototype._checkSlipHint=function(a){if(this.getSlipRef().getMobileMode()!=1){if(a){var d=document.documentElement.scrollTop||document.body.scrollTop;var b=document.getElementById("visibilityAnchor");if(b){var c=document.getElementById("hintPanelContainer");var e=get_coordinates(b);if(e.y-d<0){if(!this.getDisplay().isVisible()){this.getDisplay().show()}var f=document.documentElement.clientHeight||document.body.clientHeight;c.style.top=d+f-c.offsetHeight+"px"}else{if(this.getDisplay().isVisible()){this.getDisplay().hide()}}}}else{this.getDisplay().hide()}}};function EDS(a){this._triggerAction=a;this._MAX_FAILED_ATTEMPTS=3;this._MAX_TIME_DIFFERENCE=60*60*1000;this._CLEAR_FAILED_ATTEMPTS=false;var b=this._readCookie();if(b==null){this._failedAttempts=new Array()}else{this._failedAttempts=$.evalJSON(b)}}EDS.prototype=new Object();EDS.prototype._readCookie=function(){var d="failedAtteptsCookie=";var a=document.cookie.split(";");for(var b=0;b<a.length;b++){var e=a[b];while(e.charAt(0)==" "){e=e.substring(1,e.length)}if(e.indexOf(d)==0){return e.substring(d.length,e.length)}}return null};EDS.prototype.addFailedEvent=function(){var a=new Date().getTime();this._failedAttempts.push(a);this._updateFailedAttempts(a)};EDS.prototype._updateFailedAttempts=function(lastFailedTime){var counter=0;var toShift=false;var timeDifference=0;for(var i=0;i<this._failedAttempts.length;i++){timeDifference=lastFailedTime-this._failedAttempts[i];if(timeDifference>this._MAX_TIME_DIFFERENCE){toShift=true;continue}counter++}if(counter>=this._MAX_FAILED_ATTEMPTS){eval(this._triggerAction);this._failedAttempts=new Array()}else{if(toShift){this._failedAttempts.shift()}}this._updateCookie()};EDS.prototype._updateCookie=function(){var b=$.compactJSON(this._failedAttempts);var a="failedAtteptsCookie="+b+"; expires="+0+"; path=/";document.cookie=a};function Display(){}Display.prototype=new GenericDisplay();Display.prototype.refresh=function(){var a=this.getDomContainerSelector();var b=this.getDomAnchorSelector();var g=this.getOwnerRef().getSlipRef().getActiveView();if(this.isVisible()&&jQuery.inArray(g,this.getOwnerRef().getViewAssignments())!=-1){var d=this.getOwnerRef().getDataModel();var e=this.getTemplateFunction();var f=e(d);if($(b).html()==null){var c=this._getInsertAfterSelectorByTabOrder(this.getOwnerRef());if(c==null){$(a).prepend(f)}else{$(c).after(f)}}else{$(b).replaceWith(f)}}else{if($(b).html()!=null){$(b).remove()}else{}}this.refreshDependents()};Display.prototype._getInsertAfterSelectorByTabOrder=function(f){var c=f.getTabOrder();var e=f.getDisplay().getDomContainerSelector();var b=this.getOwnerRef().getSlipRef()._allPanelsByDomContainer[e];var d=null;if(b==null){return d}var a=$(e).children();$(a).each(function(g){var h=this.id;var j=null;for(p in b){if(b[p].getDisplay().getDomAnchorId()==h){j=b[p]}}if(j==null){return}if(f.getTabOrder()>j.getTabOrder()){d=j.getDisplay().getDomAnchorSelector()}});return d};function SlipDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #slipAnchor");this.setDomAnchorId("slipAnchor");this.setTemplateFunction(betslipTemplate.slip)}SlipDisplay.prototype=new Display();SlipDisplay.prototype.refreshDependents=function(){var b=this.getOwnerRef().getAllPanels();for(var a in b){b[a].getDisplay().refresh()}};function EmptyHeaderPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #headerPanelAnchor");this.setDomAnchorId("headerPanelAnchor");this.setTemplateFunction(betslipTemplate.slipHeaderEmpty)}EmptyHeaderPanelDisplay.prototype=new Display();function LiveProgressBarPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #liveProgressBarPanelAnchor");this.setDomAnchorId("liveProgressBarPanelAnchor");this.setTemplateFunction(betslipTemplate.liveProgressBarPanel)}LiveProgressBarPanelDisplay.prototype=new Display();function EmptySelectionPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #emptySelectionPanelAnchor");this.setDomAnchorId("emptySelectionPanelAnchor");this.setTemplateFunction(betslipTemplate.slipSelectionEmpty)}EmptySelectionPanelDisplay.prototype=new Display();function EmptyTotalPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #emptyTotalPanelAnchor");this.setDomAnchorId("emptyTotalPanelAnchor");this.setTemplateFunction(betslipTemplate.slipTotalEmpty)}EmptyTotalPanelDisplay.prototype=new Display();function HeaderSelectionPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #headerSelectionPanelAnchor");this.setDomAnchorId("headerSelectionPanelAnchor");this.setTemplateFunction(betslipTemplate.slipHeaderSelection)}HeaderSelectionPanelDisplay.prototype=new Display();function HeaderConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #headerConfirmationPanelAnchor");this.setDomAnchorId("headerConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.headerConfirmation)}HeaderConfirmationPanelDisplay.prototype=new Display();function DisclaimerPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #disclaimerPanelAnchor");this.setDomAnchorId("disclaimerPanelAnchor");this.setTemplateFunction(betslipTemplate.slipDisclaimerPanel)}DisclaimerPanelDisplay.prototype=new Display();function ConfirmationButtonPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #confirmationButtonAnchor");this.setDomAnchorId("confirmationButtonAnchor");this.setTemplateFunction(betslipTemplate.slipConfirmButton)}ConfirmationButtonPanelDisplay.prototype=new Display();function SubmitButtonPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #submitButtonAnchor");this.setDomAnchorId("submitButtonAnchor");this.setTemplateFunction(betslipTemplate.slipSubmitButton)}SubmitButtonPanelDisplay.prototype=new Display();function TotalSelectionPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #selectionTotalPanelAnchor");this.setDomAnchorId("selectionTotalPanelAnchor");this.setTemplateFunction(betslipTemplate.slipTotalSelection)}TotalSelectionPanelDisplay.prototype=new Display();function TotalConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #confirmationTotalPanelAnchor");this.setDomAnchorId("confirmationTotalPanelAnchor");this.setTemplateFunction(betslipTemplate.slipTotalConfirmation)}TotalConfirmationPanelDisplay.prototype=new Display();function AlertPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #alertPanelAnchor");this.setDomAnchorId("alertPanelAnchor");this.setTemplateFunction(betslipTemplate.errorMessages)}AlertPanelDisplay.prototype=new Display();function FlashAlertPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #flashAlertPanelAnchor");this.setDomAnchorId("flashAlertPanelAnchor");this.setTemplateFunction(betslipTemplate.flashAlert)}FlashAlertPanelDisplay.prototype=new Display();function ReplyMessagePanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #replyMessageAnchor");this.setDomAnchorId("replyMessageAnchor");this.setTemplateFunction(betslipTemplate.slipReplyMessage)}ReplyMessagePanelDisplay.prototype=new Display();function HeaderReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #headerReportPanelAnchor");this.setDomAnchorId("headerReportPanelAnchor");this.setTemplateFunction(betslipTemplate.headerReport)}HeaderReportPanelDisplay.prototype=new Display();function HintPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #hintPanelAnchor");this.setDomAnchorId("hintPanelAnchor");this.setTemplateFunction(betslipTemplate.slipHint)}HintPanelDisplay.prototype=new Display();function MultiWayPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #multiWayPanelAnchor");this.setDomAnchorId("multiWayPanelAnchor");this.setTemplateFunction(betslipTemplate.multiWay)}MultiWayPanelDisplay.prototype=new Display();function MultiWayConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #multiWayConfirmationPanelAnchor");this.setDomAnchorId("multiWayConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.multiWayConfirmation)}MultiWayConfirmationPanelDisplay.prototype=new Display();function MultiWayReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #multiWayReportPanelAnchor");this.setDomAnchorId("multiWayReportPanelAnchor");this.setTemplateFunction(betslipTemplate.multiWayReport)}MultiWayReportPanelDisplay.prototype=new Display();function SelectionPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #selectionPanelAnchor");this.setDomAnchorId("selectionPanelAnchor");this.setTemplateFunction(betslipTemplate.slipSelectionFirstStep)}SelectionPanelDisplay.prototype=new Display();function SelectionConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #selectionConfirmationPanelAnchor");this.setDomAnchorId("selectionConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.selectionConfirmation)}SelectionConfirmationPanelDisplay.prototype=new Display();function SelectionReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #selectionReportPanelAnchor");this.setDomAnchorId("selectionReportPanelAnchor");this.setTemplateFunction(betslipTemplate.selectionReport)}SelectionReportPanelDisplay.prototype=new Display();function TeaserPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #teaserPanelAnchor");this.setDomAnchorId("teaserPanelAnchor");this.setTemplateFunction(betslipTemplate.teaser)}TeaserPanelDisplay.prototype=new Display();function TeaserConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #teaserConfirmationPanelAnchor");this.setDomAnchorId("teaserConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.teaserConfirmation)}TeaserConfirmationPanelDisplay.prototype=new Display();function TrixiePanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #trixiePanelAnchor");this.setDomAnchorId("trixiePanelAnchor");this.setTemplateFunction(betslipTemplate.slipTrixie)}TrixiePanelDisplay.prototype=new Display();function TrixieConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #trixieConfirmationPanelAnchor");this.setDomAnchorId("trixieConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.slipTrixieConfirmation)}TrixieConfirmationPanelDisplay.prototype=new Display();function TrixieReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #trixieReportAnchor");this.setDomAnchorId("trixieReportAnchor");this.setTemplateFunction(betslipTemplate.slipTrixieReport)}TrixieReportPanelDisplay.prototype=new Display();function FlashHelper(a){this._windowType=a;this._slipFlashConfigurationShownOnce=false}FlashHelper.prototype.showSlipFlashConfigurationAlerts=function(){if(!this._slipFlashConfigurationShownOnce){var slipFlashDiv=document.getElementById("slipFlashMovieDiv");slipFlashDiv.style.width="214px";slipFlashDiv.style.height="140px";slipFlashDiv.style.top="50%";this._slipFlashConfigurationShownOnce=true}else{var betSlipRef=eval(SlipConstants.GLOBAL_BET_SLIP);var liveBetSlipRef=eval(SlipConstants.GLOBAL_LIVE_SLIP);if(typeof(betSlipRef)!="undefined"){betSlipRef.setEnoughFlashCache(false);betSlipRef.getPanelReference(SlipConstants.FLASH_ALERT_PANEL).externalDataChanged()}if(typeof(liveBetSlipRef)!="undefined"){liveBetSlipRef.setEnoughFlashCache(false);liveBetSlipRef.getPanelReference(SlipConstants.FLASH_ALERT_PANEL).externalDataChanged()}}window.scroll(0,0)};FlashHelper.prototype.hideSlipFlashConfigurationAlerts=function(){var slipFlashDiv=document.getElementById("slipFlashMovieDiv");slipFlashDiv.style.width="1px";slipFlashDiv.style.height="1px";slipFlashDiv.style.top="-45%";var betSlipRef=eval(SlipConstants.GLOBAL_BET_SLIP);var liveBetSlipRef=eval(SlipConstants.GLOBAL_LIVE_SLIP);if(typeof(betSlipRef)!="undefined"){betSlipRef.setEnoughFlashCache(true);betSlipRef.getSlipRef().persist();betSlipRef.getPanelReference(SlipConstants.FLASH_ALERT_PANEL).externalDataChanged()}if(typeof(liveBetSlipRef)!="undefined"){liveBetSlipRef.setEnoughFlashCache(true);liveBetSlipRef.getSlipRef().persist();liveBetSlipRef.getPanelReference(SlipConstants.FLASH_ALERT_PANEL).externalDataChanged()}};FlashHelper.prototype.getFlashMovie=function(){var b=navigator.appName.indexOf("Microsoft")!=-1;var a=(b)?window[SlipConstants.SLIP_FLASH_MOVIE_NAME]:document[SlipConstants.SLIP_FLASH_MOVIE_NAME];return a};FlashHelper.prototype.createSlipFlash=function(b,a,f,e){var g="pAfterLoadCommand=invokeSlipFromFlash()";g+="&windowType="+this._windowType;g+="&clickFinishMsg="+a.SLIP_FLASH_CLICK_FINISH;g+="&finish="+a.FINISH;g+="&pShowSlipFlashConfigurationAlerts="+b+".showSlipFlashConfigurationAlerts()";g+="&pHideSlipFlashConfigurationAlerts="+b+".hideSlipFlashConfigurationAlerts()";g=encodeURI(g);var c='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="214" height="140" id="slip_flash_movie">';c+='<param name="allowScriptAccess" value="sameDomain" />';c+='<param name="movie" value="'+f.slip_flash_movie+'" />';c+='<param name="quality" value="high" />';c+='<param name="bgcolor" value="#ffffff" />';c+='<param name="FlashVars" value="'+g+'" />';c+='<embed src="'+f.slip_flash_movie+'" quality="high" bgcolor="#ffffff" width="214" height="140" id="slip_flash_movie" name="slip_flash_movie" allowScriptAccess="sameDomain" FlashVars="'+g+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';c+="</object>";var d=document.getElementById("slipFlashMovieDiv");d.innerHTML=c};FlashHelper.prototype.setSlipFlashConfigurationShownOnce=function(a){this._slipFlashConfigurationShownOnce=a};FlashHelper.prototype.setWindowType=function(a){this._windowType=a};FlashHelper.prototype.getWindowType=function(){return this._windowType};SlipFactory.prototype.createBetSlip=function(f,j,k,o,q,h,l,r,n,c,i,g,d,e,m,b){var a=this._createSlipInstance(SlipConstants.LIVE_MODE_OFF,SlipConstants.BET_SLIP_PERSISTENCE_KEY,SlipConstants.BET_SESSION_HELPER_COOKIE_NAME,f,j,k,o,n,c,i,g,d,e,m,b);this.createEmptyHeaderPanel(SlipConstants.INITIAL_HEADER_PANEL,a,1,true);this.createEmptySelectionPanel(SlipConstants.INITIAL_SELECTION_PANEL,a,1,true);this.createEmptyTotalPanel(SlipConstants.INITIAL_TOTAL_PANEL,a,1,true);this.createAlertPanel(SlipConstants.ALERT_PANEL,a,0,false);this.createAlertPanel(SlipConstants.ALERT_PANEL,a,0,false);this.createFlashAlertPanel(SlipConstants.FLASH_ALERT_PANEL,a,1,false);this.createHeaderSelectionPanel(SlipConstants.FIRST_STEP_HEADER_PANEL,a,1,true);this.createSelectionPanel(SlipConstants.SELECTION_PANEL,a,4,true);this.createTeaserPanel(SlipConstants.TEASER_PANEL,a,40,false,q,h,l,r);this.createComboPanel(SlipConstants.COMBO_PANEL,a,50,true);this.createHotComboPanel(SlipConstants.HOT_COMBO_PANEL,a,50,false);this.createMultiWayPanel(SlipConstants.MULTI_WAY_PANEL,a,50,false);this.createTrixiePanel(SlipConstants.TRIXIE_PANEL,a,80,false);this.createTotalSelectionPanel(SlipConstants.TOTAL_SELECTION_PANEL,a,1,true);this.createConfirmationButtonPanel(SlipConstants.CONFIRMATION_BUTTON_PANEL,a,1,true);if(g!=SlipConstants.WINDOW_TYPE_IN_CLIENT){this.createHintPanel(SlipConstants.HINT_PANEL,a,1,false)}this.createAlertPanel(SlipConstants.ALERT_PANEL,a,0,false);this.createHeaderConfirmationPanel(SlipConstants.HEADER_CONFIRMATION_PANEL,a,1,true);this.createSelectionConfirmationPanel(SlipConstants.SELECTION_CONFIRMATION_PANEL,a,1,true);this.createTeaserConfirmationPanel(SlipConstants.TEASER_CONFIRMATION_PANEL,a,2,false,q,h,r);this.createComboConfirmationPanel(SlipConstants.COMBO_CONFIRMATION_PANEL,a,3,true);this.createMultiWayConfirmationPanel(SlipConstants.MULTI_WAY_CONFIRMATION_PANEL,a,3,false);this.createHotComboConfirmationPanel(SlipConstants.HOT_COMBO_CONFIRMATION_PANEL,a,3,false);this.createTrixieConfirmationPanel(SlipConstants.TRIXIE_CONFIRMATION_PANEL,a,4,true);this.createTotalConfirmationPanel(SlipConstants.TOTAL_CONFIRMATION_PANEL,a,1,true);this.createSubmitButtonPanel(SlipConstants.SUBMIT_BUTTON_PANEL,a,1,true);this.createDisclaimerPanel(SlipConstants.DISCLAIMER_PANEL,a,1,true);this.createAlertPanel(SlipConstants.ALERT_PANEL,a,0,false);this.createHeaderReportPanel(SlipConstants.HEADER_REPORT_PANEL,a,1,true);this.createSelectionReportPanel(SlipConstants.SELECTION_REPORT_PANEL,a,1,true);this.createComboReportPanel(SlipConstants.COMBO_REPORT_PANEL,a,3,true);this.createHotComboReportPanel(SlipConstants.HOT_COMBO_REPORT_PANEL,a,3,false);this.createMultiWayReportPanel(SlipConstants.MULTI_WAY_REPORT_PANEL,a,3,false);this.createTrixieReportPanel(SlipConstants.TRIXIE_REPORT_PANEL,a,4,true);this.createReplyMessagePanel(SlipConstants.REPLY_MESSAGE_PANEL,a,1,true);a.activateView(SlipView.INITIAL);return a};SlipFactory.prototype.createLiveSlip=function(e,h,i,l,k,c,g,f,d,j,b){var a=this._createSlipInstance(SlipConstants.LIVE_MODE_ON,SlipConstants.LIVE_SLIP_PERSISTENCE_KEY,SlipConstants.LIVE_SESSION_HELPER_COOKIE_NAME,e,h,i,l,k,c,g,f,d,new Array(),j,b);this.createEmptyHeaderPanel(SlipConstants.INITIAL_HEADER_PANEL,a,1,true);this.createEmptySelectionPanel(SlipConstants.INITIAL_SELECTION_PANEL,a,1,true);this.createEmptyTotalPanel(SlipConstants.INITIAL_TOTAL_PANEL,a,1,true);this.createAlertPanel(SlipConstants.ALERT_PANEL,a,1,false);this.createFlashAlertPanel(SlipConstants.FLASH_ALERT_PANEL,a,1,false);this.createHeaderSelectionPanel(SlipConstants.FIRST_STEP_HEADER_PANEL,a,1,true);this.createSelectionPanel(SlipConstants.SELECTION_PANEL,a,4,true);this.createComboPanel(SlipConstants.COMBO_PANEL,a,50,true);this.createMultiWayPanel(SlipConstants.MULTI_WAY_PANEL,a,50,false);this.createTrixiePanel(SlipConstants.TRIXIE_PANEL,a,80,false);this.createTotalSelectionPanel(SlipConstants.TOTAL_SELECTION_PANEL,a,1,true);this.createConfirmationButtonPanel(SlipConstants.CONFIRMATION_BUTTON_PANEL,a,1,true);if(f!=SlipConstants.WINDOW_TYPE_IN_CLIENT){this.createHintPanel(SlipConstants.HINT_PANEL,a,1,false)}this.createHeaderConfirmationPanel(SlipConstants.HEADER_CONFIRMATION_PANEL,a,1,true);this.createSelectionConfirmationPanel(SlipConstants.SELECTION_CONFIRMATION_PANEL,a,1,true);this.createComboConfirmationPanel(SlipConstants.COMBO_CONFIRMATION_PANEL,a,3,true);this.createMultiWayConfirmationPanel(SlipConstants.MULTI_WAY_CONFIRMATION_PANEL,a,3,false);this.createTrixieConfirmationPanel(SlipConstants.TRIXIE_CONFIRMATION_PANEL,a,4,true);this.createTotalConfirmationPanel(SlipConstants.TOTAL_CONFIRMATION_PANEL,a,1,true);this.createSubmitButtonPanel(SlipConstants.SUBMIT_BUTTON_PANEL,a,1,true);this.createDisclaimerPanel(SlipConstants.DISCLAIMER_PANEL,a,1,true);this.createLiveProgressBarPanel(SlipConstants.LIVE_PROGRESS_BAR_PANEL,a,1,false);this.createHeaderReportPanel(SlipConstants.HEADER_REPORT_PANEL,a,1,true);this.createSelectionReportPanel(SlipConstants.SELECTION_REPORT_PANEL,a,1,true);this.createComboReportPanel(SlipConstants.COMBO_REPORT_PANEL,a,3,true);this.createMultiWayReportPanel(SlipConstants.MULTI_WAY_REPORT_PANEL,a,3,false);this.createTrixieReportPanel(SlipConstants.TRIXIE_REPORT_PANEL,a,4,true);this.createReplyMessagePanel(SlipConstants.REPLY_MESSAGE_PANEL,a,1,true);a.activateView(SlipView.INITIAL);return a};SlipFactory.prototype._createSlipInstance=function(f,o,t,c,j,q,a,l,s,k,b,h,g,d,n){var e=new BetSlip();var m=new SlipDisplay("#betSlipContainer");m.setVisible(true);m.setOwnerRef(e);e.setLiveMode(f);e.setDisplay(m);e.setTranslations(c);e.setConfigs(j);e.setUrls(q);e.setGlobalBettingConstants(a);e.setViewAssignments(new Array(SlipView.INITIAL,SlipView.SELECTION,SlipView.CONFIRMATION,SlipView.REPORT));e.setMobileMode(0);e.setLogger(new NullLoggerProxy());e.setFreeBetMode(n);e.setExitFreeBetModeOnNextClick(false);var r;if(s){r=new FlashPersistentStorageProxy();r.setFlashMovieByRef(l.getFlashMovie());r.setSessionHelperCookieName(t);r.setConfigs(j);e.setPersistenceKey(o)}else{r=new BrowserCookieStorageProxy();r.setFlashMovieByRef(null);e.setSessionHelperCookieName(t)}e.setPersistentStorage(r);e.setWindowType(b);e.setFlashAvailable(s);e.setFlashVersionSupported(k);var i=new EDS("liveSlip.getPanelReference(SlipConstants.TOTAL_CONFIRMATION_PANEL).updateEDSVisibility(true)");e.setEDS(i);e.setRequestSkinId(h);e.setMinStakes(g);e.setNotifyUserActivityHandler(d);return e};var visitorFactory=new VisitorFactory();var visitor;SlipFactory.prototype.createComboPanel=function(c,f,a,e){var b=new ComboPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new ComboPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function ComboPanel(){this.setAddTeaserClicked(false);this._comboTypes=new Array();this._isEdittingStakeBox=false;this._bankersLinkClicked=false;this._errorMsg="";this._showBankerLink=false;this._hotComboAvailable=false;this._minStakeFactorPerSport=1000;this._minLeagueDiscountFactor=1000;this._minUserOutcomeRiskFactor=1000;this._stakeBoxRegister=new StakeBoxRegister();this._liveOddsShowArrowUp=false;this._liveOddsShowArrowDown=false;this._totalTax=0}ComboPanel.prototype=new Panel();ComboPanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};ComboPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.checkedSelectionsCount=this.getCheckedSelectionsCount();a.checkedBankersCount=this.getCheckedBankersCount();a.errorMsg=this.getErrorMsg();a.showErrorMsg=this.getShowErrorMsg();a.showBankersLink=this.getShowBankerLink();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();this.setShowMaxStakeLink(visitor.isLoggedIn());a.showMaxStakeLink=this.getShowMaxStakeLink();a.isBankersLinkClicked=this.isBankersLinkClicked();a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.showTeaserLink=this.getShowTeaserLink();a.comboOdd=this.getComboOdd();a.comboFractionOdd=this.getComboFractionOdd();a.comboTypes=this.getComboTypes();a.isEachWayComboAvailable=this.isEachWayComboAvailable();if(this.getSlipRef().getLiveMode()==0){a.bankersLinkClicked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).bankersLinkClicked"}else{a.bankersLinkClicked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).bankersLinkClicked"}if(this.getSlipRef().getLiveMode()==0){a.showBankersHelpBlock=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).showBankersHelpBlock"}else{a.showBankersHelpBlock=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).showBankersHelpBlock"}if(this.getSlipRef().getLiveMode()==0){a.teasersLinkClicked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).teasersLinkClicked"}else{a.teasersLinkClicked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).teasersLinkClicked"}if(this.getSlipRef().getLiveMode()==0){a.showTeasersHelpBlock=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).showTeasersHelpBlock"}else{a.showTeasersHelpBlock=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).showTeasersHelpBlock"}if(this.getSlipRef().getLiveMode()==0){a.setMaxStakeShown=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).setMaxStakeShown"}else{a.setMaxStakeShown=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).setMaxStakeShown"}if(this.getSlipRef().getLiveMode()==0){a.editStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).editStake"}else{a.editStake=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).editStake"}if(this.getSlipRef().getLiveMode()==0){a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder"}else{a.stakeTabOrder=SlipConstants.GLOBAL_LIVE_SLIP+".stakeTabOrder"}if(this.getSlipRef().getLiveMode()==0){a.editEachWayChecked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).editEachWayChecked"}else{a.editEachWayChecked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL).editEachWayChecked"}a.trixieVisible=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).getDisplay().isVisible();this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());this._stakeBoxRegister.resetStakeBoxRegister();a.stakeBoxRegister=this._stakeBoxRegister;a.liveOddsShowArrowUp=this._liveOddsShowArrowUp;a.liveOddsShowArrowDown=this._liveOddsShowArrowDown;return a};ComboPanel.prototype.fetchExternalData=function(){var b=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._selections=b.getSelections();this._selectionsValidationsResult=b.getSelectionsValidationsResult();this._checkedSelections=b.getCheckedSelections();this._checkedSelectionsCount=b.getCheckedSelectionsCounter();this._checkedBankersCount=b.getCheckedBankersCount();this._minStakeFactorPerSport=b.getMinStakeFactorPerSport();this._minLeagueDiscountFactor=b.getMinLeagueDiscountFactor();this._minUserOutcomeRiskFactor=b.getMinUserOutcomeRiskFactor();if(this.getSlipRef().getLiveMode()==0){var a=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getDisplay();this.setShowBankerLink(b.isBankersAvailable()&&!a.isVisible()&&!this._addTeaserClicked);this.setShowTeaserLink(!this._addTeaserClicked&&b.arePossibleTeasersEnough()&&!a.isVisible()&&!this.isBankersLinkClicked());this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()}else{this.setShowBankerLink(b.isBankersAvailable());this._hotComboAvailable=false}this.setShowMaxStakeLink(visitor.isLoggedIn())};ComboPanel.prototype.localDataChanged=function(a){if(this._isComboPanelHidden()){this.getDisplay().setVisible(false)}else{this.getDisplay().setVisible(true);if(this._selectionsValidationsResult.hasConflict()){this._clear(0);this.setErrorMsg(this._selectionsValidationsResult.getConflictMessage());this.setShowErrorMsg(true)}else{this.setShowErrorMsg(false)}}if(!this._checkedSelections){this._checkedSelections=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getCheckedSelections()}this._checkSP();this._calcDisplayComboOdd();this._checkEachWayComboAvailability();this._calcCombination(a);var b=false;if(a!=null&&a.getType()==ExternalDataChangedContextType.LIVE_ODDS_NOTIFICATION){this._liveOddsShowArrowUp=a.getData().showArrowUp;this._liveOddsShowArrowDown=a.getData().showArrowDown;if(this._liveOddsShowArrowUp||this._liveOddsShowArrowDown){b=true}}if(!this._isEdittingStakeBox){this.getDisplay().refresh()}if(b){this._blinkComboOdd()}};ComboPanel.prototype._blinkComboOdd=function(){if(this.getSlipRef().getMobileMode()==1){return}var b=document.getElementById("slipComboOdd");if(b!=null){var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getLiveOddsNotificationRegister();if(!a.isEmpty()){b.style.visibility=b.style.visibility==""?"hidden":"";setTimeout(SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.COMBO_PANEL)._blinkComboOdd()",500)}else{b.style.visibility=""}}};ComboPanel.prototype._isComboPanelHidden=function(){var a=false;if(this._selectionsValidationsResult.isMultiWayPossible()||this.isHotComboAvailable()){a=true}return a};ComboPanel.prototype._calcDisplayComboOdd=function(){var b=1;for(var a in this._checkedSelections){if(this._checkedSelections[a].isSP()){b=1;break}else{b*=this._checkedSelections[a].getStyledOdd()}}this.setComboOdd(to_mn(b));this.setComboFractionOdd(to_mn(b,4))};ComboPanel.prototype._checkEachWayComboAvailability=function(){var b=false;for(var a in this._checkedSelections){if(this._checkedSelections[a].isEachWayPossible()){b=true;break}}this.setEachWayComboAvailable(b);return b};ComboPanel.prototype._calcPayoutComboOdd=function(b,f,g){var c=1;var e=0;var h=(this._comboTypes[f].getComboClass()==this._checkedSelectionsCount);if(this.isBankersLinkClicked()&&!h){for(var d in this._checkedSelections){if(this._checkedSelections[d].isBankerChecked()){if(g==SlipConstants.EACHWAY_PLACE){if(this._checkedSelections[d].isEachWayChecked()){if(this._checkedSelections[d].isSP()){c*=this._checkedSelections[d].getStyledOdd()}else{c*=this._checkedSelections[d].getEachWayOdd()}}}else{c*=this._checkedSelections[d].getStyledOdd()}}}e=this.getCheckedBankersCount()}this.setBankersOdd(c);var a=this._calcComboOdd(b,this._comboTypes[f].getComboClass(),e,h,g);return a*c};ComboPanel.prototype._calcComboOdd=function(e,g,f,d,h){var o=0;var m=new Array();var k=0;var b=new Array();for(var l=0;l<g-f;l++){m[l]=l}l=0;for(var j in this._checkedSelections){if(!this._checkedSelections[j].isBankerChecked()||d){k++;b[l++]=j}}var n=this.getSlipRef().getNumberOfCombinations(k,g-f,0);for(var j=1;j<=n;j++){m=this._gnInds(k,g-f,m,j);odd=1;for(l in m){if(h==SlipConstants.EACHWAY_PLACE){if(this._checkedSelections[b[m[l]]].getEachWayId()!=null){if(this._checkedSelections[b[m[l]]].isSP()){odd*=this._checkedSelections[b[m[l]]].getStyledOdd()}else{odd*=this._checkedSelections[b[m[l]]].getEachWayOdd()}}else{odd*=this._checkedSelections[b[m[l]]].getStyledOdd()}}else{odd*=this._checkedSelections[b[m[l]]].getStyledOdd()}}if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){this._points+=this.getSlipRef().calculatePoints(e,to_mn(odd*this.getBankersOdd(),4),this._hasSP,visitor.getToBaseCurrencyFxRate())}else{this._points+=this.getSlipRef().calculatePoints(e,to_mn(odd*this.getBankersOdd()),this._hasSP,visitor.getToBaseCurrencyFxRate())}o+=odd}return o};ComboPanel.prototype._checkSP=function(){for(var a in this._checkedSelections){if(this._checkedSelections[a].isSP()){this._hasSP=true;return}}this._hasSP=false;return};ComboPanel.prototype._gnInds=function(g,f,b,d){if(d==1){return b}var e=f-1;while(b[e]==g-f+e){e--}b[e]=b[e]+1;for(var c=e+1;c<f;c++){b[c]=b[e]+c-e}return b};ComboPanel.prototype._calcComboMaxStake=function(c,b){var f=this.getSlipRef().getConfigs()["COMBO_MAX_LOSS_VALUES"];var a=1;if(c==1){var e=1;for(var d in this._checkedSelections){if(this._checkedSelections[d].isSP()){e*=this._checkedSelections[d].getOutcomeRealOdd()}else{e*=this._checkedSelections[d].getOutcomeOdd()}}a=Math.max(f[b]/(e-1),this.getSlipRef().getConfigs()["MIN_MAX_COMBO_STAKE"])}else{a=f[b]}return Math.round(a*this._minStakeFactorPerSport*this._minLeagueDiscountFactor*this._minUserOutcomeRiskFactor*visitor.getBaseFxRate())};ComboPanel.prototype._checkForComboFactorConflict=function(a){if(!this._checkedSelections){for(var b in this._checkedSelections){var c=this._checkedSelections[b].getEventRef().getComboFactor();if(c>a){return true}}}return false};ComboPanel.prototype._calcCombination=function(q){var b=0;var h=0;var r=0;var f=0;var k=0;var l=this._checkedSelectionsCount-1;var m=0;for(var e=0;e<l;e++){var d=e?e+1:this.getCheckedSelectionsCount();this._points=0;var j=e?this.getSlipRef().getNumberOfCombinations(this._checkedSelectionsCount,e+1,this.isBankersLinkClicked()?this.getCheckedBankersCount():0):1;if(j<1||j>SlipConstants.MAX_NUMBER_SYSTEM_BETS||this._checkForComboFactorConflict(d)){delete this._comboTypes[e];continue}if(this._comboTypes[e]==null){this._comboTypes[e]=new ComboType()}else{if(!this.isEachWayComboAvailable()){this._comboTypes[e].setEachWayChecked(false)}}if((isNaN(this._comboTypes[e].getMaxStake())||(q!=null&&q.getType()==ExternalDataChangedContextType.NUM_SELECTIONS_CHANGED))&&visitor.isLoggedIn()){this._comboTypes[e].setMaxStake(this._calcComboMaxStake(j,d))}this._comboTypes[e].setComboClass(d);if(this._comboTypes[e].isEachWayChecked()){j=j*2}this._comboTypes[e].setNumBets(j);var c=this._comboTypes[e].getStake();if(c>0){b+=j;h+=j*c;var n=0;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var a=c*to_mn(this._calcPayoutComboOdd(c,e,SlipConstants.EACHWAY_WINNER),4);f+=a;n=a;if(this._comboTypes[e].isEachWayChecked()){var g=c*to_mn(this._calcPayoutComboOdd(c,e,SlipConstants.EACHWAY_PLACE),4);f+=g;n+=g}}else{var a=c*to_mn(this._calcPayoutComboOdd(c,e,SlipConstants.EACHWAY_WINNER));f+=a;n=a;if(this._comboTypes[e].isEachWayChecked()){var g=c*to_mn(this._calcPayoutComboOdd(c,e,SlipConstants.EACHWAY_PLACE));f+=g;n+=g}}this._comboTypes[e].setPoints(this._points);this._comboTypes[e].setPayout(n);k+=this._points;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var o=c*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);m+=(Math.round(o*100)/100)*j}}}this.setTotalNumBets(b);this.setTotalStake(h);this.setPossiblePayout(f);this.setTotalPoints(k);this.setTotalTax(m);this._clear(this._checkedSelectionsCount>0?this._checkedSelectionsCount-1:0)};ComboPanel.prototype._clear=function(c){if(this._comboTypes!=null){var a=this._comboTypes.length;for(var b=c;b<a;b++){this._comboTypes.splice(c,1)}}};ComboPanel.prototype.showBankersHelpBlock=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["BANKERS_SLIP_22"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["MSG5_SLIP_4"]+"</td></tr></table>")};ComboPanel.prototype.showTeasersHelpBlock=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["BANKERS_SLIP_22"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["MSG5_SLIP_4"]+"</td></tr></table>")};ComboPanel.prototype.setErrorMsg=function(a){this._errorMsg=a};ComboPanel.prototype.getErrorMsg=function(){return this._errorMsg};ComboPanel.prototype.setShowErrorMsg=function(a){this._showErrorMsg=a};ComboPanel.prototype.getShowErrorMsg=function(){return this._showErrorMsg};ComboPanel.prototype.setBankersLinkClicked=function(a){this._bankersLinkClicked=a};ComboPanel.prototype.isBankersLinkClicked=function(){return this._bankersLinkClicked};ComboPanel.prototype.setComboOdd=function(a){this._comboOdd=a};ComboPanel.prototype.getComboOdd=function(){return this._comboOdd};ComboPanel.prototype.setComboFractionOdd=function(a){this._comboFractionOdd=a};ComboPanel.prototype.getComboFractionOdd=function(){return this._comboFractionOdd};ComboPanel.prototype.getSelections=function(){return this._selections};ComboPanel.prototype.getCheckedSelections=function(){return this._checkedSelections};ComboPanel.prototype.getCheckedSelectionsCount=function(){return this._checkedSelectionsCount};ComboPanel.prototype.getCheckedBankersCount=function(){return this._checkedBankersCount};ComboPanel.prototype.getShowBankerLink=function(){return this._showBankerLink};ComboPanel.prototype.setShowBankerLink=function(a){this._showBankerLink=a};ComboPanel.prototype.setShowTeaserLink=function(a){this._showTeaserLink=a};ComboPanel.prototype.getShowTeaserLink=function(){return this._showTeaserLink};ComboPanel.prototype.setShowMaxStakeLink=function(a){this._maxStake=a};ComboPanel.prototype.getShowMaxStakeLink=function(){return this._maxStake};ComboPanel.prototype.setEachWayComboAvailable=function(a){this._eachWayComboAvailable=a};ComboPanel.prototype.isEachWayComboAvailable=function(){return this._eachWayComboAvailable};ComboPanel.prototype.getComboTypes=function(){return this._comboTypes};ComboPanel.prototype.setAddTeaserClicked=function(a){this._addTeaserClicked=a};ComboPanel.prototype.isAddTeaserClicked=function(){return this._addTeaserClicked};ComboPanel.prototype.setTotalNumBets=function(a){this._totalNumBets=a};ComboPanel.prototype.getTotalNumBets=function(){return this._totalNumBets};ComboPanel.prototype.setTotalStake=function(a){this._totalStake=a};ComboPanel.prototype.getTotalStake=function(){return this._totalStake};ComboPanel.prototype.setPossiblePayout=function(a){this._possiblePayout=a};ComboPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};ComboPanel.prototype.setTotalPoints=function(a){this._totalPoints=a};ComboPanel.prototype.getTotalPoints=function(){return this._totalPoints};ComboPanel.prototype.setBankersOdd=function(a){this._bankersOdd=a};ComboPanel.prototype.getBankersOdd=function(){return this._bankersOdd};ComboPanel.prototype.isHotComboAvailable=function(){return this._hotComboAvailable};ComboPanel.prototype.setTotalTax=function(a){this._totalTax=a};ComboPanel.prototype.getTotalTax=function(){return this._totalTax};ComboPanel.prototype.bankersLinkClicked=function(a){this.setBankersLinkClicked(a);if(this.getCheckedBankersCount()){this.clearAllStakes()}this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()};ComboPanel.prototype.teasersLinkClicked=function(a){this.setAddTeaserClicked(true);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).externalDataChanged();this.getSlipRef().persist();this.setAddTeaserClicked(false)};ComboPanel.prototype.editStake=function(c,a){var b=this.getDataModel();this.getSlipRef().getLogger().log("ComboPanel.prototype.editStake stake "+a+" comboIndex:"+c);this._isEdittingStakeBox=true;var d=this.getSlipRef().makeStake(a);this.getSlipRef().getLogger().log("ComboPanel.prototype.editStake makestake "+d);this._comboTypes[c].setStake(d);this._comboTypes[c].setDisplayStake(a);this.localDataChanged();if(b.freeBetMode==1){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).clearAllStakes()}this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist();this._isEdittingStakeBox=false;this.getSlipRef().getLogger().log("ComboPanel.prototype.editStake end stake: "+this._comboTypes[c]._stake);if(b.freeBetMode==1){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).localDataChanged()}};ComboPanel.prototype.editEachWayChecked=function(a){this._comboTypes[a].setEachWayChecked(this._comboTypes[a].isEachWayChecked()?false:true);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()};ComboPanel.prototype.setEachWay=function(b,a){this._comboTypes[b].setEachWayChecked(a);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()};ComboPanel.prototype.setMaxStakeShown=function(a){this.getSlipRef().setMaxStakeShown(a);this.getSlipRef().getDisplay().refresh();this.getSlipRef().persist()};ComboPanel.prototype.setComboStake=function(c,a){var b=this.getSlipRef().makeStake(a);if(b>0){this._comboTypes[c].setStake(b);this._comboTypes[c].setDisplayStake(a);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()}};ComboPanel.prototype.clearAllStakes=function(){this._isEdittingStakeBox=true;for(var a=0;a<this._comboTypes.length;a++){if(typeof(this._comboTypes[a])!="undefined"){this._comboTypes[a].setStake(0);this._comboTypes[a].setDisplayStake("")}}this._isEdittingStakeBox=false};ComboPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_checkedSelectionsCount","_checkedBankersCount","_errorMsg","_showErrorMsg","_showBankerLink","_maxStake","_showTeaserLink","_comboOdd","_comboFractionOdd","_eachWayComboAvailable","_bankersLinkClicked","_comboTypes","_totalStake","_totalNumBets","_possiblePayout","_totalPoints","_selectionsValidationsResult","_hotComboAvailable"])};function ComboPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #comboPanelAnchor");this.setDomAnchorId("comboPanelAnchor");this.setTemplateFunction(betslipTemplate.slipCombo)}ComboPanelDisplay.prototype=new Display();function ComboType(){}ComboType.prototype.setStake=function(a){this._stake=a};ComboType.prototype.getStake=function(){return this._stake};ComboType.prototype.setDisplayStake=function(a){this._displayStake=a};ComboType.prototype.getDisplayStake=function(){return this._displayStake};ComboType.prototype.hasStake=function(){return this._stake!=0};ComboType.prototype.setNumBets=function(a){this._numBets=a};ComboType.prototype.getNumBets=function(){return this._numBets};ComboType.prototype.setEachWayChecked=function(a){this._eachWayChecked=a};ComboType.prototype.isEachWayChecked=function(){return this._eachWayChecked};ComboType.prototype.setComboClass=function(a){this._comboClass=a};ComboType.prototype.getComboClass=function(){return this._comboClass};ComboType.prototype.setMaxStake=function(a){this._maxStake=a};ComboType.prototype.getMaxStake=function(){return this._maxStake};ComboType.prototype.setPoints=function(a){this._points=a};ComboType.prototype.getPoints=function(){return this._points};ComboType.prototype.setPayout=function(a){this._payout=a};ComboType.prototype.getPayout=function(){return this._payout};function ComboConfirmationPanel(){this._comboTypes=new Array()}ComboConfirmationPanel.prototype=new Panel();ComboConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.translations=this.getSlipRef().getTranslations();a.isComboChecked=this._isComboChecked();a.confComboSelections=this._confComboSelections;a.comboOdd=this._comboOdd;a.comboFractionOdd=this._comboFractionOdd;a.comboTypes=this._comboTypes;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};ComboConfirmationPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);this._comboTypes=a.getComboTypes();this._confComboSelections=a.getShowErrorMsg();this._comboOdd=a.getComboOdd();this._comboFractionOdd=a.getComboFractionOdd()};ComboConfirmationPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};ComboConfirmationPanel.prototype._isComboChecked=function(){for(var a in this._comboTypes){if(this._comboTypes[a].getStake()>0){return true}}return false};function ComboConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #comboConfirmationPanelAnchor");this.setDomAnchorId("comboConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.comboConfirmation)}ComboConfirmationPanelDisplay.prototype=new Display();function ComboReportPanel(){this._comboTypes=new Array();this._comboResults=new Array();this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0}ComboReportPanel.prototype=new Panel();ComboReportPanel.prototype.getDataModel=function(){var a=new Object();a.liveMode=this.getSlipRef().getLiveMode();a.translations=this.getSlipRef().getTranslations();a.isComboChecked=this._isComboChecked();a.confComboSelections=this._confComboSelections;a.comboOdd=this._comboOdd;a.comboFractionOdd=this._comboFractionOdd;a.comboTypes=this._comboTypes;a.comboResults=this._comboResults;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};ComboReportPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);this._comboTypes=a.getComboTypes();this._confComboSelections=a.getShowErrorMsg();this._comboOdd=a.getComboOdd();this._comboFractionOdd=a.getComboFractionOdd();this._comboResults=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getCombosFailed()};ComboReportPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};ComboReportPanel.prototype.setCombosFailed=function(d){var f=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);var g=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getAllFailed();this._comboResults=d;if(g==true){this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0;return}this._comboTypes=f.getComboTypes();this._totalCost=f.getTotalStake();this._numberBets=f.getTotalNumBets();this._possiblePayout=f.getPossiblePayout();this._possiblePoints=f.getTotalPoints();this._totalTax=f.getTotalTax();if(this._comboResults&&this._comboResults.length!=0){for(var a in this._comboTypes){if(this._comboResults[a].isFailed()){var e=this._comboTypes[a];this._totalCost-=e.getStake()*e.getNumBets();this._numberBets-=e.getNumBets();this._possiblePayout-=e.getPayout();var c=to_mn(this._possiblePoints,6);c-=to_mn(e.getPoints(),6);this._possiblePoints=c;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var b=e.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax-=(Math.round(b*100)/100)*e.getNumBets()}}}}};ComboReportPanel.prototype.getComboResults=function(){return this._comboResults};ComboReportPanel.prototype._isComboChecked=function(){for(var a in this._comboTypes){if(this._comboTypes[a].getStake()>0){return true}}return false};ComboReportPanel.prototype.getTotalCost=function(){return this._totalCost};ComboReportPanel.prototype.getBetsPlaced=function(){return this._numberBets};ComboReportPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};ComboReportPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};ComboReportPanel.prototype.getTotalTax=function(){return this._totalTax};function ComboReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #comboReportPanelAnchor");this.setDomAnchorId("comboReportPanelAnchor");this.setTemplateFunction(betslipTemplate.comboReport)}ComboReportPanelDisplay.prototype=new Display();SlipFactory.prototype.createHotComboPanel=function(c,f,a,e){var b=new HotComboPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new HotComboPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function HotComboPanel(){this._stakeBoxRegister=new StakeBoxRegister();this._isEdittingStakeBox=false;this._hotComboAvailable=false;this._checkedSelectionsCount=0;this._DBReturnedHotComboMaxStakes=new Object();this._minStakeFactorPerSport=1000;this._totalNumBets=0;this._totalCost=0;this._possiblePayout=0;this._possiblePoints=0}HotComboPanel.prototype=new Panel();HotComboPanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};HotComboPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();this.setMaxStakeLinkShown(visitor.isLoggedIn());a.isMaxStakeLinkShown=this.isMaxStakeLinkShown();a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.hotComboOdd=to_odd(SlipConstants.ODD_STYLE_DECIMAL,this._hotComboData.getHotComboOdd());a.hotComboMaxStake=this._hotComboData.getHotComboMaxStake();a.hotComboData=this._hotComboData;this._stakeBoxRegister.resetStakeBoxRegister();this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());a.stakeBoxRegister=this._stakeBoxRegister;if(this.getSlipRef().getLiveMode()==0){a.setMaxStakeShown=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.HOT_COMBO_PANEL).setMaxStakeShown"}else{a.setMaxStakeShown=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.HOT_COMBO_PANEL).setMaxStakeShown"}if(this.getSlipRef().getLiveMode()==0){a.editStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.HOT_COMBO_PANEL).editStake"}else{a.editStake=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.HOT_COMBO_PANEL).editStake"}if(this.getSlipRef().getLiveMode()==0){a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder"}else{a.stakeTabOrder=SlipConstants.GLOBAL_LIVE_SLIP+".stakeTabOrder"}a.freeBetMode=this.getSlipRef().getFreeBetMode();return a};HotComboPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._checkedSelectionsCount=a.getCheckedSelectionsCounter();this.setMaxStakeLinkShown(visitor.isLoggedIn());this._minStakeFactorPerSport=a.getMinStakeFactorPerSport()};HotComboPanel.prototype.localDataChanged=function(){if(this._hotComboAvailable){if(visitor.isLoggedIn()){this._hotComboData.setHotComboMaxStake(this._calculateHotComboMaxStake())}if(!this._isEdittingStakeBox){this.getDisplay().refresh()}}this.setPossiblePayout(this._calculatePossiblePayout());this.setTotalCost(this._calculateTotalCost());this.setPossiblePoints(this._calculatePossiblePoints());this.setTotalNumBets(this._calculateTotalNumBets())};HotComboPanel.prototype.addHotCombo=function(c,b,a,d){var e=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);e.removeAllSelectionsAPI();this._hotComboData=new HotComboFactory().createHotCombo(c,b,a,d);this._hotComboAvailable=true;this.getDisplay().setVisible(true);this.localDataChanged();this.getSlipRef().persist();this.getDisplay().refresh();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).externalDataChanged()};HotComboPanel.prototype.removeHotCombo=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);a.removeAllSelectionsAPI();this._hotComboAvailable=false;this.getDisplay().setVisible(false);this._hotComboData=null;this.localDataChanged();this.getSlipRef().persist();this.getDisplay().refresh();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).externalDataChanged()};HotComboPanel.prototype._calculateHotComboMaxStake=function(){var a;if(typeof(this._DBReturnedHotComboMaxStakes[this._hotComboData.getHotComboId()])!="undefined"){a=Math.round(this._DBReturnedHotComboMaxStakes[this._hotComboData.getHotComboId()])}else{a=Math.round(Math.max(this._hotComboData.getHotComboMaxLoss()/(this._hotComboData.getHotComboOdd()-1),this.getSlipRef().getConfigs()["MIN_MAX_COMBO_STAKE"])*this._minStakeFactorPerSport*visitor.getBaseFxRate())}return a};HotComboPanel.prototype._calculatePossiblePayout=function(){var a=0;if(this._hotComboAvailable&&this._hotComboData.getHotComboStake()>0){a=this._hotComboData.getHotComboStake()*to_mn(this._hotComboData.getHotComboOdd());this._hotComboData.setPayout(a)}return a};HotComboPanel.prototype._calculateTotalCost=function(){var a=0;if(this._hotComboAvailable&&this._hotComboData.getHotComboStake()>0){a=this._hotComboData.getHotComboStake()}return a};HotComboPanel.prototype._calculatePossiblePoints=function(){var a=0;if(this._hotComboAvailable&&this._hotComboData.getHotComboStake()>0){a=this.getSlipRef().calculatePoints(this._hotComboData.getHotComboStake(),to_mn(this._hotComboData.getHotComboOdd()),false,visitor.getToBaseCurrencyFxRate());this._hotComboData.setPoints(a)}return a};HotComboPanel.prototype._calculateTotalNumBets=function(){var a=0;if(this._hotComboAvailable&&this._hotComboData.getHotComboStake()>0){a=1}return a};HotComboPanel.prototype.editStake=function(a){this._isEdittingStakeBox=true;this._hotComboData.setHotComboStake(this.getSlipRef().makeStake(a));this._hotComboData.setHotComboDisplayStake(a);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist();this._isEdittingStakeBox=false};HotComboPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_maxStakeLinkShown","_hotComboData","_hotComboAvailable","_DBReturnedHotComboMaxStakes","_totalNumBets","_totalCost","_possiblePayout","_possiblePoints"])};HotComboPanel.prototype.setMaxStakeShown=function(a){this.getSlipRef().setMaxStakeShown(a);this.getSlipRef().persist();this.getSlipRef().getDisplay().refresh()};HotComboPanel.prototype.addDBReturnedHotComboMaxStake=function(b,a){this._DBReturnedHotComboMaxStakes[b]=a};HotComboPanel.prototype.setMaxStakeLinkShown=function(a){this._maxStakeLinkShown=a};HotComboPanel.prototype.isMaxStakeLinkShown=function(){return this._maxStakeLinkShown};HotComboPanel.prototype.setPossiblePayout=function(a){this._possiblePayout=a};HotComboPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};HotComboPanel.prototype.setPossiblePoints=function(a){this._possiblePoints=a};HotComboPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};HotComboPanel.prototype.setTotalCost=function(a){this._totalCost=a};HotComboPanel.prototype.getTotalCost=function(){return this._totalCost};HotComboPanel.prototype.setTotalNumBets=function(a){this._totalNumBets=a};HotComboPanel.prototype.getTotalNumBets=function(){return this._totalNumBets};HotComboPanel.prototype.isHotComboAvailable=function(){return this._hotComboAvailable};HotComboPanel.prototype.getHotComboData=function(){return this._hotComboData};function HotComboPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #hotComboPanelAnchor");this.setDomAnchorId("hotComboPanelAnchor");this.setTemplateFunction(betslipTemplate.hotCombo)}HotComboPanelDisplay.prototype=new Display();SlipFactory.prototype.createHotComboConfirmationPanel=function(c,f,a,e){var b=new HotComboConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new HotComboConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function HotComboConfirmationPanel(){this._isHotComboAvailable=false}HotComboConfirmationPanel.prototype=new Panel();HotComboConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.hotComboOdd=to_odd(SlipConstants.ODD_STYLE_DECIMAL,this._hotComboData.getHotComboOdd());a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());a.stake=this._stake;return a};HotComboConfirmationPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);this._isHotComboAvailable=a.isHotComboAvailable();if(this._isHotComboAvailable){this._hotComboData=a.getHotComboData();this._stake=this._hotComboData.getHotComboStake()}};HotComboConfirmationPanel.prototype.localDataChanged=function(){if(this._isHotComboAvailable){this.getDisplay().setVisible(true)}else{this.getDisplay().setVisible(false)}this.getDisplay().refresh()};function HotComboConfirmationPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #hotComboConfirmationPanelAnchor");this.setDomAnchorId("hotComboConfirmationPanelAnchor");this.setTemplateFunction(betslipTemplate.hotComboConfirmation)}HotComboConfirmationPanelDisplay.prototype=new Display();SlipFactory.prototype.createHotComboReportPanel=function(c,f,a,e){var b=new HotComboReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new HotComboReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function HotComboReportPanel(){this._hotComboAvailable=false}HotComboReportPanel.prototype=new Panel();HotComboReportPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.hotComboOdd=to_odd(SlipConstants.ODD_STYLE_DECIMAL,this._hotComboData.getHotComboOdd());a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());a.stake=this._hotComboData.getHotComboStake();a.hotComboFailed=this._hotComboData.isHotComboFailed();return a};HotComboReportPanel.prototype.localDataChanged=function(){if(this._hotComboAvailable){this.getDisplay().setVisible(true)}else{this.getDisplay().setVisible(false)}};HotComboReportPanel.prototype.fetchExternalData=function(){var b=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL);var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._hotComboAvailable=b.isHotComboAvailable();this._hotComboData=b.getHotComboData();this._checkedSelections=a.getCheckedSelections()};HotComboReportPanel.prototype.convertHotComboToNormalCombo=function(){var b=this.getSlipRef().getUrls()["slip_prefill"]+"?redirect_action=bets";for(var a in this._checkedSelections){b+=("&outcome_id="+this._checkedSelections[a].getOutcomeId());b+="&stake=0"}window.location=b};function HotComboReportPanelDisplay(a){this.setDomContainerSelector(a);this.setDomAnchorSelector(a+" #hotComboReportPanelAnchor");this.setDomAnchorId("hotComboReportPanelAnchor");this.setTemplateFunction(betslipTemplate.hotComboReport)}HotComboReportPanelDisplay.prototype=new Display();function HotCombo(){this._hotComboFailed=false}HotCombo.prototype.setHotComboId=function(a){this._hotComboId=a};HotCombo.prototype.getHotComboId=function(){return this._hotComboId};HotCombo.prototype.setHotComboOdd=function(a){this._hotComboOdd=a};HotCombo.prototype.getHotComboOdd=function(){return this._hotComboOdd};HotCombo.prototype.setHotComboPercentage=function(a){this._hotComboPercentage=a};HotCombo.prototype.getHotComboPercentage=function(){return this._hotComboPercentage};HotCombo.prototype.setHotComboMaxLoss=function(a){this._hotComboMaxLoss=a};HotCombo.prototype.getHotComboMaxLoss=function(){return this._hotComboMaxLoss};HotCombo.prototype.setHotComboMaxStake=function(a){this._hotComboMaxStake=a};HotCombo.prototype.getHotComboMaxStake=function(){return this._hotComboMaxStake};HotCombo.prototype.setHotComboStake=function(a){this._hotComboStake=a};HotCombo.prototype.getHotComboStake=function(){return this._hotComboStake};HotCombo.prototype.setHotComboDisplayStake=function(a){this._hotComboDisplayStake=a};HotCombo.prototype.getHotComboDisplayStake=function(){return this._hotComboDisplayStake};HotCombo.prototype.hasStake=function(){return this._hotComboStake!=0};HotCombo.prototype.setHotComboFailed=function(a){this._hotComboFailed=a};HotCombo.prototype.isHotComboFailed=function(){return this._hotComboFailed};HotCombo.prototype.setPoints=function(a){this._points=a};HotCombo.prototype.getPoints=function(){return this._points};HotCombo.prototype.setPayout=function(a){this._payout=a};HotCombo.prototype.getPayout=function(){return this._payout};function HotComboFactory(){}HotComboFactory.prototype.createHotCombo=function(c,b,a,e){var d=new HotCombo();d.setHotComboId(c);d.setHotComboOdd(b);d.setHotComboPercentage(a);d.setHotComboMaxLoss(e);return d};SlipFactory.prototype.createMultiWayPanel=function(c,f,a,e){var b=new MultiWayPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new MultiWayPanelDisplay(f.getDisplay().getDomContainerSelector()+" #multiWayPanelContainer");d.setAnchorId("multiWayPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function MultiWayPanel(){this._stakeBoxRegister=new StakeBoxRegister();this._isEdittingStakeBox=false;this._selectionsValidationsResult;this._calculatedMultiWaySelectionsData;this._multiWayCombinations=new Object();this._maxStakeLinkShown=false;this._loggedIn=false;this._minStakeFactorPerSport=1000;this._minLeagueDiscountFactor=1000;this._minUserOutcomeRiskFactor=1000;this._possibleTeasersEnough=false;this._teaserPanelVisible=false;this._bankersLinkClicked=false;this._teasersLinkShown=false;this._addTeaserClicked=false;this._lastCheckedSelections=0}MultiWayPanel.prototype=new Panel();MultiWayPanel.prototype.setStake=function(a){this._stake=a};MultiWayPanel.prototype.getStake=function(){return this._stake};MultiWayPanel.prototype.setMaxStakeShown=function(a){this.getSlipRef().setMaxStakeShown(a);this.getSlipRef().getDisplay().refresh();this.getSlipRef().persist()};MultiWayPanel.prototype.getTotalCost=function(){return this._calculateTotalCost()};MultiWayPanel.prototype.getPossiblePayout=function(){return this._calculatePossiblePayout()};MultiWayPanel.prototype.getPossiblePoints=function(){return this._calculatePossiblePoints()};MultiWayPanel.prototype.getTotalNumBets=function(){return this._calculateTotalNumBets()};MultiWayPanel.prototype.getTotalTax=function(){return this._calculateTotalTax()};MultiWayPanel.prototype.getMultiWayCombinations=function(){return this._multiWayCombinations};MultiWayPanel.prototype.getCalculatedMultiWaySelectionsData=function(){return this._calculatedMultiWaySelectionsData};MultiWayPanel.prototype.setAddTeaserClicked=function(a){this._addTeaserClicked=true;this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).externalDataChanged();this.getSlipRef().persist();this._addTeaserClicked=false};MultiWayPanel.prototype.isAddTeaserClicked=function(){return this._addTeaserClicked};MultiWayPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.multiWayCombinations=this._multiWayCombinations;a.checkedSelectionsCount=this._checkedSelectionsCount;this._maxStakeLinkShown=visitor.isLoggedIn();a.maxStakeLinkShown=this._maxStakeLinkShown;a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.conflictMessage=this._selectionsValidationsResult.getConflictMessage();this._stakeBoxRegister.resetStakeBoxRegister();this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());a.stakeBoxRegister=this._stakeBoxRegister;if(this.getSlipRef().getLiveMode()==0){a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder"}else{a.stakeTabOrder=SlipConstants.GLOBAL_LIVE_SLIP+".stakeTabOrder"}a.teasersLinkShown=this._teasersLinkShown;a.addTeaserClicked=this._addTeaserClicked;if(this.getSlipRef().getLiveMode()==0){a.setMaxStakeShown=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).setMaxStakeShown"}else{a.setMaxStakeShown=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).setMaxStakeShown"}if(this.getSlipRef().getLiveMode()==0){a.editStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).editStake"}else{a.editStake=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).editStake"}if(this.getSlipRef().getLiveMode()==0){a.setAddTeaserClicked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).setAddTeaserClicked"}else{a.setAddTeaserClicked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.MULTI_WAY_PANEL).setAddTeaserClicked"}a.freeBetMode=this.getSlipRef().getFreeBetMode();return a};MultiWayPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("MultiWayPanel.prototype.fetchExternalData begin");var c=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var a=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL);var b=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);this._loggedIn=visitor.isLoggedIn();this._selectionsValidationsResult=c.getSelectionsValidationsResult();this._checkedSelectionsCount=c.getCheckedSelectionsCounter();this._minStakeFactorPerSport=c.getMinStakeFactorPerSport();this._minLeagueDiscountFactor=c.getMinLeagueDiscountFactor();this._minUserOutcomeRiskFactor=c.getMinUserOutcomeRiskFactor();this._possibleTeasersEnough=c.arePossibleTeasersEnough();if(this.getSlipRef().getLiveMode()==0){this._teaserPanelVisible=a.getDisplay().isVisible()}else{this._teaserPanelVisible=false}this._bankersLinkClicked=b.isBankersLinkClicked();this.getSlipRef().getLogger().log("MultiWayPanel.prototype.fetchExternalData end")};MultiWayPanel.prototype.localDataChanged=function(){if(this._selectionsValidationsResult.isMultiWayPossible()){var c=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);this.getDisplay().setVisible(true);var d=this._collectCheckedSelectionsOddsAndIndexes();if(this._lastCheckedSelections!=this._checkedSelectionsCount){this._calculatedMultiWaySelectionsData=this._calculateMultiWaySelectionsData(d.getOdds(),d.getConflictedPairsIndexes());this._prepareMultiWayCombinations()}else{for(var b in this._multiWayCombinations){if(this._loggedIn==false){this._multiWayCombinations[b].setMaxStake(Number.NaN)}else{if(this._loggedIn==true&&(typeof(this._multiWayCombinations[b])!="undefined"&&isNaN(this._multiWayCombinations[b].getMaxStake()))){var a=this._calculateMaxStake(this._multiWayCombinations[b].getNumberOfBets(),this._multiWayCombinations[b].getCombinationSize());this._multiWayCombinations[b].setMaxStake(a)}}}}if(this._loggedIn==true){this._maxStakeLinkShown=true}else{this._maxStakeLinkShown=false}if(this._bankersLinkClicked){c.bankersLinkClicked(false)}this._teasersLinkShown=false;if(this.getSlipRef().getLiveMode()==0){if(!this._addTeaserClicked&&this._possibleTeasersEnough&&!this._teaserPanelVisible&&!this._bankersLinkClicked){this._teasersLinkShown=true}}this._lastCheckedSelections=this._checkedSelectionsCount}else{this.getDisplay().setVisible(false);this._clearMultiWayCombinations(true);this._lastCheckedSelections=0}if(!this._isEdittingStakeBox){this.getDisplay().refresh()}};MultiWayPanel.prototype._collectCheckedSelectionsOddsAndIndexes=function(){var b=new Array();var a=new Object();var f=new Array();var h=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);for(var c in h.getCheckedSelections()){var e=h.getCheckedSelections()[c];a[e.getOutcomeId()]=b.length;b[b.length]=e.getOutcomeOdd()}for(var d in this._selectionsValidationsResult.getConflictedSelectionPairs()){var g=this._selectionsValidationsResult.getConflictedSelectionPairs()[d];f[f.length]=new Array(a[g[0]],a[g[1]])}return new ConflictedSelectionsOddsAndIndexes(f,b)};MultiWayPanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};MultiWayPanel.prototype.editStake=function(a,b){this._isEdittingStakeBox=true;this._multiWayCombinations[b].setStake(this.getSlipRef().makeStake(a));this._multiWayCombinations[b].setDisplayStake(a);this._isEdittingStakeBox=false;this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()};MultiWayPanel.prototype.clearAllStakes=function(){this._isEdittingStakeBox=true;for(var a in this._multiWayCombinations){this._multiWayCombinations[a].setStake(0);this._multiWayCombinations[a].setDisplayStake("")}this._isEdittingStakeBox=false};MultiWayPanel.prototype._prepareMultiWayCombinations=function(){var e=this.getSlipRef().getTranslations();var c=new Object();for(var f=0;f<this._calculatedMultiWaySelectionsData.length;f++){var h=this._calculatedMultiWaySelectionsData[f].getK();var a=e.COMBO_TYPE_TEXTS[h-1]+e.COMBOS_PLURAL_SUFFIX_SLIP_22;var d=this._calculatedMultiWaySelectionsData[f].getNumberOfCombinations();var j=this._calculatedMultiWaySelectionsData[f].getOdd();var b=this._calculatedMultiWaySelectionsData[f].getPointsOdd();var g;if(this._loggedIn==false){g=Number.NaN}else{if(this._loggedIn==true&&((typeof(this._multiWayCombinations[h])!="undefined"&&isNaN(this._multiWayCombinations[h].getMaxStake()))||(typeof(this._multiWayCombinations[h])=="undefined")||(typeof(this._multiWayCombinations[h])!="undefined"&&this._multiWayCombinations[h].getNumberOfBets()!=d))){g=this._calculateMaxStake(d,h)}else{g=this._multiWayCombinations[h].getMaxStake()}}this._multiWayCombinations[h]=new MultiWayCombinationType(h,a,d,g,j,b);c[h]=true}this._clearMultiWayCombinations(false,c)};MultiWayPanel.prototype._clearMultiWayCombinations=function(b,a){for(var c in this._multiWayCombinations){if(b||typeof(a[c])=="undefined"){delete this._multiWayCombinations[c]}}};MultiWayPanel.prototype._checkCombinationForConflict=function(a,c){for(var b=0;b<c.length;b++){if(a[c[b][0]]!=undefined&&a[c[b][1]]!=undefined){return false}}return true};MultiWayPanel.prototype.calculateMultiWayDataForTrixies=function(g,e){var k=new Array();var d=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);for(var h=0;h<g.length;h++){k[h]=d.getCheckedSelections()[g[h]].getOutcomeOdd()}var b=0;var f=2;if(e){f=1}var j=new Array();for(var c=f;c<k.length+1;c++){var a=this._combineAndCalculateOdds(k,c,j);b+=a.getOdd()}return b};MultiWayPanel.prototype._calculateMultiWaySelectionsData=function(e,d){var b=new Array();for(var c=2;c<e.length;c++){var a=this._combineAndCalculateOdds(e,c,d);if(a!=null){if(a.getNumberOfCombinations()>0){b[b.length]=a}else{break}}}return b};MultiWayPanel.prototype._combineAndCalculateOdds=function(b,d,l){var c=b.length;var m=new Array();var h=this.getSlipRef().getNumberOfCombinations(c,d,0);var t=0;var q=new Object();var s=new Array();for(var g=0;g<d;g++){m[g]=g;q[g]=1;if(g==0){s[g]=b[g]}else{s[g]=s[g-1]*b[g]}}var o=h;var f=0;var r=0;while(o>0){if(o!=h){var g=d-1;while(m[g]==c-d+g){delete q[m[g]];g--}delete q[m[g]];m[g]=m[g]+1;q[m[g]]=1;if(g==0){s[g]=b[m[g]]}else{s[g]=s[g-1]*b[m[g]]}for(var e=g+1;e<d;e++){m[e]=m[g]+e-g;q[m[e]]=1;s[e]=s[e-1]*b[m[e]]}}if(this._checkCombinationForConflict(q,l)){t++;f+=s[d-1];r+=this.getSlipRef().calculatePointsOdd(s[d-1],false);if(t>SlipConstants.MAX_NUMBER_SYSTEM_BETS){return null}}o--}return new MultiWaySelectionsData(d,t,f,r)};MultiWayPanel.prototype._combineSelections=function(r,e,d){var c=r.length;var m=new Array();var l=this.getSlipRef().getNumberOfCombinations(c,e,0);var s=new Array();var q=new Object();for(var g=0;g<e;g++){m[g]=g;q[r[g]]=1}var o=l;while(o>0){if(o!=l){var g=e-1;while(m[g]==c-e+g){delete q[r[m[g]]];g--}delete q[r[m[g]]];m[g]=m[g]+1;q[r[m[g]]]=1;for(var f=g+1;f<e;f++){m[f]=m[g]+f-g;q[r[m[f]]]=1}}if(this._checkCombinationForConflict(q,d)){var h=new Array();for(var b=0;b<e;b++){h[h.length]=r[m[b]]}s[s.length]=h}o--}return s};MultiWayPanel.prototype.expandMultiWaySelections=function(f){var m=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var d=m.getCheckedSelections();var c=0;var o=new Array();for(var q in d){o[c]=d[q].getOutcomeId();c++}var e=this._selectionsValidationsResult.getConflictedSelectionPairs();var b=this._combineSelections(o,f,e);var s=new Array();var r=new Array();for(var l=0;l<b.length;l++){var n=b[l];var a=new Object();a[f]=n;for(var h=2;h<f;h++){var g=this._combineSelections(n,h,r);a[h]=g}s[s.length]=a}return s};MultiWayPanel.prototype._calculatePossiblePayout=function(){var c=0;if(typeof(this._multiWayCombinations)!="undefined"){for(var a in this._multiWayCombinations){var b=this._multiWayCombinations[a];c+=b.getStake()*b.getOdd();b.setPayout(b.getStake()*b.getOdd())}}return c};MultiWayPanel.prototype._calculateTotalCost=function(){var c=0;if(typeof(this._multiWayCombinations)!="undefined"){for(var a in this._multiWayCombinations){var b=this._multiWayCombinations[a];c+=b.getCost()}}return c};MultiWayPanel.prototype._calculatePossiblePoints=function(){var b=0;if(typeof(this._multiWayCombinations)!="undefined"){for(var a in this._multiWayCombinations){var c=this._multiWayCombinations[a];if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var d=c.getStake()*to_mn(c.getPointsOdd(),4)*visitor.getToBaseCurrencyFxRate();b+=d;c.setPoints(d)}else{var d=c.getStake()*to_mn(c.getPointsOdd())*visitor.getToBaseCurrencyFxRate();b+=d;c.setPoints(d)}}}return b};MultiWayPanel.prototype._calculateTotalNumBets=function(){var c=0;if(typeof(this._multiWayCombinations)!="undefined"){for(var a in this._multiWayCombinations){var b=this._multiWayCombinations[a];if(b.getStake()>0){c+=b.getNumberOfBets()}}}return c};MultiWayPanel.prototype._calculateTotalTax=function(){var d=0;if(typeof(this._multiWayCombinations)!="undefined"&&this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){for(var a in this._multiWayCombinations){var c=this._multiWayCombinations[a];if(c.getStake()>0){var b=c.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);d+=(Math.round(b*100)/100)*c.getNumberOfBets()}}}return d};MultiWayPanel.prototype._calculateMaxStake=function(b,a){var d=this.getSlipRef().getConfigs()["COMBO_MAX_LOSS_VALUES"];var c=d[a];return Math.round(c*this._minStakeFactorPerSport*this._minLeagueDiscountFactor*this._minUserOutcomeRiskFactor*visitor.getBaseFxRate())};MultiWayPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_selectionsValidationsResult","_multiWayCombinations","_maxStakeLinkShown","_teasersLinkShown","_checkedSelectionsCount","_lastCheckedSelections"])};SlipFactory.prototype.createMultiWayConfirmationPanel=function(c,f,a,e){var b=new MultiWayConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new MultiWayConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #multiWayPanelContainer");d.setAnchorId("multiWayPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function MultiWayConfirmationPanel(){this._multiWayCombinations}MultiWayConfirmationPanel.prototype=new Panel();MultiWayConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.multiWayCombinations=this._multiWayCombinations;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};MultiWayConfirmationPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("MultiWayConfirmationPanel.prototype.fetchExternalData begin");var a=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);this._multiWayCombinations=a.getMultiWayCombinations();this.getSlipRef().getLogger().log("MultiWayConfirmationPanel.prototype.fetchExternalData true")};MultiWayConfirmationPanel.prototype.localDataChanged=function(){this.getSlipRef().getLogger().log("MultiWayConfirmationPanel.prototype.localDataChanged shown :"+this._needToBeShown());if(this._needToBeShown()){this.getDisplay().setVisible(true)}else{this.getDisplay().setVisible(false)}this.getSlipRef().getLogger().log("MultiWayConfirmationPanel.prototype.localDataChanged end")};MultiWayConfirmationPanel.prototype._needToBeShown=function(){for(var a in this._multiWayCombinations){if(this._multiWayCombinations[a].getStake()>0){return true}}return false};SlipFactory.prototype.createMultiWayConfirmationPanel=function(c,f,a,e){var b=new MultiWayConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new MultiWayConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #multiWayPanelContainer");d.setAnchorId("multiWayPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createMultiWayReportPanel=function(c,f,a,e){var b=new MultiWayReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new MultiWayReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #multiWayPanelContainer");d.setAnchorId("multiWayPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function MultiWayReportPanel(){this._multiWayCombinations;this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0}MultiWayReportPanel.prototype=new Panel();MultiWayReportPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.multiWayCombinations=this._multiWayCombinations;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};MultiWayReportPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("MultiWayReportPanel.prototype.fetchExternalData begin");var a=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);this._multiWayCombinations=a.getMultiWayCombinations();this.getSlipRef().getLogger().log("MultiWayReportPanel.prototype.fetchExternalData end _multiWayCombinations:"+compactJSON(this._multiWayCombinations))};MultiWayReportPanel.prototype.localDataChanged=function(){this.getSlipRef().getLogger().log("MultiWayReportPanel.prototype.localDataChanged begin need to be shown:"+this._needToBeShown());if(this._needToBeShown()){this.getDisplay().setVisible(true);this._finalCalculation()}else{this.getDisplay().setVisible(false);this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0}this.getSlipRef().getLogger().log("MultiWayReportPanel.prototype.localDataChanged end")};MultiWayReportPanel.prototype._finalCalculation=function(){var f=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getAllFailed();var d=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);if(f==true){this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0;return}this._totalCost=d.getTotalCost();this._numberBets=d.getTotalNumBets();this._possiblePayout=d.getPossiblePayout();this._possiblePoints=d.getPossiblePoints();this._totalTax=d.getTotalTax();for(var a in this._multiWayCombinations){if(this._multiWayCombinations[a].isFailed()){var e=this._multiWayCombinations[a];this._totalCost-=e.getCost();this._numberBets-=e.getNumberOfBets();this._possiblePayout-=e.getPayout();var c=to_mn(this._possiblePoints,6);c-=to_mn(e.getPoints(),6);this._possiblePoints=c;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var b=e.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax-=(Math.round(b*100)/100)*e.getBetsCount()}}}};MultiWayReportPanel.prototype._needToBeShown=function(){for(var a in this._multiWayCombinations){if(this._multiWayCombinations[a].getStake()>0){return true}}return false};MultiWayReportPanel.prototype.getTotalCost=function(){return this._totalCost};MultiWayReportPanel.prototype.getBetsPlaced=function(){return this._numberBets};MultiWayReportPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};MultiWayReportPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};MultiWayReportPanel.prototype.getTotalTax=function(){return this._totalTax};MultiWayPanel.prototype.getMaxCombinationSize=function(){var a=0;for(var b in this._multiWayCombinations){if(b>a){a=b}}return new Number(a)};MultiWayPanel.prototype.getNumberOfBetsForClass=function(a){return this._multiWayCombinations[a].getNumberOfBets()};function MultiWayCombinationType(c,b,f,a,e,d){this._combinationSize=c;this._combinationName=b;this._numberOfBets=f;this._stake=0;this._maxStake=a;this._odd=e;this._failed=false;this._pointsOdd=d}MultiWayCombinationType.prototype.getCombinationSize=function(){return this._combinationSize};MultiWayCombinationType.prototype.getCombinationName=function(){return this._combinationName};MultiWayCombinationType.prototype.setNumberOfBets=function(a){this._numberOfBets=a};MultiWayCombinationType.prototype.getNumberOfBets=function(){return this._numberOfBets};MultiWayCombinationType.prototype.setStake=function(a){this._stake=a};MultiWayCombinationType.prototype.getStake=function(){return this._stake};MultiWayCombinationType.prototype.setDisplayStake=function(a){this._displayStake=a};MultiWayCombinationType.prototype.getDisplayStake=function(){return this._displayStake};MultiWayCombinationType.prototype.hasStake=function(){return this._stake!=0};MultiWayCombinationType.prototype.setMaxStake=function(a){return this._maxStake=a};MultiWayCombinationType.prototype.getMaxStake=function(){return this._maxStake};MultiWayCombinationType.prototype.getCost=function(){return this._stake*this._numberOfBets};MultiWayCombinationType.prototype.getPayout=function(){return this._payout};MultiWayCombinationType.prototype.setPayout=function(a){this._payout=a};MultiWayCombinationType.prototype.getPoints=function(){return this._points};MultiWayCombinationType.prototype.setPoints=function(a){this._points=a};MultiWayCombinationType.prototype.setOdd=function(a){return this._odd=a};MultiWayCombinationType.prototype.getOdd=function(){return this._odd};MultiWayCombinationType.prototype.setPointsOdd=function(a){return this._pointsOdd=a};MultiWayCombinationType.prototype.getPointsOdd=function(){return this._pointsOdd};MultiWayCombinationType.prototype.setFailed=function(a){return this._failed=a};MultiWayCombinationType.prototype.isFailed=function(){return this._failed};function ConflictedSelectionsOddsAndIndexes(b,a){this._conflictedPairsIndexes=b;this._odds=a}ConflictedSelectionsOddsAndIndexes.prototype.getConflictedPairsIndexes=function(){return this._conflictedPairsIndexes};ConflictedSelectionsOddsAndIndexes.prototype.getOdds=function(){return this._odds};function MultiWaySelectionsData(b,a,d,c){this._k=b;this._numberOfCombinations=a;this._odd=d;this._pointsOdd=c}MultiWaySelectionsData.prototype.getK=function(){return this._k};MultiWaySelectionsData.prototype.getNumberOfCombinations=function(){return this._numberOfCombinations};MultiWaySelectionsData.prototype.getOdd=function(){return this._odd};MultiWaySelectionsData.prototype.getPointsOdd=function(){return this._pointsOdd};function SelectionPanel(){this._selections=new Object();this._sortedSelections=new Array();this._allSelectionsCounter=0;this._possiblePoints=0;this._possiblePayout=0;this._totalCost=0;this._totalBets=0;this._totalTax=0;this._checkedBankersCount=0;this._checkedSelections=new Object();this._currentCheckedSelectionsCounter=0;this._isEdittingStakeBox=false;this._isCheckedTeaserSelectionJustAdded=false;this._checkedTeasersCount=0;this._isAddTeaserClicked=false;this._selectionJustRemoved=false;this._teaserSelectionJustChecked=false;this._DBReturnedSelectionsMaxStakes=new Object();this._isTeaserBlockVisible=false;this._stakeBoxRegister=new StakeBoxRegister();this._allComboSelections=0;this._minStakeFactorPerSport=1000;this._minLeagueDiscountFactor=1000;this._minUserOutcomeRiskFactor=1000;this._hotComboAvailable=false;this._liveOddsNotificationRegister=new LiveOddsNotificationRegister();this._liveOddsProcessedOutcomeId=null;this._liveComboOddClearNotification=false;this._liveEventsSubscriptions=new Object();this._outcomeChangedNotificationsTemp=new Object();this._eventChangedNotificationsTemp=new Object();this._translationChangedNotificationsTemp=new Object();this._slipEventListeners=new Array()}SelectionPanel.prototype=new Panel();SelectionPanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};SelectionPanel.prototype.getDataModel=function(){var a=new Object();a.selections=this.getSelections();a.sortedSelections=this.getSortedSelections();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.isTeaserBlockAvailable=this.isTeaserBlockAvailable();a.isBankersShown=this.isBankersShown();a.isBankersAvailable=this.isBankersAvailable();a.isEachWayAvailable=this.isEachWayAvailable();a.liveMode=this.getSlipRef().getLiveMode();a.freeBetMode=this.getSlipRef().getFreeBetMode();this.getSlipRef().setMaxStakeShown(this.getSlipRef().isMaxStakeShown()&&visitor.isLoggedIn());a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.allselectionCount=this._allSelectionsCounter;a.hotComboAvailable=this._hotComboAvailable;if(this.getSlipRef().getLiveMode()==0){a.showEachWayHelpBlock=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).showEachWayHelpBlock"}else{a.showEachWayHelpBlock=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).showEachWayHelpBlock"}if(this.getSlipRef().getLiveMode()==0){a.editSelectionChecked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editSelectionChecked"}else{a.editSelectionChecked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editSelectionChecked"}if(this.getSlipRef().getLiveMode()==0){a.editBankerChecked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editBankerChecked"}else{a.editBankerChecked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editBankerChecked"}if(this.getSlipRef().getLiveMode()==0){a.editTeaserChecked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editTeaserChecked"}else{a.editTeaserChecked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editTeaserChecked"}if(this.getSlipRef().getLiveMode()==0){a.editEachWayChecked=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editEachWayChecked"}else{a.editEachWayChecked=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editEachWayChecked"}if(this.getSlipRef().getLiveMode()==0){a.showAditionalHelpBlock=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).showAditionalHelpBlock"}else{a.showAditionalHelpBlock=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).showAditionalHelpBlock"}if(this.getSlipRef().getLiveMode()==0){a.editStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editStake"}else{a.editStake=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editStake"}if(this.getSlipRef().getLiveMode()==0){a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder"}else{a.stakeTabOrder=SlipConstants.GLOBAL_LIVE_SLIP+".stakeTabOrder"}if(this.getSlipRef().getLiveMode()==0){a.removeSelection=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).removeSelection"}else{a.removeSelection=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).removeSelection"}this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());this._stakeBoxRegister.resetStakeBoxRegister();a.stakeBoxRegister=this._stakeBoxRegister;a.checkedSelectionsNumber=this.getCheckedSelectionsCounter();a.allComboSelections=this._allComboSelections;if(this.getSlipRef().getLiveMode()==0){a.editAllComboSelections=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editAllComboSelections";a.notifyUserActivity=SlipConstants.GLOBAL_BET_SLIP+".notifyUserActivity"}else{a.editAllComboSelections=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL).editAllComboSelections";a.notifyUserActivity=SlipConstants.GLOBAL_LIVE_SLIP+".notifyUserActivity"}if(this.getSlipRef().getLiveMode()==1){a.liveOddsNotificationRegister=this._liveOddsNotificationRegister}return a};SelectionPanel.prototype.liveOddsShowArrowUp=function(a){if(!this._liveOddsNotificationRegister.containsNotification(a)){return false}else{return this._liveOddsNotificationRegister.getNotification(a).isArrowUp()}};SelectionPanel.prototype.liveOddsShowArrowDown=function(a){if(!this._liveOddsNotificationRegister.containsNotification(a)){return false}else{return this._liveOddsNotificationRegister.getNotification(a).isArrowDown()}};SelectionPanel.prototype.getNextStakeBoxName=function(b){for(var a=b+1;a<=this.getMaxStakeBoxTabIndex();a++){if(typeof(this._stakeBoxRegister[a])!="undefined"){return this._stakeBoxRegister[a]}}return null};SelectionPanel.prototype.getSelections=function(){return this._selections};SelectionPanel.prototype.getSortedSelections=function(){return this._sortedSelections};SelectionPanel.prototype.markSelection=function(a){if(this.getSlipRef().getMobileMode()==1){return}var b="#odd_"+a;if($(b)!=null){$(b).removeClass("bfhref");$(b).addClass("bfahref")}};SelectionPanel.prototype._markoutSelection=function(a){if(this.getSlipRef().getMobileMode()==1){return}var b="#odd_"+a;if($(b)!=null){$(b).removeClass("bfahref");$(b).addClass("bfhref")}};SelectionPanel.prototype._cloneObject=function(a){var b={};b.prototype=a.prototype;for(property in a){b[property]=a[property]}return b};SelectionPanel.prototype._addSelection=function(h,q,v,t,i,k,u,r,A,g,z,f,b,x,y,d,s,w,l,m,j,e,n,a,c){this.getSlipRef().getLogger().log("add selection begin");if(this.getSlipRef().getExitFreeBetModeOnNextClick()){this.getSlipRef().setExitFreeBetModeOnNextClick(false);this.getSlipRef().exitFreeBetMode()}if(j==SlipConstants.IS_NOT_HOT_COMBO&&this._hotComboAvailable){this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).removeHotCombo()}if(this._selections[h]!=null){if(this.getSlipRef().getMobileMode()!=1){this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL).updateChangeId();this.removeSelection(h)}}else{if(this._allSelectionsCounter>=SlipConstants.MAX_SLIP_SELECTIONS){if(this.getSlipRef().getMobileMode()!=1){alert(this.getSlipRef().getTranslations()["MSG3_SLIP_4"])}else{this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).setExternalErrorMessage(this.getSlipRef().getTranslations()["MSG3_SLIP_4"]);this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}return}var B=this._cloneObject(v[q]);var C=new Selection();C.setOutcomeId(h);C.setEventId(q);C.setEventRef(B);C.setOutcomeName(t);C.setOutcomeOdd(i);C.setOutcomeRealOdd(k);C.setOutcomeOddHighPrecision(u);C.setOutcomeFractionOdd(r);C.setOutcomeCatId(A);C.setRiskFactorSingles(g);C.setRiskFactorCombos(z);C.setTotalSingleStake(f);C.setOutcomeMaxLoss(b);C.setSp(x);C.setXCastAnyOrder(y);C.setEachWayPossible(d);C.setEachWayId(s);C.setEachWayOutcomeChangeId(n);C.setEachWayOdd(w);C.setTeaserPossible(l);C.setTeaserData(m);C.setOutcomeChangeId(e);C.setTrnChangeId(e);C.setEventChangeId(B.getChangeId());C.setEventTrnChangeId(e);C.setStake(0);C.setOrderPosition(this._sortedSelections.length);C.setSuggestedSelection(a);C.setCTASelection(c);if(C.isXCastAnyOrder()){C.setBetsCount(h.length)}else{C.setBetsCount(1)}if(this._validateTeasers(C.getEventRef().getMotherEventId(),false)){C.setTeaserChecked(true)}else{C.setTeaserChecked(false)}if(C.isTeaserPossible()==false){C.setTeaserChecked(false)}if(C.getEventRef().getComboFactor()==1||this._currentCheckedSelectionsCounter>=SlipConstants.MAX_COMBO_SELECTIONS){C.setSelectionChecked(false)}else{C.setSelectionChecked(true)}C.setOutcomeStatus(0);C.setEventStatus(0);this.markSelection(h);if(this._selections[h]==null){this._sortedSelections.push(h)}this._selections[h]=C;if(C.isTeaserPossible()&&C.isTeaserChecked()){this._isCheckedTeaserSelectionJustAdded=true}this.getSlipRef().getPanelReference(SlipConstants.SELECTION_REPORT_PANEL).updateChangeId();this._allSelectionsCounter++;this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes();var o=new ExternalDataChangedContext();o.setType(ExternalDataChangedContextType.NUM_SELECTIONS_CHANGED);this.externalDataChanged(o);if(this._allSelectionsCounter==1){this.getSlipRef().activateView(SlipView.SELECTION);this.getSlipRef().getDisplay().refresh()}if(this.getSlipRef().getLiveMode()==1&&this.getSlipRef().getActiveView()==SlipView.SELECTION&&visitor.getLiveSlipOddsAutoUpdate()==1){this._subscribeForOddChangeNotifications(C.getOutcomeId())}this._isCheckedTeaserSelectionJustAdded=false}this.markFirstFreeBetSelection();if(this.getSlipRef().getActiveView()!=SlipView.SELECTION&&this.getSlipRef().getActiveView()!=SlipView.INITIAL){this.getSlipRef().activateView(SlipView.SELECTION);if(this.getSlipRef().getLiveMode()==1){this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).setLiveChecks(0)}this.getSlipRef().getDisplay().refresh()}if(this.getSlipRef().getWindowType()!=SlipConstants.WINDOW_TYPE_IN_CLIENT){this.getSlipRef().getPanelReference(SlipConstants.HINT_PANEL).externalDataChanged()}this.getSlipRef().getLogger().log("add selection almost end 1");this.getSlipRef().notifyUserActivity();this.getSlipRef().getLogger().log("add selection almost end 2");this.getSlipRef().persist();this.getSlipRef().getLogger().log("add selection almost end 3");this._notifyListenersForEvent(new SlipActionEvent(SlipActionEvent.SELECTION_ADDED));this.getSlipRef().getLogger().log("add selection end")};SelectionPanel.prototype.markFirstFreeBetSelection=function(){if(this.getSlipRef().getFreeBetMode()==SlipConstants.FREE_BET_MODE_OFF){return false}this.clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();if(this.getSlipRef().getLiveMode()==0&&this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()){var b=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).getHotComboData();b.setHotComboStake(visitor.getFreeBetAmount());b.setHotComboDisplayStake(visitor.getFreeBetAmount())}else{for(var c in this._sortedSelections){var a=this._sortedSelections[c];var d=this._selections[a];if(d.isXCastAnyOrder()||d.getEventRef().getComboFactor()>1){continue}d.setStake(visitor.getFreeBetAmount());d.setDisplayStake(visitor.getFreeBetAmount());break}}this.externalDataChanged();this.getSlipRef().getDisplay().refresh()};SelectionPanel.prototype.addSimpleSelection=function(d,a,e,j,c,l,k,i,g,b,m,h,f){this._addSelection(d,a,e,j,c,c,l,k,i,g,b,m,h,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,SlipConstants.NO_CHANGE_ID,false,false)};SelectionPanel.prototype.addSuggestedSelection=function(d,a,e,j,c,l,k,i,g,b,m,h,f){this._addSelection(d,a,e,j,c,c,l,k,i,g,b,m,h,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,SlipConstants.NO_CHANGE_ID,true,false)};SelectionPanel.prototype.addCTASelection=function(d,a,e,j,c,l,k,i,g,b,m,h,f){this._addSelection(d,a,e,j,c,c,l,k,i,g,b,m,h,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,SlipConstants.NO_CHANGE_ID,false,true)};SelectionPanel.prototype.addEachWaySelection=function(d,a,e,k,c,n,m,j,g,b,q,i,h,l,f,o){this._addSelection(d,a,e,k,c,c,n,m,j,g,b,q,i,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_POSSIBLE,h,l,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,o,false,false)};SelectionPanel.prototype.addSPSelection=function(d,a,e,j,c,l,k,i,g,b,m,h,f){this._addSelection(d,a,e,j,SlipConstants.SP_OUTCOME_ODD,c,l,k,i,g,b,m,h,SlipConstants.IS_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,SlipConstants.NO_CHANGE_ID,false,false)};SelectionPanel.prototype.addSPEachWaySelection=function(d,a,e,k,c,n,m,j,g,b,q,i,h,l,f,o){this._addSelection(d,a,e,k,SlipConstants.SP_OUTCOME_ODD,c,n,m,j,g,b,q,i,SlipConstants.IS_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_POSSIBLE,h,l,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,f,o,false,false)};SelectionPanel.prototype.addXCastSelection=function(j,a,e,i,d,m,l,h,f,b,n,g,q,o){var c=$.evalJSON(j);var k=$.evalJSON(o);this._addSelection(c,a,e,i,SlipConstants.SP_OUTCOME_ODD,d,m,l,h,f,b,n,g,SlipConstants.IS_SP,q,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_NOT_HOT_COMBO,k,SlipConstants.NO_CHANGE_ID,false,false)};SelectionPanel.prototype.addTeaserSelection=function(e,a,f,k,c,m,l,j,h,b,n,i,d,g){this._addSelection(e,a,f,k,c,c,m,l,j,h,b,n,i,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_POSSIBLE,d,SlipConstants.IS_NOT_HOT_COMBO,g,SlipConstants.NO_CHANGE_ID,false,false)};SelectionPanel.prototype.addHotComboSelection=function(b,c,a,d,e){this._addSelection(b,c,a,d,e,e,0,"",null,1,1,0,1,SlipConstants.IS_NOT_SP,SlipConstants.IS_NOT_X_CAST_ANY_ORDER,SlipConstants.EACH_WAY_NOT_POSSIBLE,SlipConstants.EACH_WAY_ID_NOT_AVAILABLE,SlipConstants.EACH_WAY_ODD_NOT_AVAILABLE,SlipConstants.TEASER_NOT_POSSIBLE,SlipConstants.TEASER_DATA_NOT_AVAILABLE,SlipConstants.IS_HOT_COMBO,SlipConstants.NO_CHANGE_ID,SlipConstants.NO_CHANGE_ID,false,false)};SelectionPanel.prototype.getLiveOddsNotificationRegister=function(){return this._liveOddsNotificationRegister};SelectionPanel.prototype.addDBReturnedSelectionMaxStake=function(b,a){this._DBReturnedSelectionsMaxStakes[b]=a};SelectionPanel.prototype.getDBReturnedSelectionMaxStake=function(a){return this._DBReturnedSelectionsMaxStakes[a]};SelectionPanel.prototype.getSelectionsValidationsResult=function(){return this._selectionsValidationsResult};SelectionPanel.prototype.getMinStakeFactorPerSport=function(){return this._minStakeFactorPerSport};SelectionPanel.prototype.getMinLeagueDiscountFactor=function(){return this._minLeagueDiscountFactor};SelectionPanel.prototype.getMinUserOutcomeRiskFactor=function(){return this._minUserOutcomeRiskFactor};SelectionPanel.prototype._calculateSelectionMaxStake=function(c){var b;var a=this.getDBReturnedSelectionMaxStake(c.getOutcomeId());if(typeof(a)=="undefined"){var d;if(c.isSP()){d=Math.max(c.getOutcomeMaxLoss()/(c.getOutcomeRealOdd()-1),this.getSlipRef().getConfigs()["MIN_MAX_SINGLE_STAKE"])}else{if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){d=Math.max(c.getOutcomeMaxLoss()/(c.getOutcomeOddHighPrecision()-1),this.getSlipRef().getConfigs()["MIN_MAX_SINGLE_STAKE"])}else{d=Math.max(c.getOutcomeMaxLoss()/(c.getOutcomeOdd()-1),this.getSlipRef().getConfigs()["MIN_MAX_SINGLE_STAKE"])}}b=(d*this.getSportStakeFactor(c.getEventRef().getSportId())-c.getTotalSingleStake())*visitor.getBaseFxRate();b=Math.max(b,0)}else{b=a}return Math.round(b)};SelectionPanel.prototype.getSportStakeFactor=function(a){var b;if(this.getSlipRef().getLiveMode()==1){b=visitor.getLiveSportStakeFactors()[a]}else{b=visitor.getSportStakeFactors()[a]}if(typeof(b)=="undefined"){b=visitor.getUserDiscountFactor()}return b};SelectionPanel.prototype._calculateMinStakeFactorPerSport=function(){var a=1000;for(var b in this._checkedSelections){a=Math.min(a,visitor.getSportStakeFactors()[this._checkedSelections[b].getEventRef().getSportId()])}return a};SelectionPanel.prototype._calculateMinLeagueDiscountFactor=function(){var b=1000;for(var a in this._checkedSelections){b=Math.min(b,this._checkedSelections[a].getEventRef().getLeagueDiscountFactor())}return b};SelectionPanel.prototype._calculateMinUserOutcomeRiskFactor=function(){var b=1000;for(var a in this._checkedSelections){b=Math.min(b,this._checkedSelections[a].getRiskFactorCombos())}return b};SelectionPanel.prototype._fetchUserOutcomeRisks=function(){var c=visitor.getUserOutcomeRisks();for(var a in c){var b=this._selections[a];if(typeof(b)!="undefined"){b.setTotalSingleStake(c[a].totalSingleStake);b.setRiskFactorCombos(c[a].riskFactorCombos)}}};SelectionPanel.prototype._checkSelections=function(){var d=0;var c=0;var f=false;var g=false;var h=0;var j=0;var i=false;var e=0;var k=0;var b=false;this._checkedSelections=new Object();for(var a in this._selections){if(this._selections[a].isSelectionChecked()&&!this._selections[a].isLockedSelection()){this._checkedSelections[a]=this._selections[a];if(this._selections[a].getEventRef().getComboFactor()!=1){e++}}if(this._selections[a].getEventRef().getComboFactor()!=1&&!this._selections[a].isLockedSelection()){k++}if(this._selections[a].getEventRef().isBankersOk()){d++}if(this._selections[a].isBankerChecked()){j++}if(this._selections[a].isEachWayPossible()){i=true}if(this._selections[a].isEachWayChecked()){g=true}if(this._selections[a].isSP()){f=true;if(this._selections[a].isSelectionChecked()){b=true}}if(this._selections[a].isTeaserChecked()){c++}if(this._selections[a].isTeaserPossible()){h++}}this.setCheckedSelectionsCounter(e);if(d>1){this.setBankersAvailable(true)}else{this.setBankersAvailable(false)}this.setBankersCounter(d);this.setCheckedBankersCount(j);this.setEachWayAvailable(i);this.setSPAvailable(f);this.setSPAvailableAndChecked(b);this.setCheckedEachWaySelection(g);this._checkedTeasersCount=c;this._possibleTeasersCount=h;this._allComboSelections=k};SelectionPanel.prototype._setProblematicSelections=function(b){for(var a in this._selections){if(typeof(b)!="undefined"&&jQuery.inArray(a,b)!=-1){this._selections[a].setProblematic(true)}else{this._selections[a].setProblematic(false)}}};SelectionPanel.prototype.getCheckedTeasersCount=function(){return this._checkedTeasersCount};SelectionPanel.prototype.areCheckedTeasersEnough=function(){return(this._checkedTeasersCount>1)};SelectionPanel.prototype.arePossibleTeasersEnough=function(){return(this._possibleTeasersCount>1)};SelectionPanel.prototype.setTeaserSelectionsDefaultState=function(){var b=0;var c=new Object();for(var a in this._selections){if(typeof(this._selections[a])=="function"){continue}if(this._selections[a].isTeaserPossible()&&c[this._selections[a].getEventRef().getMotherEventId()]!=1&&b<this.getSlipRef().getConfigs()["MAX_TEASER_SELECTIONS"]){this._selections[a].setTeaserChecked(true);c[this._selections[a].getEventRef().getMotherEventId()]=1;b++}else{this._selections[a].setTeaserChecked(false)}}this._checkedTeasersCount=b};SelectionPanel.prototype._validateTeasers=function(a,c){if(this._checkedTeasersCount>=this.getSlipRef().getConfigs()["MAX_TEASER_SELECTIONS"]){if(c){if(this.getSlipRef().getMobileMode()==1){this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).setExternalErrorMessage(this.getSlipRef().getTranslations()["TEASER_MAX_SELECTIONS_EXCEEDED"]);this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}else{alert(this.getSlipRef().getTranslations()["TEASER_MAX_SELECTIONS_EXCEEDED"])}}return false}for(var b in this._selections){if(this._selections[b].isTeaserPossible()&&this._selections[b].isTeaserChecked()&&this._selections[b].getEventRef().getMotherEventId()==a){if(c){if(this.getSlipRef().getMobileMode()==1){this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).setExternalErrorMessage(this.getSlipRef().getTranslations()["TEASER_ALREADY_SELECTED_GAME"]);this.getSlipRef().getPanelReference(SlipConstants.ALERT_PANEL).externalDataChanged()}else{alert(this.getSlipRef().getTranslations()["TEASER_ALREADY_SELECTED_GAME"])}}return false}}return true};SelectionPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("SelectionPanel.prototype.fetchExternalData begin");var a=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);this.setBankersShown(a.isBankersLinkClicked());if(this.getSlipRef().getLiveMode()==0){this._isAddTeaserClicked=a.isAddTeaserClicked()||this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).isAddTeaserClicked();this._isTeaserBlockVisible=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getDisplay().isVisible()||this._isAddTeaserClicked;this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()}this._fetchUserOutcomeRisks();this.getSlipRef().getLogger().log("SelectionPanel.prototype.fetchExternalData end")};SelectionPanel.prototype.localDataChanged=function(a){this.getSlipRef().getLogger().log("SelectionPanel.prototype.localDataChanged begin");this._checkSelections();this._selectionsValidationsResult=this._validateSelections();this._setProblematicSelections(this._selectionsValidationsResult.getConflictedSelections());this._calculateSelections();this._minStakeFactorPerSport=this._calculateMinStakeFactorPerSport();this._minLeagueDiscountFactor=this._calculateMinLeagueDiscountFactor();this._minUserOutcomeRiskFactor=this._calculateMinUserOutcomeRiskFactor();if(this._isAddTeaserClicked){this.setTeaserSelectionsDefaultState()}if(typeof(a)=="undefined"){var a=new ExternalDataChangedContext();var b=new Object();if(this._liveComboOddClearNotification){b.showArrowUp=false;b.showArrowDown=false;a.setType(ExternalDataChangedContextType.LIVE_ODDS_NOTIFICATION);a.setData(b)}else{if(this._liveOddsProcessedOutcomeId!=null&&this._selections[this._liveOddsProcessedOutcomeId].getEventRef().getComboFactor()!=1&&this._selections[this._liveOddsProcessedOutcomeId].isSelectionChecked()){var c=this._liveOddsNotificationRegister.getNotification(this._liveOddsProcessedOutcomeId);if(c!=null){b.showArrowUp=c.isArrowUp();b.showArrowDown=c.isArrowDown();a.setType(ExternalDataChangedContextType.LIVE_ODDS_NOTIFICATION);a.setData(b)}}else{a.setType(ExternalDataChangedContextType.GENERIC)}}}this._teaserBlockAvailable=this.arePossibleTeasersEnough()&&this._isTeaserBlockVisible;if(!this._teaserSelectionJustChecked){this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).externalDataChanged(a);this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL).externalDataChanged();if(this.getSlipRef().getLiveMode()==0){this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).externalDataChanged()}this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();if(this.getSlipRef().getWindowType()!=SlipConstants.WINDOW_TYPE_IN_CLIENT){this.getSlipRef().getPanelReference(SlipConstants.HINT_PANEL).externalDataChanged()}}if(this.getSlipRef().getLiveMode()==0&&(this._teaserSelectionJustChecked||this._selectionJustRemoved||this._isCheckedTeaserSelectionJustAdded||this._allSelectionsCounter==0||this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserStakeJustCleared())){this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).externalDataChanged()}this._isAddTeaserClicked=false;if(!this._isEdittingStakeBox){this.getDisplay().refresh()}this.getSlipRef().getLogger().log("SelectionPanel.prototype.localDataChanged end")};SelectionPanel.prototype.isCheckedTeaserSelectionJustAdded=function(){return this._isCheckedTeaserSelectionJustAdded};SelectionPanel.prototype.setBankersShown=function(a){this._bankersShown=a};SelectionPanel.prototype.isBankersShown=function(){return this._bankersShown};SelectionPanel.prototype.editBankersShown=function(a){this._bankersShown=a;this.localDataChanged()};SelectionPanel.prototype.setBankersAvailable=function(a){this._bankersAvailable=a};SelectionPanel.prototype.isBankersAvailable=function(){return this._bankersAvailable};SelectionPanel.prototype.setTeasersShown=function(a){this._teasersShown=a};SelectionPanel.prototype.isTeasersShown=function(){return this._teasersShown};SelectionPanel.prototype.editTeasersShown=function(a){this._teasersShown=a;this.localDataChanged()};SelectionPanel.prototype.setTeaserData=function(a){this._teaserData=a};SelectionPanel.prototype.getTeaserData=function(){return this._teaserData};SelectionPanel.prototype.setTeaserBlockAvailable=function(a){this._teaserBlockAvailable=a};SelectionPanel.prototype.isTeaserBlockAvailable=function(){return this._teaserBlockAvailable};SelectionPanel.prototype.setEachWayAvailable=function(a){this._eachWayAvailable=a};SelectionPanel.prototype.isEachWayAvailable=function(){return this._eachWayAvailable};SelectionPanel.prototype.setCheckedEachWaySelection=function(a){this._checkedEachWaySelection=a};SelectionPanel.prototype.hasCheckedEachWaySelection=function(){return this._checkedEachWaySelection};SelectionPanel.prototype.setSPAvailable=function(a){this._SPAvailable=a};SelectionPanel.prototype.isSPAvailable=function(){return this._SPAvailable};SelectionPanel.prototype.setSPAvailableAndChecked=function(a){this._SPAvailableAndChecked=a};SelectionPanel.prototype.isSPAvailableAndChecked=function(){return this._SPAvailableAndChecked};SelectionPanel.prototype.setBankersCounter=function(a){this._availableBankersCounter=a};SelectionPanel.prototype.getBankersCounter=function(){return this._availableBankersCounter};SelectionPanel.prototype.getSelectionsCount=function(){return this._allSelectionsCounter};SelectionPanel.prototype.setCheckedSelectionsCounter=function(a){this._currentCheckedSelectionsCounter=a};SelectionPanel.prototype.getCheckedSelectionsCounter=function(){return this._currentCheckedSelectionsCounter};SelectionPanel.prototype.isSelectionInSlip=function(a){if(this._allSelectionsCounter>0&&this._selections[a]!=null){return true}else{return false}};SelectionPanel.prototype.setSelectionStake=function(b,a){var c=this.getSlipRef().makeStake(a);if(c>0){this._selections[b].setStake(c);this._selections[b].setDisplayStake(a);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist()}};SelectionPanel.prototype.editSelectionChecked=function(c,b){if(b==true&&this._currentCheckedSelectionsCounter>=SlipConstants.MAX_COMBO_SELECTIONS){alert(this.getSlipRef().getTranslations()["MSG2_SLIP_22"].replace(/[$]Number/,SlipConstants.MAX_COMBO_SELECTIONS));return false}this._selections[c].setSelectionChecked(b);if(b==false){this._selections[c].setBankerChecked(b)}this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes();var a=new ExternalDataChangedContext();a.setType(ExternalDataChangedContextType.NUM_SELECTIONS_CHANGED);this.localDataChanged(a);this.getSlipRef().persist();this.markFirstFreeBetSelection();return true};SelectionPanel.prototype.setCheckedBankersCount=function(a){this._checkedBankersCount=a};SelectionPanel.prototype.getCheckedBankersCount=function(){return this._checkedBankersCount};SelectionPanel.prototype.editStake=function(a,b){this._isEdittingStakeBox=true;var c=this.getDataModel();if(c.freeBetMode==1){this.clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).localDataChanged()}this._selections[a].setStake(this.getSlipRef().makeStake(b));this._selections[a].setDisplayStake(b);this.localDataChanged();this.getSlipRef().persist();this._isEdittingStakeBox=false};SelectionPanel.prototype.clearAllStakes=function(){this._isEdittingStakeBox=true;for(var a in this._selections){this._selections[a].setStake(0);this._selections[a].setDisplayStake("")}this._isEdittingStakeBox=false};SelectionPanel.prototype.editBankerChecked=function(a,b){this._selections[a].setBankerChecked(b);this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();if(b==true){this._selections[a].setSelectionChecked(b)}this.localDataChanged();this.getSlipRef().persist()};SelectionPanel.prototype.editTeaserChecked=function(a){if(this._selections[a].isTeaserChecked()==false){if(this._validateTeasers(this._selections[a].getEventRef().getMotherEventId(),true)){this._teaserSelectionJustChecked=true;this._selections[a].setTeaserChecked(true)}else{return false}}else{this._teaserSelectionJustChecked=true;this._selections[a].setTeaserChecked(false)}this.localDataChanged();this._teaserSelectionJustChecked=false;this.getSlipRef().persist();return true};SelectionPanel.prototype.editEachWayChecked=function(a){this._selections[a].setEachWayChecked(!(this._selections[a].isEachWayChecked()));this.localDataChanged();this.getSlipRef().persist()};SelectionPanel.prototype.setEachWay=function(a,b){this._selections[a].setEachWayChecked(b);this.localDataChanged();this.getSlipRef().persist()};SelectionPanel.prototype.showAditionalHelpBlock=function(a,b){return over_text_desc(unescape(a),b)};SelectionPanel.prototype.showEachWayHelpBlock=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["MSG_EACHWAY_SLIP"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["MSG_EACHWAY_EXPLANATION_SLIP"]+"</td></tr></table>")};SelectionPanel.prototype.setPossiblePayout=function(a){this._possiblePayout=a};SelectionPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};SelectionPanel.prototype.setPossiblePoints=function(a){this._possiblePoints=a};SelectionPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};SelectionPanel.prototype.setTotalBets=function(a){this._totalBets=a};SelectionPanel.prototype.getTotalBets=function(){return this._totalBets};SelectionPanel.prototype.setTotalCost=function(a){this._totalCost=a};SelectionPanel.prototype.getTotalCost=function(){return this._totalCost};SelectionPanel.prototype.getTotalTax=function(){return this._totalTax};SelectionPanel.prototype.setTotalTax=function(a){this._totalTax=a};SelectionPanel.prototype._calculateSelections=function(){var h=0;var k=0;var c=0;var f=0;var g=0;for(var b in this._selections){var j=this._selections[b];if(j.isLockedSelection()){continue}var l=j.getStake()*j.getBetsCount();var a=0;if(j.isXCastAnyOrder()){a=l}else{a=j.getStyledOdd()*j.getStake();if(j.isEachWayChecked()){if(j.isSP()){a+=j.getStyledOdd()*j.getStake()}else{a+=j.getEachWayOdd()*j.getStake()}}}j.setPossiblePayout(a);h+=a;c+=l;if(l>0){k+=j.getBetsCount();var e=this.getSlipRef().calculatePoints(j.getStake(),j.getStyledOdd(),j.isSP(),visitor.getToBaseCurrencyFxRate());f+=e;if(j.isEachWayChecked()){var d=this.getSlipRef().calculatePoints(j.getStake(),j.getEachWayOdd(),j.isSP(),visitor.getToBaseCurrencyFxRate());f+=d;e+=d}j.setPossiblePoints(e)}j.setMaxStake(this._calculateSelectionMaxStake(j));if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var i=j.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);g+=(Math.round(i*100)/100)*j.getBetsCount()}}this.setPossiblePayout(h);this.setTotalBets(k);this.setTotalCost(c);this.setPossiblePoints(f);this.setTotalTax(g)};SelectionPanel.prototype.calculateRequestTeaserMaxStake=function(){this.getSlipRef().getLogger().log("SelectionPanel.prototype.calculateRequestTeaserMaxStake begin");var f=this._checkedTeasersCount;var j=null;var b=null;var a=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserMaxStakes();for(var c in this._selections){if(typeof(this._selections[c])=="function"){continue}var h=this._selections[c];if(h.isTeaserPossible()!=""&&h.isTeaserChecked()){var k=h.getEventRef().getSportId();var g=a[k][f];var d=h.getEventRef().getTeaserLeagueDiscountFactor();if(j==null||j>(g*d)){j=g*d}var e=this.getSportStakeFactor(k);if(b==null||b>e){b=e}}}this.getSlipRef().getLogger().log("SelectionPanel.prototype.calculateRequestTeaserMaxStake end");return Math.round(j*b*visitor.getBaseFxRate())};SelectionPanel.prototype.getSelectionJustRemoved=function(){return this._selectionJustRemoved};SelectionPanel.prototype.getTeaserSelectionJustChecked=function(){return this._teaserSelectionJustChecked};SelectionPanel.prototype._removeCheckedSelectionAPI=function(a){delete this._checkedSelections[a];this._currentCheckedSelectionsCounter--};SelectionPanel.prototype._removeSelectionAPI=function(b){var c=this._selections[b].getEventId();var a=this._selections[b].getOrderPosition();this._sortedSelections.splice(a,1);delete this._selections[b];this._allSelectionsCounter--;this._updateSelectionsOrder(a);this._removeCheckedSelectionAPI(b);this._markoutSelection(b);if(this.getSlipRef().getLiveMode()==1&&visitor.getLiveSlipOddsAutoUpdate()==1){this._unsubscribeForOddChangeNotifications(c,b)}this._liveOddsNotificationRegister.removeNotification(b);this._notifyListenersForEvent(new SlipActionEvent(SlipActionEvent.SELECTION_REMOVED))};SelectionPanel.prototype._updateSelectionsOrder=function(c){for(var a in this._selections){var b=this._selections[a];if(b.getOrderPosition()>c){b.setOrderPosition(b.getOrderPosition()-1)}}};SelectionPanel.prototype.removeSelection=function(b){this._selectionJustRemoved=true;this._removeSelectionAPI(b);this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes();var a=new ExternalDataChangedContext();a.setType(ExternalDataChangedContextType.NUM_SELECTIONS_CHANGED);this.localDataChanged(a);if(this._allSelectionsCounter==0){this.getSlipRef().activateView(SlipView.INITIAL);this.getSlipRef().getDisplay().refresh()}this.getSlipRef().persist();this._selectionJustRemoved=false;this.markFirstFreeBetSelection()};SelectionPanel.prototype.removeAllSelectionsAPI=function(){for(var a in this._selections){this._removeSelectionAPI(a)}};SelectionPanel.prototype.removeAllSelections=function(){if(this._hotComboAvailable){this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).removeHotCombo()}else{this.removeAllSelectionsAPI();this._selectionJustRemoved=true;this.localDataChanged()}this.getSlipRef().activateView(SlipView.INITIAL);this.getSlipRef().getDisplay().refresh();this.getSlipRef().persist();this._selectionJustRemoved=false};SelectionPanel.prototype.getCheckedSelections=function(){return this._checkedSelections};SelectionPanel.prototype._validateSelections=function(){var d=new SelectionsValidationResult();var k=this._checkForComboFactorConflict();if(k.hasConflict()){d.setConflict(true);d.setConflictCause(k.getConflictCause());d.setMultiWayPossible(k.isMultiWayPossible());d.setConflictMessage(k.getConflictMessage());return d}var b=this._checkForXCastAnyOrderConflict();if(b.hasConflict()){d.setConflict(true);d.setConflictCause(b.getConflictCause());d.setMultiWayPossible(false);d.setConflictMessage(b.getConflictMessage());return d}var m=this._checkForSameFamilyConflict();var a=this._checkForSameCatIdsConflict();if(m.hasConflict()||a.hasConflict()){var o=new Object();var q=new Array();var c=new Array();for(var l in m.getConflictedSelectionPairs()){o[l]=l.split(SlipConstants.CONFLICTED_SELECTION_PAIR_DELIMITER)}for(var l in a.getConflictedSelectionPairs()){o[l]=l.split(SlipConstants.CONFLICTED_SELECTION_PAIR_DELIMITER)}for(var g in o){var e=o[g];q[q.length]=e;for(var f=0;f<2;f++){var h=e[f];if(jQuery.inArray(h,c)==-1){c[c.length]=h}}}d.setConflict(true);d.setConflictedSelectionPairs(q);d.setConflictedSelections(c);d.setConflictCause(SelectionsConflictCause.SAME_FAMILY_OR_CAT_ID);var n=this.getSlipRef().getNumberOfCombinations(this._currentCheckedSelectionsCounter,2,0);if(q.length>0&&q.length<n&&k.isMultiWayPossible()&&!this.isSPAvailableAndChecked()&&this._currentCheckedSelectionsCounter<=SlipConstants.MAX_CHECKED_SELECTIONS_FOR_MULTI_WAY){d.setMultiWayPossible(true);d.setConflictMessage(this.getSlipRef().getTranslations()["SAME_EVENT_TEAM_CONFLICT_MSG"])}else{d.setMultiWayPossible(false);if(typeof(m.getConflictMessage())!="undefined"){d.setConflictMessage(m.getConflictMessage())}else{if(typeof(a.getConflictMessage())!="undefined"){d.setConflictMessage(a.getConflictMessage())}}}}else{d.setConflict(false);d.setMultiWayPossible(false)}return d};SelectionPanel.prototype._checkForSameCatIdsConflict=function(){var e=new SelectionsValidationResult();var m=new Object();var n=false;var o=new Object();for(var d in this._checkedSelections){for(var b in this._checkedSelections){if(typeof(m[b])!="undefined"||d==b){continue}else{m[d]=d}var h=this._checkedSelections[d];var g=this._checkedSelections[b];if(h.getEventRef().getCatalogIds()==""||g.getEventRef().getCatalogIds()==""){continue}var q=h.getEventRef().getCatalogIds().split(SlipConstants.CATALOG_IDS_DELIMITER);var l=g.getEventRef().getCatalogIds().split(SlipConstants.CATALOG_IDS_DELIMITER);var f=false;for(var k=0;k<q.length;k++){if(jQuery.inArray(q[k],l)!=-1){f=true}}if(f){var a=this.getSlipRef().getGlobalBettingConstants();var c=h.getEventRef().getType();var j=g.getEventRef().getType();if(h.getEventRef().isSameTeamComboPossible()&&g.getEventRef().isSameTeamComboPossible()){if(c==a.EVENT_TYPE_VERSUS&&j==a.EVENT_TYPE_VERSUS||typeof(h.getEventRef().getMotherEventId())!="undefined"&&typeof(g.getEventRef().getMotherEventId())!="undefined"&&h.getEventRef().getMotherEventId()==g.getEventRef().getMotherEventId()&&(c==a.EVENT_TYPE_VERSUS&&j==a.EVENT_TYPE_UNDEROVER||j==a.EVENT_TYPE_VERSUS&&c==a.EVENT_TYPE_UNDEROVER||c==a.EVENT_TYPE_UNDEROVER&&(j==a.EVENT_TYPE_HCAS_GAMES||j==a.EVENT_TYPE_ASIAN_HANDI)||j==a.EVENT_TYPE_UNDEROVER&&(c==a.EVENT_TYPE_HCAS_GAMES||c==a.EVENT_TYPE_ASIAN_HANDI))){f=false}}}if(f){n=true;if(typeof(e.getConflictMessage())=="undefined"){var i=this.getSlipRef().getTranslations();e.setConflictMessage(h.getEventRef().getName()+i.MSG5_SLIP_22+g.getEventRef().getName()+i.MSG6_SLIP_22)}o[d+"-"+b]=""}}}if(n){e.setConflict(true);e.setConflictCause(SelectionsConflictCause.SAME_CAT_ID);e.setConflictedSelectionPairs(o)}else{e.setConflict(false)}return e};SelectionPanel.prototype._checkForSameFamilyConflict=function(){var e=new SelectionsValidationResult();var m=new Object();var k=new Object();var l=false;for(var d in this._checkedSelections){for(var b in this._checkedSelections){if(typeof(k[b])!="undefined"||d==b){continue}else{k[d]=d}var h=this._checkedSelections[d];var g=this._checkedSelections[b];if(typeof(h.getEventRef().getMotherEventId())!="undefined"&&typeof(g.getEventRef().getMotherEventId())!="undefined"&&h.getEventRef().getMotherEventId()==g.getEventRef().getMotherEventId()){var f=true;if(h.getEventRef().isSameFamilyComboPossible()&&g.getEventRef().isSameFamilyComboPossible()){var c=h.getEventRef().getType();var j=g.getEventRef().getType();var a=this.getSlipRef().getGlobalBettingConstants();if((c==a.EVENT_TYPE_VERSUS&&j==a.EVENT_TYPE_UNDEROVER)||(c==a.EVENT_TYPE_UNDEROVER&&j==a.EVENT_TYPE_VERSUS)){f=false}else{if(c==a.EVENT_TYPE_UNDEROVER&&(j==a.EVENT_TYPE_HCAS_GAMES||j==a.EVENT_TYPE_ASIAN_HANDI)){f=false}else{if(j==a.EVENT_TYPE_UNDEROVER&&(c==a.EVENT_TYPE_HCAS_GAMES||c==a.EVENT_TYPE_ASIAN_HANDI)){f=false}}}}if(f){l=true;if(typeof(e.getConflictMessage())=="undefined"){var i=this.getSlipRef().getTranslations();if(h.getEventRef().getId()==g.getEventRef().getId()){e.setConflictMessage(i.MSG17_SLIP_22+i.MSG3_SLIP_22+h.getEventRef().getName()+i.MSG7_SLIP_22)}else{e.setConflictMessage(i.MSG17_SLIP_22+h.getEventRef().getName()+i.MSG5_SLIP_22+g.getEventRef().getName()+i.MSG6_SLIP_22)}}m[d+"-"+b]=""}}}}if(l){e.setConflict(true);e.setConflictCause(SelectionsConflictCause.SAME_FAMILY);e.setConflictedSelectionPairs(m)}else{e.setConflict(false)}return e};SelectionPanel.prototype._checkForComboFactorConflict=function(){var b=new SelectionsValidationResult();var c=false;for(var d in this._selections){var e=this._selections[d].getEventRef().getComboFactor();if(this._selections[d].isSelectionChecked()&&e>1&&e>this._currentCheckedSelectionsCounter){var a=this.getSlipRef().getTranslations();b.setConflict(true);b.setConflictCause(SelectionsConflictCause.COMBO_FACTOR_MORE_THAN_1);b.setConflictMessage(this._selections[d].getOutcomeName()+a.MSG21_SLIP_22+e+a.MSG22_SLIP_22);b.setMultiWayPossible(false);return b}else{if(this._selections[d].isSelectionChecked()&&e>1&&e<=this._currentCheckedSelectionsCounter){c=true}}}if(c){b.setMultiWayPossible(false)}else{b.setMultiWayPossible(true)}b.setConflict(false);return b};SelectionPanel.prototype._checkForXCastAnyOrderConflict=function(){var b=this.getSlipRef().getTranslations();var a=new SelectionsValidationResult();for(var c in this._checkedSelections){if(this._checkedSelections[c].isXCastAnyOrder()){a.setConflict(true);a.setConflictCause(SelectionsConflictCause.X_CAST_ANY_ORDER);a.setConflictMessage(b.MSG17_SLIP_22+this._checkedSelections[c].getOutcomeName()+b.MSG19_SLIP_22);return a}}a.setConflict(false);return a};SelectionPanel.prototype.editAllComboSelections=function(d){if(d){if(this.getSelectionsCount()>SlipConstants.MAX_COMBO_SELECTIONS){alert(this.getSlipRef().getTranslations()["MSG2_SLIP_22"].replace(/[$]Number/,SlipConstants.MAX_COMBO_SELECTIONS));return false}var g=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL);var c=g.getComboTypes();var f=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);var e=f.getMultiWayCombinations();var b=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);var h=b.getTrixies();b.clearAllStakes();if(g.getDisplay().isVisible()){g.clearAllStakes()}else{f.clearAllStakes()}for(var a in this._selections){if(this._selections[a].getEventRef().getComboFactor()!=1&&!this._selections[a].isLockedSelection()){this._selections[a].setSelectionChecked(d)}}this.localDataChanged();this.getSlipRef().persist()}else{for(var a in this._selections){if(!this._selections[a].isLockedSelection()){this._selections[a].setSelectionChecked(d);this._selections[a].setBankerChecked(d)}}this.clearAllStakes();this.localDataChanged();this.getSlipRef().persist()}this.markFirstFreeBetSelection()};SelectionPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_selections","_sortedSelections","_teaserBlockAvailable","_bankersShown","_bankersAvailable","_eachWayAvailable","_allSelectionsCounter","_teasersShown","_currentCheckedSelectionsCounter","_totalCost","_totalTax","_possiblePoints","_possiblePayout","_totalBets","_allComboSelections","_isTeaserBlockVisible","_selectionsValidationsResult","_checkedSelections","_DBReturnedSelectionsMaxStakes","_hotComboAvailable","_eventChangeId","_eventTrnChangeId"])};SelectionPanel.prototype.notifyEventChange=function(b,a,d,c){if(this.getSlipRef().getLiveMode()==1&&(this.getSlipRef().getMobileMode()==1||(visitor.getLiveSlipOddsAutoUpdate()==1&&this._liveEventsSubscriptions[b]>0))){if(this.getSlipRef().getActiveView()==SlipView.SELECTION){this._processEventChangeNotification(b,a,d,c)}else{if(this.getSlipRef().getActiveView()==SlipView.CONFIRMATION||this.getSlipRef().getActiveView()==SlipView.REPORT){this._eventChangedNotificationsTemp[b]=new EventChangedNotification(a,d,c)}}}};SelectionPanel.prototype._processEventChangeNotification=function(d,c,f,e){this.getSlipRef().getLogger().log("SelectionPanel.prototype._processEventChangeNotification: start");var b=false;for(var a in this._selections){if(this._selections[a].getEventId()==d){if(e=="DELETE"){this._selections[a].setStake(0);this._selections[a].setDisplayStake("");this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes()}if(this._selections[a].getEventStatus()!=c){this._selections[a].setEventStatus(c);if(this._selections[a].isLockedSelection()){this._selections[a].setStake(0);this._selections[a].setDisplayStake("");this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes()}b=true}if(this._selections[a].getEventChangeId()!=f){this._selections[a].setEventChangeId(f);b=true}}}if(b){this.localDataChanged()}};SelectionPanel.prototype.notifyOutcomeChange=function(c,a,f,d,b,g,e){if(this.getSlipRef().getLiveMode()==1&&(this.getSlipRef().getMobileMode()==1||visitor.getLiveSlipOddsAutoUpdate()==1)&&this._selections[c]!=null){if(this.getSlipRef().getActiveView()==SlipView.SELECTION){this._processOutcomeChangedNotification(c,a,f,d,b,g,e)}else{if(this.getSlipRef().getActiveView()==SlipView.CONFIRMATION||this.getSlipRef().getActiveView()==SlipView.REPORT){this._outcomeChangedNotificationsTemp[c]=new OutcomeChangedNotification(c,a,f,d,b,g,e)}}}};SelectionPanel.prototype._processOutcomeChangedNotification=function(f,o,h,m,j,b,e){this.getSlipRef().getLogger().log("SelectionPanel.prototype._processOutcomeChangedNotification: oucomeId: "+f+" newOdd: "+o+" newStatus: "+j+" changeId: "+b+" command: "+e);var n=this._selections[f];var l=n.getOutcomeRealOdd();var g=n.getOutcomeStatus();var k=n.isLockedSelection();if(j!=g){n.setOutcomeStatus(j)}if(o!=l){n.setOutcomeOdd(o);n.setOutcomeRealOdd(o);n.setOutcomeOddHighPrecision(h);n.setOutcomeFractionOdd(m)}var a=false;if(!n.isLockedSelection()&&o!=l){var c=new LiveOddsNotificationRegisterEntry();c.setOutcomeId(f);if(o>l){c.setIsArrowUp(true);a=true}else{if(o<l){c.setIsArrowDown(true);a=true}}this._registerLiveOddsNotification(c);this._liveOddsProcessedOutcomeId=f}if(e=="DELETE"||n.isLockedSelection()){n.setStake(0);n.setDisplayStake("");this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).clearAllStakes();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).clearAllStakes()}if(b!=null||b!=SlipConstants.NO_CHANGE_ID){n.setOutcomeChangeId(b);var d=n.getTeaserData();if(d!="undefined"||d!=null){for(var i in d){d[i].teaserOutcomeChangeId=b}}n.setTeaserData(d)}if(j!=g||b!=SlipConstants.NO_CHANGE_ID||k!=n.isLockedSelection()){this.localDataChanged();this._liveOddsProcessedOutcomeId=null;if(this.getSlipRef().isPersistLaterWorkaroundNeeded()){this.getSlipRef().persist(true)}else{this.getSlipRef().persist()}}if(a){this.localDataChanged();this._liveOddsProcessedOutcomeId=null;if(this.getSlipRef().isPersistLaterWorkaroundNeeded()){this.getSlipRef().persist(true)}else{this.getSlipRef().persist()}this._blinkOutcomeOdd(f)}this.getSlipRef().getLogger().log("SelectionPanel.prototype._processOutcomeChangedNotification: end")};SelectionPanel.prototype.postProcessOutcomeChangedNotifications=function(){for(var a in this._outcomeChangedNotificationsTemp){this._processOutcomeChangedNotification(this._outcomeChangedNotificationsTemp[a].getOutcomeId(),this._outcomeChangedNotificationsTemp[a].getOdd(),this._outcomeChangedNotificationsTemp[a].getOddHighPrecision(),this._outcomeChangedNotificationsTemp[a].getOddFraction(),this._outcomeChangedNotificationsTemp[a].getStatus(),this._outcomeChangedNotificationsTemp[a].getOutcomeChangeId(),this._outcomeChangedNotificationsTemp[a].getCommand());delete this._outcomeChangedNotificationsTemp[a]}};SelectionPanel.prototype.postProcessEventChangedNotification=function(){for(var a in this._eventChangedNotificationsTemp){this._processEventChangeNotification(a,this._eventChangedNotificationsTemp[a].getStatus(),this._eventChangedNotificationsTemp[a].getChangeId(),this._eventChangedNotificationsTemp[a].getCommand());delete this._eventChangedNotificationsTemp[a]}};SelectionPanel.prototype.notifyTranslationChange=function(c,f,a,b,d,e){if(this.getSlipRef().getLiveMode()==1&&(this.getSlipRef().getMobileMode==1||visitor.getLiveSlipOddsAutoUpdate()==1)){if(this.getSlipRef().getActiveView()==SlipView.SELECTION){this._processTranslationChangeNotification(c,f,a,b,d,e)}else{if(this.getSlipRef().getActiveView()==SlipView.CONFIRMATION||this.getSlipRef().getActiveView()==SlipView.REPORT){this._translationChangedNotificationsTemp[c]=new TranslationChangedNotification(c,f,a,b,d,e)}}}};SelectionPanel.prototype.postProcessTranslationChangedNotification=function(){for(var a in this._translationChangedNotificationsTemp){this._processTranslationChangeNotification(this._translationChangedNotificationsTemp[a].getTranslatableId(),this._translationChangedNotificationsTemp[a].getTranslationType(),this._translationChangedNotificationsTemp[a].getTranslationEventId(),this._translationChangedNotificationsTemp[a].getName(),this._translationChangedNotificationsTemp[a].getTrnChangeId(),this._translationChangedNotificationsTemp[a].getCommand())}};SelectionPanel.prototype._processTranslationChangeNotification=function(d,h,a,b,f,g){this.getSlipRef().getLogger().log("SelectionPanel.prototype._processTranslationChangeNotification: translatableId: "+d+" translationType: "+h+" command: "+g+" trnChangeId: "+f+" name: "+b);if(g!="DELETE"){if(h=="OUTCOME"){var e=this._selections[d];if(e!=null&&(e.getOutcomeName()!=b||f!=e.getTrnChangeId())){e.setOutcomeName(b);e.setTrnChangeId(f);this.localDataChanged();if(this.getSlipRef().isPersistLaterWorkaroundNeeded()){this.getSlipRef().persist(true)}else{this.getSlipRef().persist()}}}if(h=="EVENT"){for(var c in this._selections){if(this._selections[c].getEventId()==d&&(this._selections[c].getEventRef().getName()!=b||f!=this._selections[c].getEventTrnChangeId())){this._selections[c].getEventRef().setName(b);this._selections[c].setEventTrnChangeId(f);this.localDataChanged();if(this.getSlipRef().isPersistLaterWorkaroundNeeded()){this.getSlipRef().persist(true)}else{this.getSlipRef().persist()}}}}}};SelectionPanel.prototype._registerLiveOddsNotification=function(c){if(this._liveOddsNotificationRegister.containsNotification(c.getOutcomeId())){var a=this._liveOddsNotificationRegister.getNotification(c.getOutcomeId());clearTimeout(a.getTimeoutId());this._liveOddsNotificationRegister.removeNotification(c.getOutcomeId())}var b=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_PANEL)._clearLiveOddsNotificationCallback("+c.getOutcomeId()+")";c.setTimeoutId(setTimeout(b,5000));this._liveOddsNotificationRegister.addNotification(c)};SelectionPanel.prototype._clearLiveOddsNotificationCallback=function(a){this._liveOddsNotificationRegister.removeNotification(a);if(this._liveOddsNotificationRegister.isEmpty()){this._liveComboOddClearNotification=true}this.localDataChanged();this._liveComboOddClearNotification=false};SelectionPanel.prototype._blinkOutcomeOdd=function(a){if(this.getSlipRef().getMobileMode()==1){return}var b=document.getElementById("slipOutcomeOdd_"+a);if(b!=null){if(this._liveOddsNotificationRegister.containsNotification(a)){}else{b.style.visibility=""}}};SelectionPanel.prototype.subscribeSelectionsForOddChangeNotifications=function(){for(var a in this._selections){this._subscribeForOddChangeNotifications(this._selections[a].getOutcomeId())}};SelectionPanel.prototype.unsubscribeSelectionsForOddChangeNotifications=function(){for(var a in this._selections){this._unsubscribeForOddChangeNotifications(this._selections[a].getEventId(),this._selections[a].getOutcomeId())}};SelectionPanel.prototype._subscribeForOddChangeNotifications=function(a){if(this.getSlipRef().getMobileMode()==1){return}var d=buildItemIdObj(a.toString(),"OUTCOME");baseSubscribe("outcomes",d,outcomes_schema,"COMMAND",lsPage,notifyLiveSlipForOutcomeChange);var b=this._selections[a].getEventId();if(this._liveEventsSubscriptions[b]>0){this._liveEventsSubscriptions[b]++}else{var c=buildItemIdObj(b.toString(),"EVENT");baseSubscribe("events",c,liveSlipEventSchema,"COMMAND",lsPage,notifySlipForEventChange);this._subscribeForTranslationsChangeNotifications(b);this._liveEventsSubscriptions[b]=1}};SelectionPanel.prototype._unsubscribeForOddChangeNotifications=function(b,a){if(this.getSlipRef().getMobileMode()==1){return}var d=buildItemIdObj(a.toString(),"OUTCOME");unsubscribe("outcomes",d,lsPage);if(this._liveEventsSubscriptions[b]!=null){this._liveEventsSubscriptions[b]--;if(this._liveEventsSubscriptions[b]<1){var c=buildItemIdObj(b.toString(),"EVENT");unsubscribe("events",c,lsPage);this._unsubscribeForTranslationsChangeNotifications(b);delete this._liveEventsSubscriptions[b]}}};SelectionPanel.prototype._subscribeForTranslationsChangeNotifications=function(a){subscribeForSlipTranslations(a)};SelectionPanel.prototype._unsubscribeForTranslationsChangeNotifications=function(a){unsubscribeForSlipTranslations(a)};SelectionPanel.prototype.registerSlipEventListener=function(a){this._slipEventListeners.push(a)};SelectionPanel.prototype._notifyListenersForEvent=function(a){for(var b in this._slipEventListeners){var c=this._slipEventListeners[b];c(a)}};function SlipActionEvent(a,b){this._type=a;this._message=b}SlipActionEvent.SELECTION_ADDED="SELECTION_ADDED";SlipActionEvent.SELECTION_REMOVED="SELECTION_REMOVED";SlipActionEvent.prototype.getType=function(){return this._type};SlipActionEvent.prototype.getMessage=function(){return this._message};function Selection(){}Selection.prototype.setEventId=function(a){this._eventId=a};Selection.prototype.getEventId=function(){return this._eventId};Selection.prototype.setSelectionChecked=function(a){this._selectionSelected=a};Selection.prototype.isSelectionChecked=function(){return this._selectionSelected};Selection.prototype.setProblematic=function(a){this._problematic=a};Selection.prototype.isProblematic=function(){return this._problematic};Selection.prototype.setMaxStake=function(a){this._maxStake=a};Selection.prototype.getMaxStake=function(){return this._maxStake};Selection.prototype.setBankerChecked=function(a){this._bankerChecked=a};Selection.prototype.isBankerChecked=function(){return this._bankerChecked};Selection.prototype.setTeaserPossible=function(a){this._teaserPossible=a};Selection.prototype.isTeaserPossible=function(){return this._teaserPossible};Selection.prototype.setTeaserData=function(a){this._teaserData=a};Selection.prototype.getTeaserData=function(){return this._teaserData};Selection.prototype.setTeaserChecked=function(a){this._teaserChecked=a};Selection.prototype.isTeaserChecked=function(){return this._teaserChecked};Selection.prototype.setSp=function(a){this._sp=a};Selection.prototype.isSP=function(){return this._sp};Selection.prototype.setOutcomeId=function(a){this._outcomeId=a};Selection.prototype.getOutcomeId=function(){return this._outcomeId};Selection.prototype.setEventId=function(a){this._eventId=a};Selection.prototype.getEventId=function(){return this._eventId};Selection.prototype.setEventRef=function(a){this._eventRef=a};Selection.prototype.getEventRef=function(){return this._eventRef};Selection.prototype.setOutcomeName=function(a){this._outcomeName=a};Selection.prototype.getOutcomeName=function(){return this._outcomeName};Selection.prototype.setOutcomeOdd=function(a){this._outcomeOdd=a};Selection.prototype.setOutcomeRealOdd=function(a){this._outcomeRealOdd=a};Selection.prototype.getOutcomeOdd=function(){return this._outcomeOdd};Selection.prototype.getOutcomeRealOdd=function(){return this._outcomeRealOdd};Selection.prototype.setOutcomeOddHighPrecision=function(a){this._outcomeOddHighPrecision=a};Selection.prototype.getOutcomeOddHighPrecision=function(){return this._outcomeOddHighPrecision};Selection.prototype.setOutcomeFractionOdd=function(a){this._outcomeFractionOdd=a};Selection.prototype.getOutcomeFractionOdd=function(){return this._outcomeFractionOdd};Selection.prototype.setOutcomeCatId=function(a){this._outcomeCatId=a};Selection.prototype.getOutcomeCatId=function(){return this._outcomeCatId};Selection.prototype.setOutcomeMaxLoss=function(a){this._outcomeMaxLoss=a};Selection.prototype.getOutcomeMaxLoss=function(){return this._outcomeMaxLoss};Selection.prototype.setEachWayPossible=function(a){this._eachWayPossible=a};Selection.prototype.isEachWayPossible=function(){return this._eachWayPossible};Selection.prototype.setEachWayChecked=function(a){this._eachWayChecked=a};Selection.prototype.isEachWayChecked=function(){return this._eachWayChecked};Selection.prototype.setEachWayId=function(a){this._eachWayId=a};Selection.prototype.getEachWayId=function(){return this._eachWayId};Selection.prototype.getEachWayOutcomeChangeId=function(){return this._eachwayOutcomeId};Selection.prototype.setEachWayOutcomeChangeId=function(a){this._eachwayOutcomeId=a};Selection.prototype.setEachWayOdd=function(a){this._eachWayOdd=a};Selection.prototype.getEachWayOdd=function(){return this._eachWayOdd};Selection.prototype.setXCastAnyOrder=function(a){this._xCastAnyOrderFlag=a};Selection.prototype.isXCastAnyOrder=function(){return this._xCastAnyOrderFlag};Selection.prototype.setStake=function(a){this._stake=a};Selection.prototype.getStake=function(){return this._stake};Selection.prototype.setDisplayStake=function(a){this._displayStake=a};Selection.prototype.getDisplayStake=function(){return this._displayStake};Selection.prototype.setRiskFactorSingles=function(a){this._riskFactorSingles=a};Selection.prototype.getRiskFactorSingles=function(){return this._riskFactorSingles};Selection.prototype.setRiskFactorCombos=function(a){this._riskFactorCombos=a};Selection.prototype.getRiskFactorCombos=function(){return this._riskFactorCombos};Selection.prototype.setTotalSingleStake=function(a){this._totalSingleStake=a};Selection.prototype.getTotalSingleStake=function(){return this._totalSingleStake};Selection.prototype.setBetsCount=function(a){this._betsCount=a};Selection.prototype.getBetsCount=function(){if(this.isEachWayChecked()){return this._betsCount+1}return this._betsCount};Selection.prototype.setPossiblePayout=function(a){this._payout=a};Selection.prototype.getPossiblePayout=function(){return this._payout};Selection.prototype.setPossiblePoints=function(a){this._points=a};Selection.prototype.getPossiblePoints=function(){return this._points};Selection.prototype.setOutcomeChangeId=function(a){this._outcomeChangeId=a};Selection.prototype.getOutcomeChangeId=function(){return this._outcomeChangeId};Selection.prototype.setEventChangeId=function(a){this._eventChangeId=a};Selection.prototype.getEventChangeId=function(){return this._eventChangeId};Selection.prototype.setEventTrnChangeId=function(a){this._eventTrnChangeId=a};Selection.prototype.getEventTrnChangeId=function(){return this._eventTrnChangeId};Selection.prototype.setOutcomeStatus=function(a){this._outcomeStatus=a};Selection.prototype.getOutcomeStatus=function(){return this._outcomeStatus};Selection.prototype.setEventStatus=function(a){this._eventStatus=a};Selection.prototype.getEventStatus=function(){return this._eventStatus};Selection.prototype.setOrderPosition=function(a){this._orderPosition=a};Selection.prototype.getOrderPosition=function(){return this._orderPosition};Selection.prototype.setSuggestedSelection=function(a){this._suggestedSelection=a};Selection.prototype.isSuggestedSelection=function(){return this._suggestedSelection};Selection.prototype.setCTASelection=function(a){this._ctaSelection=a};Selection.prototype.isCTASelection=function(){return this._ctaSelection};Selection.prototype._checkTextAndVersionCorrect=function(){var c=Number(this.getOutcomeChangeId());var b=Number(this.getEventChangeId());var a=Number(this.getEventTrnChangeId());if(c!=Number(this.getTrnChangeId())||b!=a||b!=c){return true}return false};Selection.prototype.isLockedSelection=function(){return(this.getEventStatus()!=0||this.getOutcomeStatus()!=0||this.getOutcomeRealOdd()<=1||this._checkTextAndVersionCorrect())};Selection.prototype.getStyledRealOdd=function(){if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){return this.getOutcomeOddHighPrecision()}else{return this.getOutcomeRealOdd()}};Selection.prototype.getStyledOdd=function(){if((visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION)&&(this.isSP()==true)){return 1}else{if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){return this.getOutcomeOddHighPrecision()}else{return this.getOutcomeOdd()}}};Selection.prototype.setTrnChangeId=function(a){this._trnChangeId=a};Selection.prototype.getTrnChangeId=function(){return this._trnChangeId};function SelectionConfirmationPanel(){this._selections=new Array();this._sortedSelections=new Array();this._allSelectionsCounter=0;this._possiblePoints=0;this._hotComboAvailable=false}SelectionConfirmationPanel.prototype=new Panel();SelectionConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.allselectionCount=this._allSelectionsCounter;a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.selections=this._selections;a.sortedSelections=this._sortedSelections;a.isComboPlaced=this._isComboPlaced;a.teaserBetPlaced=this._isTeaserBetPlaced;a.isBankersAvailable=this._isBankersAvailable;a.hotComboAvailable=this._hotComboAvailable;a.withBankers=this._withBankers;if(this.getSlipRef().getLiveMode()==0){a.getClosingTimeHtml=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getClosingTimeHtml"}else{a.getClosingTimeHtml=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getClosingTimeHtml"}if(this.getSlipRef().getLiveMode()==0){a.formatCloseTime=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).formatCloseTime"}else{a.formatCloseTime=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).formatCloseTime"}if(this.getSlipRef().getLiveMode()==0){a.bankersHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getBankersHelp"}else{a.bankersHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getBankersHelp"}if(this.getSlipRef().getLiveMode()==0){a.eachwayHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getEachwayHelp"}else{a.eachwayHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getEachwayHelp"}if(this.getSlipRef().getLiveMode()==0){a.teasersHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getTeasersHelp"}else{a.teasersHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getTeasersHelp"}a.currencySymbol=this.getCurrencySymbol(visitor.getCurrency());return a};SelectionConfirmationPanel.prototype.getClosingTimeHtml=function(a){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["CLOSING_TIME_SLIP_22"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.formatCloseTime(a)+"</td></tr></table>")};SelectionConfirmationPanel.prototype.getBankersHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["BANKERS_SLIP_22"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["MSG5_SLIP_4"]+"</td></tr></table>")};SelectionConfirmationPanel.prototype.getEachwayHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["MSG_EACHWAY_SLIP"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["MSG_EACHWAY_EXPLANATION_SLIP"]+"</td></tr></table>")};SelectionConfirmationPanel.prototype.getTeasersHelp=function(){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["TEASER_SELECTION_SLIP"]+"</td></tr></table>")};SelectionConfirmationPanel.prototype.formatCloseTime=function(h){var d=h.split(" ");var c=new Date();c.setUTCFullYear(parseInt(d[0]));c.setUTCMonth(parseInt(d[1]));c.setUTCDate(parseInt(d[2]));c.setUTCHours(parseInt(d[3]));c.setUTCMinutes(parseInt(d[4]));c.setTime(c.getTime()+this.getSlipRef().getConfigs()["getEffectiveTimeZoneOffset"]);var f=pad((c.getUTCFullYear()%100)+"",2,"0",STR_PAD_LEFT);var g=getShortMonthNames[c.getUTCMonth()];var b=pad(c.getUTCDate()+"",2,"0",STR_PAD_LEFT);var a=pad(c.getUTCHours()+"",2,"0",STR_PAD_LEFT);var e=pad(c.getUTCMinutes()+"",2,"0",STR_PAD_LEFT);return b+" "+g+" "+f+" "+a+":"+e+" "+this.getSlipRef().getConfigs()["getEffectiveMetaZoneShortName"]};SelectionConfirmationPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("SelectionReportPanel fetchExternalData");var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._selectionsCount=a.getCheckedSelectionsCounter();this._selections=a.getSelections();this._sortedSelections=a.getSortedSelections();this._allSelectionsCounter=a.getSelectionsCount();this._slipfailed=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getSlipFailed();this._isComboPlaced=this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).isCombosPlaced();this._isBankersAvailable=a.isBankersAvailable();this._withBankers=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).isBankersLinkClicked();if(this.getSlipRef().getLiveMode()==0){this._isTeaserBetPlaced=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserBlockData().getStake();this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()}else{this._isTeaserBetPlaced=false}this.getSlipRef().getLogger().log("SelectionReportPanel end of fetchExternalData")};SelectionConfirmationPanel.prototype.getCurrencySymbol=function(a){var b=new Object();b.USD="$";b.EUR="&euro;";b.GBP="&pound;";return b[a]};SelectionConfirmationPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};function SelectionReportPanel(){this._slipFailed;this._selections=new Array();this._sortedSelections=new Array();this._selectionsResult=new Array();this._allSelectionsCounter=0;this._possiblePoints=0;this._oddsUpdate=new Array();this._hotComboAvailable=false;this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._changeIdData;this._totalTax=0}SelectionReportPanel.prototype=new Panel();SelectionReportPanel.prototype.getDataModel=function(){this.getSlipRef().getLogger().log("SelectionReportPanel getdatamodel");var a=new Object();a.translations=this.getSlipRef().getTranslations();a.configs=this.getSlipRef().getConfigs();a.urls=this.getSlipRef().getUrls();a.freeBetMode=this.getSlipRef().getFreeBetMode();a.selections=this._selections;a.sortedSelections=this._sortedSelections;a.isBankersAvailable=this._isBankersAvailable;a.withBankers=this._withBankers;a.hotComboAvailable=this._hotComboAvailable;if(this.getSlipRef().getLiveMode()==0){a.getClosingTimeHtml=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getClosingTimeHtml"}else{a.getClosingTimeHtml=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getClosingTimeHtml"}if(this.getSlipRef().getLiveMode()==0){a.formatCloseTime=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).formatCloseTime"}else{a.formatCloseTime=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).formatCloseTime"}if(this.getSlipRef().getLiveMode()==0){a.bankersHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getBankersHelp"}else{a.bankersHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getBankersHelp"}if(this.getSlipRef().getLiveMode()==0){a.eachwayHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getEachwayHelp"}else{a.eachwayHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getEachwayHelp"}if(this.getSlipRef().getLiveMode()==0){a.teasersHelp=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getTeasersHelp"}else{a.teasersHelp=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.SELECTION_CONFIRMATION_PANEL).getTeasersHelp"}a.currencySymbol=this.getCurrencySymbol(visitor.getCurrency());a.slipFailed=this._slipFailed;a.resultSelections=this._selectionsResult;a.allselectionCount=this._allSelectionsCounter;a.isComboPlaced=this._isComboPlaced;a.teaserBetPlaced=this._isTeaserBetPlaced;this.getSlipRef().getLogger().log("SelectionReportPanel end of getdatamodel");return a};SelectionReportPanel.prototype.getClosingTimeHtml=function(a){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["CLOSING_TIME_SLIP_22"]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.formatCloseTime(a)+"</td></tr></table>")};SelectionReportPanel.prototype.formatCloseTime=function(h){var d=h.split(" ");var c=new Date();c.setUTCFullYear(parseInt(d[0]));c.setUTCMonth(parseInt(d[1]));c.setUTCDate(parseInt(d[2]));c.setUTCHours(parseInt(d[3]));c.setUTCMinutes(parseInt(d[4]));c.setTime(c.getTime()+this.getSlipRef().getConfigs()["getEffectiveTimeZoneOffset"]);var f=pad((c.getUTCFullYear()%100)+"",2,"0",STR_PAD_LEFT);var g=getShortMonthNames[c.getUTCMonth()];var b=pad(c.getUTCDate()+"",2,"0",STR_PAD_LEFT);var a=pad(c.getUTCHours()+"",2,"0",STR_PAD_LEFT);var e=pad(c.getUTCMinutes()+"",2,"0",STR_PAD_LEFT);return b+" "+g+" "+f+" "+a+":"+e+" "+this.getSlipRef().getConfigs()["getEffectiveMetaZoneShortName"]};SelectionReportPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);this._selectionsCount=a.getCheckedSelectionsCounter();this._selections=a.getSelections();this._sortedSelections=a.getSortedSelections();this._allSelectionsCounter=a.getSelectionsCount();this._selectionsResult=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getSelectionsFailed();this._slipFailed=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getSlipFailed();this._isComboPlaced=this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).isCombosPlaced();this._isBankersAvailable=a.isBankersAvailable();this._withBankers=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).isBankersLinkClicked();if(this.getSlipRef().getLiveMode()==0){this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable();this._isTeaserBetPlaced=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL).getTeaserBlockData().getStake()}else{this._hotComboAvailable=false}};SelectionReportPanel.prototype.setSlipFailed=function(a){this._slipFailed=a};SelectionReportPanel.prototype.setSelectionsFailed=function(c){var e=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var f=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getAllFailed();this._selectionsResult=c;if(f==true){this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0;return}this._selections=e.getSelections();this._sortedSelections=e.getSortedSelections();this._totalCost=e.getTotalCost();this._numberBets=e.getTotalBets();this._possiblePayout=e.getPossiblePayout();this._possiblePoints=e.getPossiblePoints();this._totalTax=e.getTotalTax();for(var a in this._selections){if(this._selectionsResult[a].isFailed()){var d=this._selections[a];this._totalCost-=d.getStake()*d.getBetsCount();if(d.getStake()){this._numberBets-=d.getBetsCount();this._possiblePoints-=d.getPossiblePoints();if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var b=d.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax-=(Math.round(b*100)/100)*d.getBetsCount()}}this._possiblePayout-=d.getPossiblePayout()}}};SelectionReportPanel.prototype.setOddsUpdate=function(a){this._oddsUpdate=a};SelectionReportPanel.prototype.updateOdds=function(){var d=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelections();for(var c in this._oddsUpdate){var a=this._oddsUpdate[c];if(a.type==SlipConstants.ODD_UPDATE_SINGLE_TYPE){if(d[a.outcomeId].isSP()){d[a.outcomeId].setOutcomeOdd(SlipConstants.SP_OUTCOME_ODD)}else{d[a.outcomeId].setOutcomeOdd(a.odd)}d[a.outcomeId].setOutcomeRealOdd(a.odd);d[a.outcomeId].setOutcomeOddHighPrecision(a.oddHp);d[a.outcomeId].setOutcomeFractionOdd(a.oddFractional)}if(a.type==SlipConstants.ODD_UPDATE_EACHWAY_TYPE){if(d[a.outcomeId].isSP()){d[a.outcomeId].setEachWayOdd(SlipConstants.SP_OUTCOME_ODD)}else{d[a.outcomeId].setEachWayOdd(a.eachWayOdd)}}if(a.type==SlipConstants.ODD_UPDATE_HOT_COMBO_TYPE){if(this._hotComboAvailable){var b=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).getHotComboData();b.setHotComboOdd(a.hotComboOdd);b.setHotComboPercentage(a.hotComboPercentage)}}}};SelectionReportPanel.prototype.updateChangeId=function(){if(this._changeIdData!=null){var d=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelections();var c=d[this._changeIdData.outcomeId];if(c!=null){if(this._changeIdData.changeId!=""){c.setOutcomeChangeId(this._changeIdData.changeId);c.setEventChangeId(this._changeIdData.changeId);c.setTrnChangeId(this._changeIdData.changeId);c.setEventTrnChangeId(this._changeIdData.changeId)}else{c.setChangeId(SlipConstants.NO_CHANGE_ID);c.setEventChangeId(SlipConstants.NO_CHANGE_ID);c.setTrnChangeId(SlipConstants.NO_CHANGE_ID);c.setEventTrnChangeId(SlipConstants.NO_CHANGE_ID)}c.setOutcomeName(this._changeIdData.outcomeName);c.getEventRef().setName(this._changeIdData.eventName);var b=c.getTeaserData();if(b!="undefined"||b!=null){for(var a in b){if(this._changeIdData.teaserChangeId!=""){b[a].teaserOutcomeChangeId=this._changeIdData.teaserChangeId}else{b[a].teaserOutcomeChangeId=SlipConstants.NO_CHANGE_ID}}c.setTeaserData(b)}}this._changeIdData=null;this.getSlipRef().persist()}};SelectionReportPanel.prototype.getTotalCost=function(){return this._totalCost};SelectionReportPanel.prototype.getTotalTax=function(){return this._totalTax};SelectionReportPanel.prototype.getBetsPlaced=function(){return this._numberBets};SelectionReportPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};SelectionReportPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};SelectionReportPanel.prototype.getCurrencySymbol=function(a){var b=new Object();b.USD="$";b.EUR="&euro;";b.GBP="&pound;";return b[a]};SelectionReportPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};SelectionReportPanel.prototype.setFailedSelection=function(b,a){this._selectionsResult[b].setFailed(a)};SelectionReportPanel.prototype.OddUpdateObj=function(b,c,d,a){this.type=SlipConstants.ODD_UPDATE_SINGLE_TYPE;this.outcomeId=b;this.odd=c;this.oddFractional=d;this.oddHp=a};SelectionReportPanel.prototype.EWOddUpdateObj=function(b,a){this.type=SlipConstants.ODD_UPDATE_EACHWAY_TYPE;this.outcomeId=b;this.eachWayOdd=a};SelectionReportPanel.prototype.HotComboOddUpdateObj=function(b,a){this.type=SlipConstants.ODD_UPDATE_HOT_COMBO_TYPE;this.hotComboOdd=b;this.hotComboPercentage=a};SelectionReportPanel.prototype.setChangeIdData=function(a){this._changeIdData=a};function SelectionsValidationResult(){}SelectionsValidationResult.prototype.setConflict=function(a){this._conflict=a};SelectionsValidationResult.prototype.hasConflict=function(){return this._conflict};SelectionsValidationResult.prototype.setConflictCause=function(a){this._conflictCause=a};SelectionsValidationResult.prototype.getConflictCause=function(){return this._conflictCause};SelectionsValidationResult.prototype.setConflictMessage=function(a){this._conflictMessage=a};SelectionsValidationResult.prototype.getConflictMessage=function(){return this._conflictMessage};SelectionsValidationResult.prototype.setConflictedSelectionPairs=function(a){this._conflictedSelectionPairs=a};SelectionsValidationResult.prototype.getConflictedSelectionPairs=function(){return this._conflictedSelectionPairs};SelectionsValidationResult.prototype.setConflictedSelections=function(a){this._conflictedSelections=a};SelectionsValidationResult.prototype.getConflictedSelections=function(){return this._conflictedSelections};SelectionsValidationResult.prototype.setMultiWayPossible=function(a){this._multiWayPossible=a};SelectionsValidationResult.prototype.isMultiWayPossible=function(){return this._multiWayPossible};function LiveOddsNotificationRegisterEntry(){this._outcomeId=null;this._isArrowUp=false;this._isArrowDown=false;this._timeoutId=null}LiveOddsNotificationRegisterEntry.prototype.setOutcomeId=function(a){this._outcomeId=a};LiveOddsNotificationRegisterEntry.prototype.getOutcomeId=function(){return this._outcomeId};LiveOddsNotificationRegisterEntry.prototype.setIsArrowUp=function(a){this._isArrowUp=a};LiveOddsNotificationRegisterEntry.prototype.isArrowUp=function(){return this._isArrowUp};LiveOddsNotificationRegisterEntry.prototype.setIsArrowDown=function(a){this._isArrowDown=a};LiveOddsNotificationRegisterEntry.prototype.isArrowDown=function(){return this._isArrowDown};LiveOddsNotificationRegisterEntry.prototype.setTimeoutId=function(a){this._timeoutId=a};LiveOddsNotificationRegisterEntry.prototype.getTimeoutId=function(){return this._timeoutId};function LiveOddsNotificationRegister(){this._register=new Object();this._size=0}LiveOddsNotificationRegister.prototype.addNotification=function(a){if(a!=null){this._register[a.getOutcomeId()]=a;this._size++}};LiveOddsNotificationRegister.prototype.removeNotification=function(a){if(this.containsNotification(a)){delete this._register[a];this._size--}};LiveOddsNotificationRegister.prototype.getNotification=function(a){return this._register[a]};LiveOddsNotificationRegister.prototype.containsNotification=function(a){return(this._register[a]!=null)};LiveOddsNotificationRegister.prototype.isEmpty=function(){return(this._size==0)};LiveOddsNotificationRegister.prototype.isArrowUp=function(a){if(!this.containsNotification(a)){return false}else{return this.getNotification(a).isArrowUp()}};LiveOddsNotificationRegister.prototype.isArrowDown=function(a){if(!this.containsNotification(a)){return false}else{return this.getNotification(a).isArrowDown()}};function OutcomeChangedNotification(b,e,d,c,a,g,f){this.outcomeId=b;this.odd=e;this.oddHighPrecision=d;this.oddFraction=c;this.status=a;this.outcomeChangeId=g;this.command=f}OutcomeChangedNotification.prototype.getOutcomeId=function(){return this.outcomeId};OutcomeChangedNotification.prototype.getOdd=function(){return this.odd};OutcomeChangedNotification.prototype.getOddHighPrecision=function(){return this.oddHighPrecision};OutcomeChangedNotification.prototype.getOddFraction=function(){return this.oddFraction};OutcomeChangedNotification.prototype.getStatus=function(){return this.status};OutcomeChangedNotification.prototype.getOutcomeChangeId=function(){return this.outcomeChangeId};OutcomeChangedNotification.prototype.getCommand=function(){return this.command};function EventChangedNotification(a,c,b){this.status=a;this.changeId=c;this.command=b}EventChangedNotification.prototype.getStatus=function(){return this.status};EventChangedNotification.prototype.getChangeId=function(){return this.changeId};EventChangedNotification.prototype.getCommand=function(){return this.command};function TranslationChangedNotification(c,f,a,b,d,e){this._translatableId=c;this._translationType=f;this._translationEventId=a;this._name=b;this._trnChangeId=d;this._command=e}TranslationChangedNotification.prototype.getTranslatableId=function(){return this._translatableId};TranslationChangedNotification.prototype.getTranslationType=function(){return this._translationType};TranslationChangedNotification.prototype.getTranslationEventId=function(){return this._translationEventId};TranslationChangedNotification.prototype.getName=function(){return this._name};TranslationChangedNotification.prototype.getTrnChangeId=function(){return this._trnChangeId};TranslationChangedNotification.prototype.getCommand=function(){return this._command};var SelectionsConflictCause={SAME_FAMILY_OR_CAT_ID:"SAME_FAMILY_OR_CAT_ID",COMBO_FACTOR_MORE_THAN_1:"COMBO_FACTOR_MORE_THAN_1",X_CAST_ANY_ORDER:"X_CAST_ANY_ORDER"};function TeaserBlockData(){this.init()}TeaserBlockData.prototype=new Object();TeaserBlockData.prototype.init=function(){this._selectedTeaserGroupId="";this._maxStake=0;this._stake=0;this._selectedFilteredOddIndex=-1;this._totalPoints=0;this._totalCost=0;this._totalBets=0;this._total=0;this._displayStake="";this._totalTax=0};TeaserBlockData.prototype.setMaxStake=function(a){this._maxStake=a};TeaserBlockData.prototype.getMaxStake=function(){return this._maxStake};TeaserBlockData.prototype.getSelectedTeaserGroupId=function(){return this._selectedTeaserGroupId};TeaserBlockData.prototype.setSelectedTeaserGroupId=function(a){this._selectedTeaserGroupId=a};TeaserBlockData.prototype.setSelectedFilteredOddIndex=function(a){this._selectedFilteredOddIndex=a};TeaserBlockData.prototype.getSelectedFilteredOddIndex=function(){return this._selectedFilteredOddIndex};TeaserBlockData.prototype.setStake=function(a){this._stake=a};TeaserBlockData.prototype.getStake=function(){return this._stake};TeaserBlockData.prototype.setDisplayStake=function(a){this._displayStake=a};TeaserBlockData.prototype.getDisplayStake=function(){return this._displayStake};TeaserBlockData.prototype.hasStake=function(){return this._stake!=0};TeaserBlockData.prototype.setPossiblePayout=function(a){this._total=a};TeaserBlockData.prototype.getPossiblePayout=function(){return this._total};TeaserBlockData.prototype.setTotalBets=function(a){this._totalBets=a};TeaserBlockData.prototype.getTotalBets=function(){return this._totalBets};TeaserBlockData.prototype.setTotalCost=function(a){this._totalCost=a};TeaserBlockData.prototype.getTotalCost=function(){return this._totalCost};TeaserBlockData.prototype.setLoyaltyPoints=function(a){this._totalPoints=a};TeaserBlockData.prototype.getLoyaltyPoints=function(){return this._totalPoints};TeaserBlockData.prototype.getTotalTax=function(){return this._totalTax};TeaserBlockData.prototype.setTotalTax=function(a){this._totalTax=a};function TeaserPanel(){this._teaserBlockData=new TeaserBlockData();this._isAddTeaserLinkClicked=false;this._isCheckedTeaserSelectionJustAdded=false;this._checkedTeasersCount=0;this._areCheckedTeasersEnough=false;this._arePossibleTeasersEnough=false;this._filteredOdds=new Array();this._editStake=false;this._isRemoveTeaserClicked=false;this._selectionJustChecked=false;this._stakeBoxRegister=new StakeBoxRegister();this._teaserStakeJustCleared=false}TeaserPanel.prototype=new Panel();TeaserPanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};TeaserPanel.prototype.getCheckedTeasersCount=function(){return this._checkedTeasersCount};TeaserPanel.prototype.getTeaserStakeJustCleared=function(){return this._teaserStakeJustCleared};TeaserPanel.prototype.setTeaserStakeJustCleared=function(a){this._teaserStakeJustCleared=a};TeaserPanel.prototype.getTeaserBlockData=function(a){return this._teaserBlockData};TeaserPanel.prototype.setOdds=function(a){this._odds=a};TeaserPanel.prototype.setSportNames=function(a){this._sportNames=a};TeaserPanel.prototype.setPoints=function(a){this._points=a;this._groupPoints=this.generateGroupTeaserPoints(a)};TeaserPanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_teaserBlockData","_checkedTeasersCount","_areCheckedTeasersEnough","_arePossibleTeasersEnough","_filteredOdds","_teaserStakeJustCleared"])};TeaserPanel.prototype.getSelectedPointsIdForSport=function(b){for(var a in this._points){if(this._points[a].groupId==this._teaserBlockData.getSelectedTeaserGroupId()&&this._points[a].sportId==b){return this._points[a].id}}return null};TeaserPanel.prototype.getGroupTeaserPoints=function(){return this._groupPoints};TeaserPanel.prototype.setTeaserMaxStakes=function(a){this._teaserMaxStakes=a};TeaserPanel.prototype.getTeaserMaxStakes=function(){return this._teaserMaxStakes};TeaserPanel.prototype.filterTeaserOdds=function(){var b=new Array();for(var a in this._odds){if(typeof(this._odds[a])=="function"){continue}if(this._odds[a].numSelections==this._checkedTeasersCount){b.push(this._odds[a])}}this._filteredOdds=b};TeaserPanel.prototype.getFilteredOdds=function(){return this._filteredOdds};TeaserPanel.prototype.toggleTeaserGroup=function(a){if(a!=this._teaserBlockData.getSelectedTeaserGroupId()){this._teaserBlockData.setStake(0);this._teaserBlockData.setSelectedTeaserGroupId(a);this.localDataChanged();this.getSlipRef().persist()}};TeaserPanel.prototype.generateGroupTeaserPoints=function(b){var c=new Object();for(var a in b){if(typeof(b[a])=="function"){continue}if(typeof(c[b[a].groupId])=="undefined"){c[b[a].groupId]=new Array()}c[b[a].groupId].push(b[a].points)}return c};TeaserPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.removeTeaser=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TEASER_PANEL).removeTeaser";a.teaserSelectionsCount=this._checkedTeasersCount;a.filteredOdds=this._filteredOdds;a.selectedTeaserGroupId=this._teaserBlockData.getSelectedTeaserGroupId();a.areTeaserSelectionsValid=this._areCheckedTeasersEnough&&this.getDisplay().isVisible();a.toggleTeaserGroup=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TEASER_PANEL).toggleTeaserGroup";a.groupTeaserPoints=this._groupPoints;this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());this._stakeBoxRegister.resetStakeBoxRegister();a.stakeBoxRegister=this._stakeBoxRegister;a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder";a.handleTeaserStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TEASER_PANEL).handleTeaserStake";a.hasStake=this._teaserBlockData.hasStake();a.stake=this._teaserBlockData.getStake();a.maxStake=this._teaserBlockData.getMaxStake();a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.sportNames=this._sportNames;a.isInWebSite=this.getSlipRef().getWindowType()==SlipConstants.WINDOW_TYPE_NORMAL;return a};TeaserPanel.prototype.handleTeaserStake=function(a){this._editStake=true;this._teaserBlockData.setStake(this.getSlipRef().makeStake(a));this._teaserBlockData.setDisplayStake(a);this.localDataChanged();this.getSlipRef().persist();this._editStake=false};TeaserPanel.prototype.removeTeaser=function(){this._isRemoveTeaserClicked=true;this.getDisplay().hide();this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).externalDataChanged();this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).externalDataChanged();this.getDisplay().refresh();this.getSlipRef().persist();this._isRemoveTeaserClicked=false};TeaserPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 1");this._isAddTeaserLinkClicked=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).isAddTeaserClicked()||this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL).isAddTeaserClicked();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 2");this._isCheckedTeaserSelectionJustAdded=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).isCheckedTeaserSelectionJustAdded();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 3");this._checkedTeasersCount=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getCheckedTeasersCount();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 4");this._areCheckedTeasersEnough=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).areCheckedTeasersEnough();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 5");this._arePossibleTeasersEnough=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).arePossibleTeasersEnough();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 6");this._selectionJustRemoved=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelectionJustRemoved();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 7");this._selectionJustChecked=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getTeaserSelectionJustChecked();this.getSlipRef().getLogger().log("TeaserPanel.prototype.fetchExternalData 8")};TeaserPanel.prototype.localDataChanged=function(){this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 1");if(this._isAddTeaserLinkClicked){this.getDisplay().show()}this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 2");if(!this._arePossibleTeasersEnough){this.getDisplay().hide()}this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 3");if(this._isCheckedTeaserSelectionJustAdded||this._isRemoveTeaserClicked||this._selectionJustRemoved||this._selectionJustChecked){this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 3.1");this._teaserBlockData.init();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 3.2");this._teaserBlockData.setMaxStake(this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).calculateRequestTeaserMaxStake());this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 3.3")}this.filterTeaserOdds();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 4");this.obtainSelectedTeaserGroup();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 5");this.obtainSelectedFilteredOddIndex();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 6");this._calculate();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 7");this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 8");this._isAddTeaserLinkClicked=false;this._isCheckedTeaserSelectionJustAdded=false;this._selectionJustRemoved=false;this._selectionJustChecked=false;this._teaserStakeJustCleared=false;if(!this._editStake){this.getDisplay().refresh()}this.getSlipRef().getLogger().log("TeaserPanel.prototype.localDataChanged 9")};TeaserPanel.prototype.getStyledRealOdd=function(a,b){if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){return a}else{return b}};TeaserPanel.prototype._calculate=function(){var e=0;var g=0;var b=0;var h=0;var d=0;var c=this._teaserBlockData.getStake();var j=this._teaserBlockData.getSelectedFilteredOddIndex();if(c>0&&j!=null){var k=this._filteredOdds[j].odd;var a=this._filteredOdds[j].oddHp;var i=this.getStyledRealOdd(k,a);e=i*c;g=1;b=c;h=this.getSlipRef().calculatePoints(c,i,0,visitor.getToBaseCurrencyFxRate());if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var f=c*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);d+=(Math.round(f*100)/100)*g}}this._teaserBlockData.setPossiblePayout(e);this._teaserBlockData.setTotalBets(g);this._teaserBlockData.setTotalCost(b);this._teaserBlockData.setLoyaltyPoints(h);this._teaserBlockData.setTotalTax(d)};TeaserPanel.prototype.obtainSelectedTeaserGroup=function(){if(!this._filteredOdds||this._filteredOdds.length==0){this._teaserBlockData.setSelectedTeaserGroupId(0);return}for(var a in this._filteredOdds){if(this._teaserBlockData.getSelectedTeaserGroupId()==this._filteredOdds[a].groupId){return}}this._teaserBlockData.setSelectedTeaserGroupId(this._filteredOdds[0].groupId)};TeaserPanel.prototype.obtainSelectedFilteredOddIndex=function(){for(var a in this._filteredOdds){if(this._filteredOdds[a].groupId==this._teaserBlockData.getSelectedTeaserGroupId()){this._teaserBlockData.setSelectedFilteredOddIndex(a);return}}this._teaserBlockData.setSelectedFilteredOddIndex(null)};function TeaserConfirmationPanel(){this._checkedTeasersCount=0;this._selectedGroupTeaserPoints=0;this._oddObject=new Object();this._stake=0;this._sportNames=new Array();this._betFailed=false;this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0}TeaserConfirmationPanel.prototype=new Panel();TeaserConfirmationPanel.prototype.setBetFailed=function(a){this._betFailed=a;this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0};TeaserConfirmationPanel.prototype.setSportNames=function(a){this._sportNames=a};TeaserConfirmationPanel.prototype.fetchExternalData=function(){var a=this.getSlipRef().getPanelReference(SlipConstants.TEASER_PANEL);this._checkedTeasersCount=a.getCheckedTeasersCount();this._selectedGroupTeaserPoints=a.getGroupTeaserPoints()[a.getTeaserBlockData().getSelectedTeaserGroupId()];this._oddObject=a.getFilteredOdds()[a.getTeaserBlockData().getSelectedFilteredOddIndex()];this._stake=a.getTeaserBlockData().getStake();this._totalCost=a.getTeaserBlockData().getTotalCost();this._numberBets=a.getTeaserBlockData().getTotalBets();this._possiblePayout=a.getTeaserBlockData().getPossiblePayout();this._possiblePoints=a.getTeaserBlockData().getLoyaltyPoints();this._totalTax=a.getTeaserBlockData().getTotalTax()};TeaserConfirmationPanel.prototype.localDataChanged=function(){this.getDisplay().setVisible((this._stake>0));this.getDisplay().refresh()};TeaserConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.teaserSelectionsCount=this._checkedTeasersCount;a.sportNames=this._sportNames;a.teaserPoints=this._selectedGroupTeaserPoints;a.oddObject=this._oddObject;a.isTeaserFailed=this._betFailed;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());a.stake=this._stake;return a};TeaserConfirmationPanel.prototype.getTotalCost=function(){return this._totalCost};TeaserConfirmationPanel.prototype.getBetsPlaced=function(){return this._numberBets};TeaserConfirmationPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};TeaserConfirmationPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};TeaserConfirmationPanel.prototype.getTotalTax=function(){return this._totalTax};TeaserConfirmationPanel.prototype.setTotalTax=function(a){this._totalTax=a};SlipFactory.prototype.createTrixiePanel=function(c,f,a,e){var b=new TrixiePanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.SELECTION));var d=new TrixiePanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createTrixieConfirmationPanel=function(c,f,a,e){var b=new TrixieConfirmationPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.CONFIRMATION));var d=new TrixieConfirmationPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};SlipFactory.prototype.createTrixieReportPanel=function(c,f,a,e){var b=new TrixieReportPanel();b.setPanelName(c);b.setSlipRef(f);b.setTabOrder(a);b.setViewAssignments(new Array(SlipView.REPORT));var d=new TrixieReportPanelDisplay(f.getDisplay().getDomContainerSelector()+" #comboPanelContainer");d.setAnchorId("comboPanelContainer");d.setOwnerRef(b);d.setVisible(e);b.setDisplay(d);b.getSlipRef().internalRegisterPanel(c,b);return b};function TrixiePanel(){this._calculatedCombinations=new Array();this._trixieCombos=new Array();this._bankersShown=false;this._isEdittingStakeBox=false;this._possiblePayout=0;this._totalBets=0;this._posiblePoints=0;this._selections;this._trixieCombos;this._comboMaxStakes=new Array();this._lastNumberSelections=0;this._lastNumCheckedSelections=0;this._numberSelections=0;this._numCheckedSelections=0;this._totalCost=0;this._totalTax=0;this._stakeBoxRegister=new StakeBoxRegister();this._hotComboAvailable=false;this._selectionsValidationsResult;this._lastMultiwayPossible=null;this._lastBankersLinkClicked=null}TrixiePanel.prototype=new Panel();TrixiePanel.prototype.getStakeBoxRegister=function(){return this._stakeBoxRegister};TrixiePanel.prototype._checkSP=function(b){if(this._selectionsValidationsResult.isMultiWayPossible()){for(var a in b){if(this._selections[b[a]].isSP()){return true}}return false}else{for(var a in b){if(this._selections[a].isSP()){return true}}return false}};TrixiePanel.prototype._calculateCombinations=function(d,b){var a=new Array();for(var c=2;c<b;c++){this._combineTrixie(a,new Array(),c,d,0)}return a};TrixiePanel.prototype._combineTrixie=function(b,f,h,a,g){for(var e=g;e<a.length;e++){var d=a[e];var c=new Array();c=c.concat(f);c.push(d);if(h==1){b.push(c)}else{this._combineTrixie(b,c,h-1,a,e+1)}}};TrixiePanel.prototype._calculatePossiblePayOutAndPoints=function(e,f,d){this.getSlipRef().getLogger().log("TrixiePanel.prototype._calculatePossiblePayOutAndPoints begin");if(e>0){combinationNumber=-1;var j=0;var a=0;var i=0;for(var k in this._calculatedCombinations){var b=this._calculatedCombinations[k];combinationNumber++;var h=1;for(var l in b){var g=b[l];var c=this._selections[g];h=h*c.getStyledOdd();if(d&&(combinationNumber==(this._calculatedCombinations.length-1))){this._possiblePayout+=c.getStyledOdd()*e;a+=c.getStyledOdd()*e;this._totalBets++;j++;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var n=this.getSlipRef().calculatePoints(e,to_mn(c.getStyledOdd()),c.isSP(),visitor.getToBaseCurrencyFxRate());this._posiblePoints+=n;i+=n}else{var n=this.getSlipRef().calculatePoints(e,c.getStyledOdd(),c.isSP(),visitor.getToBaseCurrencyFxRate());this._posiblePoints+=n;i+=n}}}this._possiblePayout+=h*e;a+=h*e;this._totalBets++;j++;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var n=this.getSlipRef().calculatePoints(e,to_mn(h),f,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=n;i+=n}else{var n=this.getSlipRef().calculatePoints(e,h,f,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=n;i+=n}}this._trixieCombos[d].setPoints(i);this._trixieCombos[d].setPayout(a);this._totalCost+=e*j;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var m=e*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax+=(Math.round(m*100)/100)*j}}this.getSlipRef().getLogger().log("TrixiePanel.prototype._calculatePossiblePayOutAndPoints end")};TrixiePanel.prototype._calculatePossiblePayOutAndPointsforMultiWay=function(a,q,m,h,b){var s=0;var k=0;for(var e in q){var g=q[e];if(e==this._numberSelections){var j=1;for(var l in g){var d=g[l];var r=this._selections[d];j=j*r.getStyledOdd();if(h){this._possiblePayout+=r.getStyledOdd()*a;s+=r.getStyledOdd()*a;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var i=this.getSlipRef().calculatePoints(a,to_mn(r.getStyledOdd()),r.isSP(),visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}else{var i=this.getSlipRef().calculatePoints(a,r.getStyledOdd(),r.isSP(),visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}}}this._possiblePayout+=j*a;s+=j*a;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var i=this.getSlipRef().calculatePoints(a,to_mn(j),m,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}else{var i=this.getSlipRef().calculatePoints(a,j,m,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}}else{for(var c in g){var n=g[c];var j=1;for(var l in n){var o=n[l];var r=this._selections[d];j=j*r.getStyledOdd()}this._possiblePayout+=j*a;s+=j*a;if(visitor.getEffectiveOddStyle()==SlipConstants.ODD_STYLE_FRACTION){var i=this.getSlipRef().calculatePoints(a,to_mn(j),m,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}else{var i=this.getSlipRef().calculatePoints(a,j,m,visitor.getToBaseCurrencyFxRate());this._posiblePoints+=i;k+=i}}}}if(this._trixieCombos[h].getPayout()){this._trixieCombos[h].setPoints(this._trixieCombos[h].getPoints()+k);this._trixieCombos[h].setPayout(this._trixieCombos[h].getPayout()+s)}else{this._trixieCombos[h].setPoints(k);this._trixieCombos[h].setPayout(s)}this._totalCost+=a*b;this._totalBets+=b;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var f=a*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax=(Math.round(f*100)/100)*b}};TrixiePanel.prototype._getMinMaxStake=function(d){var b=this._comboMaxStakes[0];for(var c=1;c<this._comboMaxStakes.length;c++){if(b>this._comboMaxStakes[c]){b=this._comboMaxStakes[c]}}if(d){for(var a in this._selections){if(b>this._selections[a].getMaxStake()){b=this._selections[a].getMaxStake()}}}return b};TrixiePanel.prototype._getOutcomeIds=function(c){var b=new Array();for(var a in c){b.push(a)}return b};TrixiePanel.prototype._validateEachways=function(b){for(var a in b){if(b[a].isEachWayPossible()){return true}}return false};TrixiePanel.prototype.showPredefinedSystemsHelpBlock=function(a){return ourlib("<table border=0 cellpadding=0 cellspacing=0 class='bfBalloon' width=150><tr><td class='bfBalloonHead'>"+this.getSlipRef().getTranslations()["TRIXIE_TYPE_TEXTS"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][a]+"</td></tr><tr><td class='bfBalloonTxt'>"+this.getSlipRef().getTranslations()["PREDEFINED_SYSTEM_HELP_MSG"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][a]+"</td></tr></table>")};TrixiePanel.prototype._checkForComboFactorConflict=function(b,e){var a=false;for(var c in this._selections){var d=this._selections[c].getEventRef().getComboFactor();if(this._selections[c].isSelectionChecked()){if((b==0&&d>2)||(b==1&&d!=0)){return true}}}return a};TrixiePanel.prototype._createTrixieBet=function(i){this.getSlipRef().getLogger().log("TrixiePanel.prototype._createTrixieBet begin");var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);var k=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var a=this.getSlipRef().getConfigs()["TRIXIE_BETS_SYSTEM_TYPES_ARRAY"];var h=a[this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][i];if(!this._checkForComboFactorConflict(i,h)){if(this._trixieCombos[i]==null){this._trixieCombos[i]=new TrixieComboType();this._trixieCombos[i].setComboId(i);this._trixieCombos[i].setStake(0);this._trixieCombos[i].setDisplayStake("")}this._trixieCombos[i].setComboClass(this._numberSelections);this._trixieCombos[i].setBetSystemType(h);if(isNaN(this._trixieCombos[i].getMaxStake())&&visitor.isLoggedIn()){this._trixieCombos[i].setMaxStake(this._getMinMaxStake(i))}var c=this._trixieCombos[i].getStake();if(this._selectionsValidationsResult.isMultiWayPossible()){var f=b.getNumberOfBetsForClass(this._numberSelections);var j=this.getSlipRef().getConfigs()["TRIXIE_BETS_NUMBERS_ARRAY"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][i];if(j*f>SlipConstants.MAX_NUMBER_SYSTEM_BETS){this._trixieCombos.splice(i,1);if(this._trixieCombos.length==0){this._validData=false}return}this._trixieCombos[i].setNumBets(j*f);this._trixieCombos[i].setNumSystemBets(f);this._trixieCombos[i].setPoints(0);this._trixieCombos[i].setPayout(0);if(c>0){var g=b.expandMultiWaySelections(this._numberSelections);for(var l in g){var e=g[l][this._numberSelections];var d=this._checkSP(e);this._calculatePossiblePayOutAndPointsforMultiWay(c,g[l],d,i,j)}}}else{var j=this.getSlipRef().getConfigs()["TRIXIE_BETS_NUMBERS_ARRAY"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][i];this._trixieCombos[i].setNumBets(j);this._trixieCombos[i].setNumSystemBets(1);if(c>0){var d=this._checkSP(this._selections);var e=this._getOutcomeIds(k.getCheckedSelections());this._calculatedCombinations=this._calculateCombinations(e,this._numberSelections+1);this._calculatePossiblePayOutAndPoints(c,d,i)}}}this.getSlipRef().getLogger().log("TrixiePanel.prototype._createTrixieBet end")};TrixiePanel.prototype.localDataChanged=function(){this.getSlipRef().getLogger().log("TrixiePanel.prototype.localDataChanged 1");this._possiblePayout=0;this._totalBets=0;this._posiblePoints=0;this._totalCost=0;this._totalTax=0;if(this._validData){this._buildTrixies()}else{this._clear()}if(!this._isEdittingStakeBox){this.getDisplay().refresh()}this.getSlipRef().getLogger().log("TrixiePanel.prototype.localDataChanged end")};TrixiePanel.prototype._buildTrixies=function(){this.getSlipRef().getLogger().log("TrixiePanel.prototype._buildTrixies begin");if(this._validData&&this._lastMultiwayPossible!=this._selectionsValidationsResult.isMultiWayPossible()||(this._numberSelections!=this._lastNumberSelections)||(this._numCheckedSelections!=this._lastNumCheckedSelections)||(this._lastBankersLinkClicked!=this._bankersShown)){this._trixieCombos=new Array()}var a=0;this._createTrixieBet(a);a++;if(this._numberSelections<SlipConstants.MAX_TRIXIE_2_SYSTEMS){this._createTrixieBet(a)}this._lastNumberSelections=this._numberSelections;this._lastNumCheckedSelections=this._numCheckedSelections;this._lastMultiwayPossible=this._selectionsValidationsResult.isMultiWayPossible();this._lastBankersLinkClicked=this._bankersShown;this.getSlipRef().getLogger().log("TrixiePanel.prototype._buildTrixies end")};TrixiePanel.prototype._clear=function(){if(this._trixieCombos!=null){this._trixieCombos=new Array()}};TrixiePanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("TrixiePanel.prototype.fetchExternalData begin");var f=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL);var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);this._numberSelections=f.getCheckedSelectionsCounter();this._numCheckedSelections=f.getCheckedSelectionsCounter();this._bankersShown=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).isBankersLinkClicked();this._hasError=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).getShowErrorMsg();if(this.getSlipRef().getLiveMode()==0){this._hotComboAvailable=this.getSlipRef().getPanelReference(SlipConstants.HOT_COMBO_PANEL).isHotComboAvailable()}this._selectionsValidationsResult=f.getSelectionsValidationsResult();this._multywaysystems=b.getMultiWayCombinations();this.getDisplay().setVisible(false);if(f.isEachWayAvailable()){this._eachWayPossible=this._validateEachways(f.getCheckedSelections())}else{this._eachWayPossible=false}if(!this._bankersShown&&!this._eachWayPossible&&this._numberSelections>=SlipConstants.MIN_TRIXIE_SELECTIONS&&!this.isHotComboAvailable()){this.getDisplay().setVisible(true);this._selections=f.getCheckedSelections();var j;this._validData=true;if(!this._selectionsValidationsResult.isMultiWayPossible()&&!this._selectionsValidationsResult.hasConflict()&&this._numberSelections<=SlipConstants.MAX_TRIXIE_SELECTIONS){j=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).getComboTypes();for(var e=2;e<=this._numberSelections;e++){for(var c in j){if(typeof(j[c])!="undefined"){if(j[c].getComboClass()==e){this._comboMaxStakes[e-2]=j[c].getMaxStake();break}}}}}else{if(this._selectionsValidationsResult.isMultiWayPossible()){this._numberSelections=b.getMaxCombinationSize()+0;if(this._numberSelections<SlipConstants.MIN_TRIXIE_SELECTIONS||this._numberSelections>SlipConstants.MAX_TRIXIE_SELECTIONS){this._validData=false;this._lastNumberSelections=this._numberSelections;this._lastNumCheckedSelections=this._numCheckedSelections;this._lastMultiwayPossible=this._selectionsValidationsResult.isMultiWayPossible();this._lastBankersLinkClicked=this._bankersShown;return}var h=false;var a=0;var d=b.getNumberOfBetsForClass(this._numberSelections);var g=this.getSlipRef().getConfigs()["TRIXIE_BETS_NUMBERS_ARRAY"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][a];if(g*d>SlipConstants.MAX_NUMBER_SYSTEM_BETS){h=true}else{a++;if(this._numberSelections<SlipConstants.MAX_TRIXIE_2_SYSTEMS){g=this.getSlipRef().getConfigs()["TRIXIE_BETS_NUMBERS_ARRAY"][this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS][a];if(g*d>SlipConstants.MAX_NUMBER_SYSTEM_BETS){h=true}}}if(h){this._validData=false;this._lastNumberSelections=this._numberSelections;this._lastNumCheckedSelections=this._numCheckedSelections;this._lastMultiwayPossible=this._selectionsValidationsResult.isMultiWayPossible();this._lastBankersLinkClicked=this._bankersShown;return}j=this._multywaysystems;for(var e=2;e<=this._numberSelections;e++){for(var c in j){if(j[c].getCombinationSize()==e){this._comboMaxStakes[e-2]=j[c].getMaxStake();break}}}}else{if(this._numberSelections>SlipConstants.MAX_TRIXIE_SELECTIONS||this._selectionsValidationsResult.hasConflict()){this._validData=false;this._lastNumberSelections=this._numberSelections;this._lastNumCheckedSelections=this._numCheckedSelections;this._lastMultiwayPossible=this._selectionsValidationsResult.isMultiWayPossible();this._lastBankersLinkClicked=this._bankersShown;return}}}}else{this._validData=false;this._lastNumberSelections=this._numberSelections;this._lastNumCheckedSelections=this._numCheckedSelections;this._lastBankersLinkClicked=this._bankersShown}this.getSlipRef().getLogger().log("TrixiePanel.prototype.fetchExternalData end")};TrixiePanel.prototype.editStake=function(b,a){this._isEdittingStakeBox=true;this._trixieCombos[b].setStake(this.getSlipRef().makeStake(a));this._trixieCombos[b].setDisplayStake(a);this.localDataChanged();this.getSlipRef().getPanelReference(SlipConstants.TOTAL_SELECTION_PANEL).externalDataChanged();this.getSlipRef().persist();this._isEdittingStakeBox=false};TrixiePanel.prototype.getTrixies=function(){return this._trixieCombos};TrixiePanel.prototype.getPossiblePayout=function(){return this._possiblePayout};TrixiePanel.prototype.getTotalBets=function(){return this._totalBets};TrixiePanel.prototype.getTotalCost=function(){return this._totalCost};TrixiePanel.prototype.getPossiblePoints=function(){return this._posiblePoints};TrixiePanel.prototype.isHotComboAvailable=function(){return this._hotComboAvailable};TrixiePanel.prototype.getTotalTax=function(){return this._totalTax};TrixiePanel.prototype.clearAllStakes=function(){this._isEdittingStakeBox=true;for(var a=0;a<this._trixieCombos.length;a++){this._trixieCombos[a].setStake(0);this._trixieCombos[a].setDisplayStake("")}this._isEdittingStakeBox=false};TrixiePanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.urls=this.getSlipRef().getUrls();a.trixieCombos=this._trixieCombos;a.isMaxStakeShown=this.getSlipRef().isMaxStakeShown();a.currentSystem=this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS;a.multiWayPossible=this._selectionsValidationsResult.isMultiWayPossible();if(this.getSlipRef().getLiveMode()==0){a.showPredefinedSystemsHelpBlock=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TRIXIE_PANEL).showPredefinedSystemsHelpBlock"}else{a.showPredefinedSystemsHelpBlock=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TRIXIE_PANEL).showPredefinedSystemsHelpBlock"}if(this.getSlipRef().getLiveMode()==0){a.editStake=SlipConstants.GLOBAL_BET_SLIP+".getPanelReference(SlipConstants.TRIXIE_PANEL).editStake"}else{a.editStake=SlipConstants.GLOBAL_LIVE_SLIP+".getPanelReference(SlipConstants.TRIXIE_PANEL).editStake"}this._stakeBoxRegister.setMaxStakeBoxTabIndex(this.getTabOrder());this._stakeBoxRegister.resetStakeBoxRegister();a.stakeBoxRegister=this._stakeBoxRegister;if(this.getSlipRef().getLiveMode()==0){a.stakeTabOrder=SlipConstants.GLOBAL_BET_SLIP+".stakeTabOrder"}else{a.stakeTabOrder=SlipConstants.GLOBAL_LIVE_SLIP+".stakeTabOrder"}a.freeBetMode=this.getSlipRef().getFreeBetMode();return a};function TrixieComboType(){}TrixieComboType.prototype.setStake=function(a){this._stake=a};TrixieComboType.prototype.getStake=function(){return this._stake};TrixieComboType.prototype.setDisplayStake=function(a){this._displayStake=a};TrixieComboType.prototype.getDisplayStake=function(){return this._displayStake};TrixieComboType.prototype.hasStake=function(){return this._stake!=0};TrixieComboType.prototype.setNumBets=function(a){this._numBets=a};TrixieComboType.prototype.getNumBets=function(){return this._numBets};TrixieComboType.prototype.setNumSystemBets=function(a){this._numSystemBets=a};TrixieComboType.prototype.getNumSystemBets=function(){return this._numSystemBets};TrixieComboType.prototype.setComboId=function(a){this._combId=a};TrixieComboType.prototype.getComboId=function(){return this._combId};TrixieComboType.prototype.setComboClass=function(a){this._comboClass=a};TrixieComboType.prototype.getComboClass=function(){return this._comboClass};TrixieComboType.prototype.setMaxStake=function(a){this._maxStake=a};TrixieComboType.prototype.getMaxStake=function(){return this._maxStake};TrixieComboType.prototype.setBetSystemType=function(a){this._betSystemType=a};TrixieComboType.prototype.getBetSystemType=function(){return this._betSystemType};TrixieComboType.prototype.setPoints=function(a){this._points=a};TrixieComboType.prototype.getPoints=function(){return this._points};TrixieComboType.prototype.setPayout=function(a){this._payout=a};TrixieComboType.prototype.getPayout=function(){return this._payout};TrixiePanel.prototype.getSerializationAttributes=function(){return Panel.prototype.getSerializationAttributes().concat(["_trixieCombos","_numberSelections","_numCheckedSelections","_lastNumberSelections","_lastNumCheckedSelections","_lastMultiwayPossible","_eachWayPossible","_validData","_totalBets","_possiblePayout","_posiblePoints","_totalCost","_totalTax","_bankersShown","_lastBankersLinkClicked","_comboMaxStakes","_selectionsValidationsResult","_hotComboAvailable"])};function TrixieConfirmationPanel(){this._trixieTypes=new Array();this._numberSelections=0}TrixieConfirmationPanel.prototype=new Panel();TrixieConfirmationPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.confComboSelections=this._confComboSelections;a.trixieCombos=this._trixieTypes;a.currentSystem=this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};TrixieConfirmationPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("TrixieConfirmationPanel.prototype.fetchExternalData begin");var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);this._selectionsValidationsResult=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelectionsValidationsResult();var a=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);this._trixieTypes=a.getTrixies();this._confComboSelections=this.getSlipRef().getPanelReference(SlipConstants.COMBO_PANEL).getShowErrorMsg();if(this._selectionsValidationsResult.isMultiWayPossible()){this._numberSelections=b.getMaxCombinationSize()}else{this._numberSelections=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getCheckedSelectionsCounter()}this.getSlipRef().getLogger().log("TrixieConfirmationPanel.prototype.fetchExternalData end")};TrixieConfirmationPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};function TrixieReportPanel(){this._trixieTypes=new Array();this._trixieResults=new Array();this._numberSelections=0;this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0}TrixieReportPanel.prototype=new Panel();TrixieReportPanel.prototype.getDataModel=function(){var a=new Object();a.translations=this.getSlipRef().getTranslations();a.trixieCombos=this._trixieTypes;a.trixieResults=this._trixieResults;a.currentSystem=this._numberSelections-SlipConstants.MIN_TRIXIE_SELECTIONS;a.currencySymbol=this.getSlipRef().getCurrencySymbol(visitor.getCurrency());return a};TrixieReportPanel.prototype.fetchExternalData=function(){this.getSlipRef().getLogger().log("TrixieReportPanel.prototype.fetchExternalData begin");var b=this.getSlipRef().getPanelReference(SlipConstants.MULTI_WAY_PANEL);this._selectionsValidationsResult=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getSelectionsValidationsResult();var a=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);this._trixieTypes=a.getTrixies();this.getSlipRef().getLogger().log("TrixieReportPanel.prototype.fetchExternalData this._trixieTypes = "+compactJSON(this._trixieTypes));if(this._selectionsValidationsResult.isMultiWayPossible()){this._numberSelections=b.getMaxCombinationSize()}else{this._numberSelections=this.getSlipRef().getPanelReference(SlipConstants.SELECTION_PANEL).getCheckedSelectionsCounter()}this._trixieResults=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getTrixiesFailed();this.getSlipRef().getLogger().log("TrixieReportPanel.prototype.fetchExternalData end")};TrixieReportPanel.prototype.localDataChanged=function(){this.getDisplay().refresh()};TrixieReportPanel.prototype.setTrixiesFailed=function(e){var a=this.getSlipRef().getPanelReference(SlipConstants.TRIXIE_PANEL);var g=this.getSlipRef().getPanelReference(SlipConstants.SUBMIT_BUTTON_PANEL).getAllFailed();this._trixieResults=e;if(g==true){this._totalCost=0;this._numberBets=0;this._possiblePayout=0;this._possiblePoints=0;this._totalTax=0;return}this._trixies=a.getTrixies();this._totalCost=a.getTotalCost();this._numberBets=a.getTotalBets();this._possiblePayout=a.getPossiblePayout();this._possiblePoints=a.getPossiblePoints();this._totalTax=a.getTotalTax();if(this._trixieResults&&this._trixieResults.length!=0){for(var b in this._trixies){if(this._trixieResults[b].isFailed()){var f=this._trixies[b];this._totalCost-=f.getStake()*f.getNumBets();this._numberBets-=f.getNumBets();this._possiblePayout-=f.getPayout();var d=to_mn(this._possiblePoints,6);d-=to_mn(f.getPoints(),6);this._possiblePoints=d;if(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]!=null){var c=f.getStake()*(this.getSlipRef().getConfigs()["TOTAL_BET_TAX_PERCENTAGE"]/100);this._totalTax-=(Math.round(c*100)/100)*f.getNumBets()}}}}};TrixieReportPanel.prototype.getTrixiesResults=function(){return this._trixieResults};TrixieReportPanel.prototype.getTotalCost=function(){return this._totalCost};TrixieReportPanel.prototype.getBetsPlaced=function(){return this._numberBets};TrixieReportPanel.prototype.getPossiblePoints=function(){return this._possiblePoints};TrixieReportPanel.prototype.getPossiblePayout=function(){return this._possiblePayout};TrixieReportPanel.prototype.getTotalTax=function(){return this._totalTax};